	
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Dronelogbook</title>
<script src="/_static/lib/jquery-3.6.1.min.js"></script>
<link rel="stylesheet" href="/_static/lib/jquery-ui-1.13.2/jquery-ui.css">
<script src="/_static/lib/jquery-ui-1.13.2/jquery-ui.min.js"></script>

<link rel="stylesheet" href="/_static/css/main.css?v=20250926">
<link rel="stylesheet" href="/_static/css/calendar.css">
<link rel="stylesheet" href="/_static/css/lists.css?v=20250203">
<link rel="stylesheet" href="/_static/css/specials.css?v=20251030">
<link rel="stylesheet" href="/_static/css/pop-up.css?v=20241028">

<link rel="stylesheet" href="/_static/css/print.css">

<link rel="stylesheet" href="/_static/css/mobile.css?v=20201110">

<script src="/_static/js/uuid.js"></script>
<script src="/_static/js/util.js?v=20230829"></script>

<!-- Selectize -->
<script src="/_static/lib/selectize/standalone/selectize.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="/_static/lib/selectize/css/selectize.css?v=20250407" type="text/css" />

<!-- TimeAgo -->
<script src="/_static/lib/jquery.timeago.js"></script>

<!-- DateTime picker -->
<link rel="stylesheet" href="/_static/lib/flatpickr/flatpickr.min.css">
<script src="/_static/lib/flatpickr/flatpickr.js"></script>

<!-- Cookie -->
<script src="/_static/lib/cookie.js" type="text/javascript"></script>

<!-- QRCode -->
<script src="/_static/lib/qrcode.min.js"></script>

<!-- Country -->
<link href="/_static/lib/countrySelector/css/bootstrap-formhelpers-countries.flags.css" rel="stylesheet">
<script src="/_static/lib/countrySelector/bootstrap-formhelpers.min.js?v=20231015"></script>

<!-- Custom Tooltip -->
<link href="/_static/lib/customtooltip/customtooltip.css" rel="stylesheet">
<script src="/_static/lib/customtooltip/customtooltip.js"></script>










</head>

<script>
	//------- Manage pagination --------
      function onchangePage( sens, currentPage, maxPage, form){
          if (sens=="PREV") offset=-1; 
          if (sens=="NEXT") offset=+1;
          currentPage=currentPage+offset;
          if (currentPage<=0) { currentPage=1; return;}
          if (currentPage>maxPage) { currentPage=maxPage; return;}
          
          $("#currentPagination").val(currentPage);
          $("#"+form).submit();
      }  
      function onchangePageDirect( newPage, form){
          currentPage=newPage;          
          $("#currentPagination").val(currentPage);
          $("#"+form).submit();
      } 
      
</script>

<body>

	<div id="popupConfirm" class="pop-up" style="display: none; z-index: 35000;">
    <div class="dimmer"></div>
    <div class="content-container">
        <div class="close"></div>
        <div class="fields one">
                <div class="">
                    <div class="title"></div>
                    <div class="message"></div>
                    <div class="button-container two" align="center">
                        <div class="button ok default">OK</div>
                        <div class="button cancel">Cancel</div>
                    </div>
            </div>
        </div>
    </div>
</div>  

<div id="popupAlert" class="pop-up" style="display: none; z-index: 35000;">
    <div class="dimmer"></div>
    <div class="content-container">
        <div class="close"></div>
        <div class="fields one">
            <div class="title">Information</div>
            <div class="message"></div>
            <div class="button-container one" align="center">
                <div class="button cancel">Close</div>
            </div>
        </div>
    </div>
</div>  


<script>
    function popupConfirm (title, message, okCallback, cancelCallback) {
        $("#popupConfirm .title").html(title);
        $("#popupConfirm .message").html(message);
        //$('.pop-up').hide();
        $('#popupConfirm').show();

        $('#popupConfirm .close').unbind( "click" );
        $('#popupConfirm .button.ok').unbind( "click" );
        $('#popupConfirm .button.cancel').unbind( "click" );

        $('#popupConfirm .close').on('click', function () {
            $('#popupConfirm').hide();
        });
        $('#popupConfirm .button.ok').on('click', function () {
            if (okCallback!=undefined) okCallback();
            $('#popupConfirm').hide();
        });
        $('#popupConfirm .button.cancel').on('click', function () {
            if (cancelCallback!=undefined) cancelCallback();
            $('#popupConfirm').hide();
        });  
    }   

    function popupAlert (message, title, closeCallback) {
        
        if ( title!=undefined && title!="") { 
            $("#popupAlert .message").show();
            $("#popupAlert .title").html(title);
            $("#popupAlert .message").html(message);
        } else {
            $("#popupAlert .title").hide();
            $("#popupAlert .message").html(message);
        }
        //$('.pop-up').hide();
        $('#popupAlert').show();

        $('#popupAlert .close').unbind( "click" );
        $('#popupAlert .button.cancel').unbind( "click" );

        $('#popupAlert .close').on('click', function () {
            if (closeCallback!=undefined) closeCallback();
            $('#popupAlert').hide();
        });
        $('#popupAlert .button.cancel').on('click', function () {
            if (closeCallback!=undefined) closeCallback();
            $('#popupAlert').hide();
        });  
    }   

</script>




<div class="UIImageViewer" style="display: none; opacity: 1; background-color: rgba(0, 0, 0, 0.6);">
    <div class="box" align="center">
        <img id="imgViewer" style="max-width: 60vw;"/>
        <div align="center" style="display: block;">
            <div class="button cancel">Close</div>
            <input type="hidden" id="currentImgId" name="currentImgId"/>
            <input type="hidden" id="attachedGUID" name="attachedGUID"/>
            <div class="button imageViewerDeleteImageButton" style="display: none;" onClick="deletePicture ($('#currentImgId').val(), onPictureDeleted);">Delete</div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".UIImageViewer .cancel").on('click', function () { $('.UIImageViewer').hide(); });
    });

    function openImageViewer (src, id, attachedGUID, showDelete) {
        $('#imgViewer').attr("src",src);
        $('.UIImageViewer #currentImgId').val(id);
        $('.UIImageViewer #attachedGUID').val(attachedGUID);

        if (showDelete) $('.UIImageViewer .imageViewerDeleteImageButton').show();
        else $('.UIImageViewer .imageViewerDeleteImageButton').hide();

        $('.UIImageViewer').show();
    }
</script>
<link rel="stylesheet" href="/_static/css/messaging.css?v=20221012">
<script>

/************* */
    $(document).ready(function() {

        $("#messagingEditorPopup .button.send").on('click', function () {
            popupConfirm('Confirmation','Do you want to save this message?', function() { actionsMessage("ACTION_SAVE_MESSAGE");})
        });

        
    });

/************* */
    var _callbackFct=null;
    function openMessagingEditor(type, isNew,callback) {
        $("#messagingViewerPopup").hide();
        $("#messagingEditorPopup").show();

        $("#messagingEditorPopup #messageType").val(type);

        if (type=="MANUAL") {
            $("#messagingEditorPopup .recipient-block").show();
            $("#messagingEditorPopup .rule-block").hide();

        } 
        if (type=="NOTIF_AUTO") {
            $("#messagingEditorPopup .recipient-block").hide();
            $("#messagingEditorPopup .rule-block").show();
        }

        // Reset form:
        if (isNew) {
            _messageRecipientsSelectize[0].selectize.clearOptions();
            _messageRecipientsSelectize[0].selectize.clear(true);
            _messageChannelsSelectize[0].selectize.clear(true);
            _orgsSelectizeRestrictions[0].selectize.clear(true);

            $("#messagingEditorForm #channelRestrictionTypeExclude").prop("checked",false);
            $("#messagingEditorPopup #messageBody").val("");
            $("#messagingEditorPopup #messageSeverity").val("INFO");
        } 
        
        if (callback!=undefined)
            _callbackFct=callback;
    }

/************* */
    function openMessagingViewer() {
        $("#messagingEditorPopup").hide();
        $("#messagingViewerPopup").show();
        getCurrentUserMessageList();
    }

/************* */
	function actionsMessage (action) {
	
        $("#messagingEditorForm #actionMsg").val(action);

        if (action=="ACTION_SAVE_MESSAGE") {

            // Channels selected:
            var channelRule = "";
            $(".channelBlock .selectize-input.items .item").each(function(){
                var _channelId=$(this).attr("data-value");
                var channelRules="";
                if (channelArr[_channelId].ruleParams!=undefined && channelArr[_channelId].ruleParams.length>0) channelRules= ', "rulesParams": ' + JSON.stringify(channelArr[_channelId].ruleParams) + ',"shortChannelName": "'+channelArr[_channelId].shortChannelName+'"';
                channelRule += '{ "channelId": "' + _channelId + '", "channelName": "' + channelArr[_channelId].channelName  + '" '+channelRules+'},'; // $(this).text()
            });
            if (channelRule!="") { 
                channelRule=channelRule.slice(0, -1);
                channelRule='"channels": ['+channelRule+']';
            }

            // Orgs restriction:
            if ($("#messagingEditorForm #channelOrgSelected").val()!=""){
                channelRule += ', "orgRestrictionIds": "'+$("#messagingEditorForm #channelOrgSelected").val()+'", "orgRestrictionExclude": "'+$("#messagingEditorForm #channelRestrictionTypeExclude").prop("checked")+'"';
            }  

            $("#messagingEditorForm #messageChannelsRule").val("{"+channelRule+"}");


            // Validation:
            if ($("#messagingEditorForm #messageBody").val()=="") {
                popupAlert("Please enter some text to your message.");
                return false;
            }

            if ($("#messagingEditorForm #messageChannels").val()=="" && $("#messagingEditorForm #messageRecipients").val()=="" && $("#messagingEditorPopup #messageType").val()!="NOTIF_AUTO") {
                popupAlert("Please enter at least one distribution channel or recipient.");
                return false;
            }

        }

        var fd = new FormData(document.getElementById("messagingEditorForm"));

        $.ajax({
            url: "/messaging/messagingToolAction.php",
            type: "POST",
            data: fd,
            enctype: 'multipart/form-data',
            processData: false, 
            contentType: false 

            }).done(function( data ) {

                console.log (data)

                obj=jQuery.parseJSON(data);

                if (obj.action=="ACTION_SAVE_MESSAGE" && obj.status==-1) {
                    popupConfirm('Validation','You have already an existing Rule Notification for this trigger. Would you rather edit it?', function() { 
                        $("#messagingEditorForm #actionMsg").val("ACTION_EDIT_MESSAGE");
                        $("#messagingEditorForm #currentMsgGUID").val(obj.id);
                        $("#messagingEditorForm").submit();
                    })
                    return;
                }

                $('#messagingEditorPopup').hide();
                if (_callbackFct!=undefined)
                    _callbackFct();
                else
                    popupAlert ("Your notification has been sent.");
            });

        return false;
    }

/************* */
    function getCurrentUserMessageList () {

        $("#messagingViewContainer .slider").html("");
        $("#messagingViewContainer .slider").append('<div class="notifCard active"><div class="body">Checking For Notification...</div></div>');
        $("#messagingViewContainer .slider-nav").hide();

        filterStatus="UNREAD";
        if ($("#messagingViewerPopup #viewReadNotif").prop('checked')) filterStatus="";

        $.ajax({
            url: "/messaging/messagingToolAction.php",
            type: "POST",
            data: { 
                    "actionMsg": "ACTION_GET_USER_MESSAGES",
                    "recipientId": "",
                    "messageStatus": filterStatus
                }
            }).done(function( datajson ) {

                var msgs = jQuery.parseJSON(datajson);
                //console.log ("---> Get Messages: ", msgs);

                $("#messagingViewContainer .slider").html("");

                for (var i = 0; i < msgs.length; i++) {
                    data = msgs[i];
                    if (i==0) active="active"; else active="";
                    _card  = '<div class="notifCard '+active+'" data-guid="'+data.syncGUID+'" data-status="'+data.status+'">';
                    if (data.extraBody!="" && data.messageType!="MANUAL") extraBody=data.extraBody; else extraBody="";
                    _card += '<div class="body '+data.messageSeverity+'">'+data.messageBody+ '<br/>' + extraBody + '</div>';
                    
                    _card += '<div class="send_date"><span>Sent:</span>'+data.sendDate+'</div>';
                    if (data.readDate!="0000-00-00 00:00:00")
                        _card += '<div class="read_date"><span>Read:</span>'+data.readDate+'</div>';
                    //_card +='<div class="author"><span>From:</span>'+data.authorName+'</div>';
                    _card +='</div>';
                    $("#messagingViewContainer .slider").append(_card);
                }

                if (msgs.length==0) {
                    $("#messagingViewContainer .slider").html("");
                    $("#messagingViewContainer .slider").append('<div class="notifCard active"><div class="body">No New Notifications.</div></div>');
                }
                if (msgs.length>=1) {
                    $("#messagingViewContainer .slider-nav").show();
                    $("#messagingViewContainer .slider-nav .arrow").show();
                }
                if (msgs.length==1) {
                    $("#messagingViewContainer .slider-nav .arrow").hide();
                }

                reInitNotifContainer()
            });
    }

/************* */
    function acknowledgeNotification() {
        var msgGUID=$("#messagingViewContainer .notifCard.active").attr("data-guid");

        $.ajax({
            url: "/messaging/messagingToolAction.php",
            type: "POST",
            data: { 
                    "actionMsg": "ACTION_ACKNOWLEDGE_MESSAGE",
                    "recipientMessageId": msgGUID
                }
            }).done(function( datajson ) {
                $("#messagingViewContainer .notifCard.active").remove();
                reInitNotifContainer();
                showNextNotif();

            });
    }

/************* */
    function editChannelParams (channelId) {

        $("#messageChannelParamsPopup #channelParamsContainer").html("");
        $("#messageChannelParamsPopup #currentChannelId").val(channelId);

        _currentChannel = channelArr[channelId];
        $("#messageChannelParamsPopup .title").html('"'+_currentChannel.channelName+'" Channel Params');
        
        var channelSelectizeArr = new Object();
        for (i=0;i < channelArr[channelId].ruleParams.length;i++) {

            var paramObj=channelArr[channelId].ruleParams[i];

            var selectParams ="";
            console.log ("multi:",paramObj.multi);
            if (paramObj.multi==false) {
                selectParams = '<select id="channelParams_'+paramObj.param+'" data-type="'+paramObj.type+'"></select>\n';
            } else {
                selectParams = '<input id="channelParams_'+paramObj.param+'" data-type="'+paramObj.type+'"/>\n';
            }
            paramsBlock = '<div class="fields-container one"><div class="field"><label>'+paramObj.name+'</label>'+selectParams+'</div></div>';
            $("#messageChannelParamsPopup #channelParamsContainer").append(paramsBlock);
            
            channelSelectizeArr[paramObj.param]=$('#channelParams_'+paramObj.param).selectize({ valueField: 'id', labelField: 'name', searchField: 'name', create: false});

            if (paramObj.predefined==true) {
                // Predefined list of values:
                for (j=0;j < paramObj.values.length;j++) {
                    channelSelectizeArr[paramObj.param][0].selectize.addOption({id: paramObj.values[j].value, name: paramObj.values[j].name}); 
                }
            } else {
                $.ajax({
                    url: '/messaging/messagingToolAction.php', type: 'POST', dataType: 'json',
                    data: { actionMsg: "ACTION_GET_CHANNELPARAM_CHOICE", paramType: paramObj.type, paramId: paramObj.param }
                }).done ( function (data) {
                    //console.log ("get data ", data)
                    for(j=0;j<data.length;j++) channelSelectizeArr[data[0].paramId][0].selectize.addOption({id: data[j].id, name: data[j].name}); 
                });
            }
        }
        channelArr[channelId].selectizes=channelSelectizeArr;
        if (paramObj.multi==true) {
            $('#messageChannelParamsPopup #channelParams_'+paramObj.param).next().find('.selectize-input.items').css("height", "70px");
        }

        $("#messageChannelParamsPopup").show();
    }

/************* */
    function saveChannelParams () { 

        var currentChannelId = $("#messageChannelParamsPopup #currentChannelId").val();
        var _currentChannel = channelArr[currentChannelId];
        var paramsLabel = "";
        var noValue=true;
        for (i=0;i < _currentChannel.ruleParams.length;i++) {

            var paramObj=_currentChannel.ruleParams[i];
            paramValue = $('#channelParams_'+paramObj.param).val();
            if (paramValue!="") noValue=false;
            _currentChannel.ruleParams[i].value=paramValue;
            if (paramsLabel!="") paramsLabel += "/";
            paramsLabel += paramValue;
        }

        if (noValue) {
            popupAlert ("You need to enter at least one param value");
            return;
        }

        if (paramsLabel.length>50) paramsLabel=paramsLabel.substr(0, 50)+"...";
        $(".channelBlock .item[data-value="+currentChannelId+"]").html ("<b>"+_currentChannel.channelName + "</b> <span style='font-size:0.8em;'>: "+paramsLabel+"</span>");
        channelArr[currentChannelId].shortChannelName=paramsLabel;

        console.log ("channelArr changed: ", channelArr);

        $("#messageChannelParamsPopup").hide();
    }

/************* */
    function cancelChannelParams () {
        _messageChannelsSelectize[0].selectize.removeItem($("#messageChannelParamsPopup #currentChannelId").val());
        $("#messageChannelParamsPopup").hide();
    }
</script>


<div id="messagingViewerPopup" class="pop-up add black">
    <div class="dimmer"></div>
    <div class="content-container">
            <div class="close" style="opacity: 1;"></div>
            <fieldset class="fields one">

                <div class="add-fields">
                    <div style="position: absolute; top: -2px; left: 35px;" ><i class="material-icons" style="padding-top: 10px; font-size: 60px;">mail_outline</i></div>
                    <div class="title">Your Notifications</div>
                    <div style="float: right;"><input id="viewReadNotif" name="viewReadNotif" type="checkbox" class="checkbox" onChange="getCurrentUserMessageList ()">&nbsp;&nbsp;View Last 20 Notifications</div>

                    <div class="fields-container one" style="margin-top: 30px;">
                        <div class="field">
                            <div id="messagingViewContainer">	
                                <div class="slider"><div class="notifCard active"><div class="body">No New Notifications.</div></div></div>
                                <div class="slider-nav">
                                    <ul>
                                        <li class="arrow"> <button class="previous"><i class="material-icons" style="padding-top: 10px; font-size: 6em;">keyboard_arrow_left</i></button></li>
                                        <div class="button acknowledge default" onClick="acknowledgeNotification()" style="margin-top: 36px;">Acknowledge</div>
                                        <li class="arrow"><button class="next"><i class="material-icons" style="padding-top: 10px; font-size: 6em;">keyboard_arrow_right</i></button></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="button-container one">
                                        <div class="button cancel">Close</div>
                </div>

            </fieldset>
        </form>
    </div>
</div>


<script>
/* Notification Viewer Script */
var notif_items = document.querySelectorAll('#messagingViewContainer .notifCard');
var notif_itemCount = notif_items.length;
const notif_nextItem = document.querySelector('.next');
const previousItem = document.querySelector('.previous');
var currentNotifCount = 0;

function reInitNotifContainer(){
    notif_items = document.querySelectorAll('#messagingViewContainer .notifCard');
    notif_itemCount = notif_items.length;
    currentNotifCount = 0;

    unreadCount = document.querySelectorAll('#messagingViewContainer .notifCard[data-status="UNREAD"]').length;
    if (unreadCount==0) {

        $(".messaging-trigger").removeClass("notifActive");

        if (notif_itemCount==0) {
            $("#messagingViewContainer .slider").html("");
            $("#messagingViewContainer .slider").append('<div class="notifCard active"><div class="body">No New Notifications.</div></div>');
            $("#messagingViewContainer .slider-nav").hide();
        }
        
    }

    // Update top-nav tag counter:
    if (unreadCount==0) {
        $(".messaging-tag.badge").html("");
        $(".messaging-tag.badge").removeClass("badge");
    } else $(".messaging-tag.badge").html(unreadCount);

    checkNotifActions ()
}

function checkNotifActions () {
    var status = $("#messagingViewContainer .notifCard.active").attr("data-status");
    if (status=="UNREAD") {
        $("#messagingViewContainer .button.acknowledge").show();
    } else {
        $("#messagingViewContainer .button.acknowledge").hide();
    }
}

function showNextNotif() {
  if (notif_items[currentNotifCount]==undefined) return;
  notif_items[currentNotifCount].classList.remove('active');
  if(currentNotifCount < notif_itemCount - 1) { currentNotifCount++;} else { currentNotifCount = 0;}
  notif_items[currentNotifCount].classList.add('active');
  checkNotifActions ()
}

function showPreviousNotif() {
  if (notif_items[currentNotifCount]==undefined) return;
  notif_items[currentNotifCount].classList.remove('active');
  if(currentNotifCount > 0) { currentNotifCount--; } else { currentNotifCount = notif_itemCount - 1; }
  notif_items[currentNotifCount].classList.add('active');
  checkNotifActions ()
}

function keyPressNotif(e) {
  e = e || window.event;
  if (e.keyCode == '37') {
    showPreviousNotif();
  } else if (e.keyCode == '39') {
    showNextNotif();
  }
}

notif_nextItem.addEventListener('click', showNextNotif);
previousItem.addEventListener('click', showPreviousNotif);
document.addEventListener('keydown', keyPressNotif);

</script>
<nav>
    <div class="nav-container">

        <div class="hamburger-mobile">
			<div class="bun-mobile"></div>
			<div class="patty-mobile"></div>
			<div class="bun-mobile"></div>
        </div>

        <div class="links mobileLinks">
            <div class="topNavLogo">
             
                <a href="/index.php" class="logo">
                    <img src="/_static/images/logo.png">
                </a>
                        </div>

            <a href="/dashboard.php" class="link ">Dashboard</a>

                        
                        <a href="/flight/missionMap.php" class="link ">Map</a>
            
                        <a href="/flight/flightPlanification.php" class="link ">Planned Mission</a>
            
            <a href="/document/documentList.php" class="link ">Documents</a>
            <a href="/flight/flightList.php" class="link ">Flights</a>
                        <a href="/calendar/opsCalendar.php" class="link ">Operations Calendar</a> 
            
            
            
            <a class="link-material" onClick=""><i id="shortcutTrigger" class="shortcut-trigger material-icons" style="padding-top: 10px; font-size: 35px;">bookmark_border</i></a>

            
             <a class="link-material" href="https://dronelogbook.freshdesk.com/support/home" target="_blank" style="width:35px"><i class="help_center material-icons" style="padding-top: 10px; font-size: 35px; width:35px">help_center</i></a>

        </div>
        
        <div style="display: flex; align-items: center; justify-content: flex-end;">
            <div class="hamburger right-sidebar">
                <div class="bun"></div>
                <div class="patty"></div>
                <div class="bun"></div>
            </div>
        </div>

    </div>
</nav>

<div class="shortcutsBox">
    <div class="shortcutsBox-title" style="display: flex;">
                <div style="display: flex;">
            <div><input style="" type="checkbox" id="darkModeEnable" name="darkModeEnable"  class="checkbox" onChange="saveTopNavSettings (this)"/></div>
            <div style="font-size: 16px;padding-left: 10px;padding-right: 30px;">Dark Mode</div>
        </div>
        <div>Quick <span style="color: white;">Links</span></div>
    </div>
    
<div class="link-section">

    <div class="section notquicklink">
        <div class="header">General</div>
        <a class="link" href="/">Home</a>
         
        <a class="link" href="/hp/1/pricing.php">Plan Offers</a>
                <!-- <a class="link" href="/homePage/index.php#partners">Partners</a> -->
        <a class="link" href="/profile/contact.php">Contact</a>
        <!-- <a class="link" href="/faq.php">Guide</a> -->
        <a class="link" href="" target="_blank">Release Notes</a>
        <a class="link" href="/profile/userprofile.php?menu=terms_block">Terms of Service</a>
        
            </div>

    <div class="section">
        <div class="header">Flight Management</div>
                <a class="link" href="/calendar/opsCalendar.php">Operations Calendar</a>
        
        <a class="link" href="/project/projectList.php">Projects</a>
                <a class="link" href="/flight/flightPlanification.php">Plan Mission</a>
        <a class="link" href="/flight/flightPlanificationCompleted.php">Completed Missions</a>
        <a class="link" href="/flight/flightPlanificationCanceled.php">Canceled Missions</a>
                <a class="link" href="/flight/flightList.php">Flights</a>
        <!--a class="link" href="/flightImport/logFlightImporter_Autel.php">Autel Sync</a-->
        <a class="link" href="/flightImport/logFlightImporter_DJI.php">DJI Sync</a>

                <a class="link" href="/flightImport/logFlightImporter_DJIAG.php">DJI Agriculture Sync</a>
        
        <a class="link" href="/flightImport/logFlightImporter_DroneTag.php">Dronetag Sync</a>
        <a class="link" href="/flightImport/logFlightImporter_Skydio.php">Skydio Sync</a>
        <!--a class="link" href="/flightImport/logFlightImporter_Sony.php">Sony Sync</a-->
        <a class="link" href="/flightImport/logFlightImporter.php">Import Log Files</a>
        <a class="link" href="#" onClick="flightEditionAction('','ACTION_ADD')">Add Flight (Detailed)</a>
        <a class="link" href="/flight/flightListMassAdd.php">Add Flight (Simplified)</a>
        <a class="link" href="/flight/flightListMassUpdate.php">Mass-Update Flights</a>
        <a class="link" href="/migrationTools/massimport-flight.php">Mass-Import Flights</a>

    </div>

    <div class="section" style="margin-top: 45px;">
                <a class="link" href="/document/documentList.php">Pre-flight Documents</a>
                <a class="link" href="/incident/incidentList.php">Incidents</a> 

    
        <div class="header">Inventory</div>
        <a class="link" href="/inventory/droneList.php">Drones / UAVs</a>
        <a class="link" href="/inventory/equipmentList.php">Equipment</a>
        <a class="link" href="/inventory/equipmentList.php?modeBattery=1">Batteries</a>
        <a class="link" href="/inventory/kitList.php">Kits</a>
        <a class="link" href="/inventory/locationList.php">Locations</a>
                <a class="link" href="/inspection/droneInspectionsList.php">Drone Inspections</a>
                <a class="link" href="/maintenance/maintenanceList.php">Maintenance</a>
        <a class="link" href="/migrationTools/massimport-drone.php">Mass-import Drones</a>
        <a class="link" href="/migrationTools/massimport-equipment.php?modeBattery=1">Mass-import Batteries</a>
        <a class="link" href="/migrationTools/massimport-equipment.php">Mass-import Equipment</a>
        <a class="link" href="/migrationTools/massimport-location.php">Mass-import Locations</a>
        <a class="link" href="/migrationTools/massimport-project.php">Mass-import Projects</a>
    </div>

    <div class="section">
        <div class="header">Fleet Management</div>
        <a class="link" href="/profile/userprofile.php?menu=orgInfo_block">Organization</a>
                <a class="link" href="/profile/organisationPilots.php">Personnel</a>
        <a class="link" href="/document/documentList.php">Org & Pilot Documents</a>
                        <a class="link" href="/skills/skillsMatrix.php">Personnel Skills</a>
            <a class="link" href="/skills/skillManage.php">Manage Skills</a>
                                    <a class="link" href="/inventory/dronesApprovedMatrix.php">Approved UAS</a>
                                    <a class="link" href="/customer/customerList.php">Customers</a>
        <a class="link" href="/migrationTools/massimport-customer.php">Mass-import Customers</a>
        
                    <br/><div class="header">Form Templates</div>
                        <a class="link" href="/document/riskAssessmentListMgmt.php">Risk Assmnt. Templates</a>
                                    <a class="link" href="/document/checkListMgmt.php">Checklist Templates</a>
                                
    </div>

    <div class="section">
        <div class="header">Reports</div>
        <a class="link" href="/reports/reports.php">Compliance</a>
        <a class="link" href="/reports/reports.php">Custom Operations</a>
        <a class="link" href="/reports/reports.php">Custom Inventory</a>
        <a class="link" href="/migrationTools/importExport.php">Data Export</a>

        <br/><div class="header">Archive</div>
        <a class="link" href="/inventory/droneList.php?statusFilter=1">Retired Drones</a>
        <a class="link" href="/inventory/equipmentList.php?statusFilter=1">Retired Equipment</a>
        <a class="link" href="/inventory/equipmentList.php?modeBattery=1&statusFilter=1">Retired Batteries</a>
        <a class="link" href="/project/projectList.php?archived=2">Archived Projects</a>
        <a class="link" href="/profile/organisationPilots.php?archived=2">Archived Personnel</a>
    </div>     

    <div class="section notquicklink">
        <div class="header">Profile</div>
        <a class="link" href="/profile/userprofile.php">Your Profile</a>
        <a class="link" href="/profile/userprofile.php">Change Password</a>
        <a class="link" href="/settings/settings.php">Your Settings</a>
        <a class="link" href="/profile/userprofile.php?menu=orgInfo_block">Your Organization</a>
                                          
                            <a class="link" href="/profile/userprofile.php?menu=transactions_block">Your Subscription</a>
                <a class="link" href="/profile/userprofile.php?menu=seats_block">Your Seatss</a>
                
            </div>      

</div></div>

<script>
    function showShortcuts(){
        $(".shortcutsBox").toggleClass("showShortcuts");
        $(".shortcut-trigger").toggleClass("shortcut-on");
    }

    window.addEventListener('click', function(e){   
        var container = $(".shortcutsBox");
        if ($(".shortcutsBox").hasClass("showShortcuts") && !container.is(event.target) && !container.has(event.target).length) {
            showShortcuts();
        }

        var container = $(".shortcutsBox");
        if ($(".shortcutsBox").hasClass("showShortcuts")==false && $("#shortcutTrigger").is(event.target)) {
            showShortcuts();
        }
    });

    function saveTopNavSettings (item) {

        var form = document.createElement("form");
        var action = document.createElement("input"); 
        form.method = "POST";
        form.action = "";

        var itemInput = document.createElement("input"); 
        if ($(item).attr("type")=="checkbox") { if ($(item).is(":checked")) itemValue=1; else itemValue=0; } else itemValue=$(item).val();
        itemInput.value=itemValue; itemInput.name=$(item).attr("name"); itemInput.id=$(item).attr("name"); form.appendChild(itemInput); 

        action.value="ACTION_TOPNAV_SAVE_SETTINGS"; action.name="action"; action.id="action"; form.appendChild(action);  

        form.setAttribute("style", "display: none");
        document.body.appendChild(form);
        form.submit();
    }

</script>

	
<div class="sidebar-right">

    <div id="mobileTopNavTranspose"></div> 

    <a id="logoutButton" href="#" class="link">Logout</a>

    <a href="/flightImport/integrationsHub.php" class="link">Integration Hub</a>

        <a href="https://dronelogbook.freshdesk.com/support/home" class="link" target="_blank">User Guide</a>
    
        <a href="https://dronelogbook.freshdesk.com/support/solutions/articles/151000036527-release-notes" class="link" target="_blank">Release Notes</a>
    
    <a href="/profile/contact.php" class="link">Contact Us</a>

    <div class="info-container">
        <div class="logo-container">
            <img src="/_static/images/logo-sidebar.png" class="right-side-bar-logo">
        </div>
        <div class="dronelogbook">Dronelogbook</div>
        <!--div class="copyright">Â© 2017</div-->
    </div>

</div>

<div class="UIConfirm" style="display: none; opacity: 1; background-color: rgba(0, 0, 0, 0.6);"><div class="bg"></div>
    <div class="box">
        <h2>Log out?</h2>
        <p>Are you sure you want to log out?</p>
        <div class="button cancel">Cancel</div>
        <div class="button ok default">OK</div>
    </div>
</div>

<script>
    $(document).ready(function() {

        $("#logoutButton").on('click', function () { 

            $('.UIConfirm').show();
            $(".UIConfirm .box").css("transform: ");

        });
        $(".UIConfirm .cancel").on('click', function () { $('.UIConfirm').hide(); });
        $(".UIConfirm .ok").on('click', function () { 
            location = "/profile/logout.php";
         });
    });
</script>    
<div class="sidebar">
    <div class="profile-section">
        <div class="content-container">
            <div class="profile-img">
                <a href="/profile/userprofile.php">
                                <img src="/uploadAvatar/img/default.png" class="orgAdmin" title="Org Admin">
                </a>
            </div>

            <div class="profile-name"  onClick="location='/profile/personDetail.php?id=52273'" style="cursor:pointer;" >
                Flight Dev            </div>

                        <div class="company-name">Airbound</div>
            
            <div class="subscription-level">
                                    <span class="headerSubscription profile-button " onClick="location='/profile/userprofile.php?menu=transactions_block'">ENTERPRISE <b>></b></span>

                    
                            </div>

                        <div class="profile-button" onClick="location='/profile/userprofile.php'">Your Profile</div>
                        
        </div>
    </div>

    <div style="height: calc(100vh - 350px); overflow: auto;">
        <div class="link-section"> 

            
            <div class="container">
                <div class="sidebar-link expand"><b>Report / Import</b></div>
                <div class="dropdown-container ">
                    <a href="/reports/reports.php" class="sidebar-link ">Reports (PDF)</a>
                    <a href="/reports/generatedReports.php" class="sidebar-link ">Reports Generated</a>
                    <a href="/migrationTools/importExport.php" class="sidebar-link ">Import / Export</a>
                </div> 
            </div>

            <a href="/project/projectList.php" class="sidebar-link ">Projects</a>
            <div class="container">
                <div class="sidebar-link expand"><b>Inventory</b></div>
                <div class="dropdown-container giveHeight">
                    <a href="/inventory/droneList.php" class="sidebar-link currentPage">Drones</a>
                    <a href="/inventory/equipmentList.php?modeBattery=1" class="sidebar-link ">Batteries</a>
                    <a href="/inventory/equipmentList.php" class="sidebar-link ">Equipment</a>
                    <a href="/inventory/kitList.php" class="sidebar-link ">Kits</a>
                    <a href="/inventory/locationList.php" class="sidebar-link ">Locations & Fields</a>
                                    </div>					
            </div>
                        <div class="container">
                <div class="sidebar-link expand"><b>Inspections</b></div>
                <div class="dropdown-container ">
                    <a href="/inspection/droneInspectionsList.php" class="sidebar-link ">Drone Inspections</a>
                    <a href="/inspection/equipmentInspectionsList.php?modeBattery=1" class="sidebar-link ">Battery Inspections</a>
                    <a href="/inspection/equipmentInspectionsList.php" class="sidebar-link ">Equipment Inspections</a>
                </div>					
            </div>
                        <a href="/maintenance/maintenanceList.php" class="sidebar-link ">Maintenance</a>

                                    <a href="/customer/customerList.php" class="sidebar-link ">Customers</a>
                        
                        <div class="container">
                <div class="sidebar-link expand"><b>Personnel</b></div>
                <div class="dropdown-container ">
                    <a href="/profile/organisationPilots.php" class="sidebar-link ">Orgs Personnel</a>
                                        <a href="/skills/skillsMatrix.php" class="sidebar-link ">Skills</a>
                    <a href="/inventory/dronesApprovedMatrix.php" class="sidebar-link ">Approved UAS</a>
                                    </div>
            </div>
                        <a href="/incident/incidentList.php" class="sidebar-link ">Incidents</a>
            
                        <a href="/settings/settings.php" class="sidebar-link ">Settings & Support</a>
                        
            <!--div style="width: 100%; margin-left: 2px; margin-right: 4px;"><a href="https://dronelogbook.freshdesk.com/support/home" target="_blank"><div class="square-button">Tutorials</div></a></div-->

        </div>

        <div id="sidebarScaler">
            <div style="font-weight: bold; display: inline-block; margin-top: -8px;">Zoom</div>
            <div><input id="mainZoomScaler" type='range' min="30" max="100" class="scaleSlider" /*onInput="onMainBodyScale(this)"*/ value="100"/></div>
            <div class="square-button small" onClick="onMainBodyScale($('#mainZoomScaler'))" style="margin-top: -7px;">Set</div>
            <script>
                function onMainBodyScale (elt) {
                    $("body").css("zoom",$(elt).val()+"%");
                    $("#sidebarScaler").css("zoom","100%");
                    Cookies.set('mainBodyScale', $(elt).val(), { secure: true});
                }
                $(function(){ 
                    // Set the default Zoom:
                    defaultMainBodyZoom = Cookies.get('mainBodyScale');
                    if (defaultMainBodyZoom!=undefined && defaultMainBodyZoom>0) { $("#mainZoomScaler").val(defaultMainBodyZoom); onMainBodyScale($("#mainZoomScaler")) }
                });
            </script>
        </div>
        
    </div>

    
</div>

        
    <!-- ******* Upload item picture *******-->
    
  <link rel="stylesheet" href="/uploadAvatar/css/cropper.css">
  <link rel="stylesheet" href="/uploadAvatar/css/main.css">
  <script src="/uploadAvatar/js/cropper.min.js"></script>
  <script src="/uploadAvatar/js/main.js"></script>

  <style>
    input.avatarUploadInput {
      color: #444 !important;
      border-radius: 5px !important;
      line-height: 1em;
      border: none !important;
      text-indent: 0px !important;
      background-color: white !important;
    }
    .avatar-btns button {
      border-radius: 6px;
      background-color: #ecebeb;
      font-size: 12px;
      border: 1px solid #ccc;
      color: #444 !important;
      cursor: pointer;
    }
    .avatar-wrapper {
      box-shadow: none;
      background-color: #eaeaea;
    }
  </style>

<script>

    $(document).ready(function() {
        $("#addAvatarPicturePopup .button.save").on('click', function () {
            uploadAvatarImage ();
        });
        $("#addAvatarPicturePopup .button.cancel").on('click', function () {
            $('#addAvatarPicturePopup').hide();
        });
    });

    var callbackAvatarUploadDone = null;
    function showAvatarBox (attachedGUID, placeHolderId, attacheUnique, callbackDone, avatar_target_width, avatar_target_height, title) {
        $('#addAvatarPicturePopup').show();
        
        if (title!="") 
            $("#avatarBoxTitle").html(title);

        $('#avatar_attachedGUID').val(attachedGUID);
        $('#avatar_placeHolderId').val(placeHolderId);
        $('#avatar_attacheUnique').val(attacheUnique);

        $('#avatar_target_width').val(avatar_target_width);
        $('#avatar_target_height').val(avatar_target_height);

        callbackAvatarUploadDone = callbackDone;
    }

    function uploadAvatarImage () {
        var fd = new FormData(document.getElementById("avatarUploadForm"));

	    $.ajax({
	      url: "/uploadAvatar/uploadAvatarAction.php",
	      type: "POST",
	      data: fd,
	      enctype: 'multipart/form-data',
	      processData: false,  // tell jQuery not to process the data"
	      contentType: false   // tell jQuery not to set contentType

	    }).done(function( data ) {

            response=JSON.parse(data);
            if (response!=undefined && response.state==400) {
                popupAlert(response.message);
                return;
            }

            $('#addAvatarPicturePopup').hide();
            if (callbackAvatarUploadDone!=undefined && callbackAvatarUploadDone!=null)
                callbackAvatarUploadDone ($('#avatar_attachedGUID').val()); 
	    });
    }


    function displayAttachedPictureList (attachedGUID, callback) {

        var datas = {"action": "GET_PICTURE_LIST_FORGUID", "currentGUID": attachedGUID};
        
        $.ajax({
            url: "/uploadAvatar/pictureAction.php",
            type: "POST",
            data: datas,
            cache: false,
            dataType:"JSON"
        })
        .done(function( data ) {
            callback (data);
        })
        return false;
    }  

    function deletePicture (pictureGUID, callback) {

        var datas = {"action": "DELETE_PICTURE", "currentGUID": pictureGUID};

        $.ajax({
            url: "/uploadAvatar/pictureAction.php",
            type: "POST",
            data: datas,
            cache: false,
            dataType:"JSON"
        })
        .done(function(data) {
            callback ();
        })
        return false;
    }  
    
</script>

<div class="container" id="crop-avatar">
  <div id="addAvatarPicturePopup" class="pop-up add">

      <div class="dimmer"></div>
      <div class="content-container">
          <div class="close"></div>
          <form id="avatarUploadForm" name="avatarUploadForm" class="avatar-form">

              <fieldset class="fields one">
                  <div class="add-fields">
                      <div id="avatarBoxTitle" class="title">Set Picture</div>

                      <div class="avatar-body">

                      <div class="avatar-upload">
                          <input type="hidden" class="avatar-src" name="avatar_src">
                          <input type="hidden" class="avatar-data" name="avatar_data">
                          <input type="hidden" id="avatar_attachedGUID" name="avatar_attachedGUID">
                          <input type="hidden" id="avatar_attacheUnique" name="avatar_attacheUnique">
                          <input type="hidden" id="avatar_placeHolderId" name="avatar_placeHolderId"> 
                          <input type="hidden" id="avatar_target_width" name="avatar_target_width" value="220"> 
                          <input type="hidden" id="avatar_target_height" name="avatar_target_height" value="220"> 
                                       
                          <div class="fields-container one">
                              <div class="field">
                                <!-- Upload image and data -->    
                                  <div style="display:inline-block;">Choose Local Image:</div>
                                  <div style="display:inline-block;"><input type="file" class="avatar-input avatarUploadInput" id="avatarInput" name="avatar_file"></div>
                                </div>                               
                          </div>
                        </div>
                        
                        <div class="fields-container two">
                            <div class="field">      
                              <!-- Crop and preview --> 
                              <div class="avatar-wrapper"></div>
                            </div>   

                            <div class="field" align="center">  
                              <div class="avatar-preview preview-lg"></div>
                            </div>      
                        </div>         
                  
                        <div class="fields-container one avatar-btns">
                            <div class="field">
                                <button type="button"  data-method="rotate" data-option="-90" title="Rotate -90 degrees">Rotate Left</button>
                                <button type="button"  data-method="rotate" data-option="-15">-15deg</button>
                                <button type="button"  data-method="rotate" data-option="-30">-30deg</button>
                                <button type="button"  data-method="rotate" data-option="-45">-45deg</button>
                                <button type="button"  data-method="rotate" data-option="90" title="Rotate 90 degrees">Rotate Right</button>
                                <button type="button"  data-method="rotate" data-option="15">15deg</button>
                                <button type="button"  data-method="rotate" data-option="30">30deg</button>
                                <button type="button"  data-method="rotate" data-option="45">45deg</button>
                            </div>
                        </div> 

                    </div> 
                  </div>
                  <div class="button-container one">
                      <div class="button save default avatar-save">Save</div>
                      <div class="button cancel">Cancel</div>
                  </div>
              </fieldset>
          </form>
      </div>


  <!-- Loading state -->
  <div class="loading_" aria-label="Loading" role="img" tabindex="-1"></div>

  </div>
</div>
      

    <style>
    #droneInfoOverview {
        display: flex;
        flex-direction: column;
        align-content: space-evenly;
        justify-content: space-between;
        width: 100%;
        background-color: #f3f3f3;
        padding: 4px 10px 4px 10px;
        margin-top: 5px;
        border-radius: 5px;
        color: #333;
        font-size: 15px;
    }
    @media (max-width: 1427px) {
        #droneInfoOverview {font-size: 12px;}
    }
    #droneInfoOverview label {
        display: inline-flex;
        font-weight: 500;
        color: #989898 !important;
        margin: 0;
        font-size: 1em;
    }

    .assetMainStatus0 {border: solid 6px #81AD00 !important; border-radius: 20px; width: 30px; height: 30px;}
    .assetMainStatus1 {border: solid 6px #C70000 !important; border-radius: 20px; width: 30px; height: 30px;}
    .assetMainStatus2 {border: solid 6px #FFAD0D !important; border-radius: 20px; width: 30px; height: 30px;}

    .inspectStatus.status1 {background-color: #ef5151 !important; cursor: default;}
    .inspectStatus.status2 {background-color: #ef9548 !important; cursor: default;}
    .inspectStatus.status3 {background-color: #ece34e !important; cursor: default;}
    .inspectStatus.status4 {background-color: #62e46a !important; cursor: default;}

    .replaceStatus1 { cursor: default; width: 0; height: 0; border-bottom: 26px solid #a13b3b; border-left: 26px solid transparent; position: absolute;}
    .replaceStatus2 { cursor: default; width: 0; height: 0; border-bottom: 26px solid #b17037; border-left: 26px solid transparent; position: absolute;}
    .replaceStatus3 { cursor: default; width: 0; height: 0; border-bottom: 26px solid #a8a339; border-left: 26px solid transparent; position: absolute;}
    .replaceStatus4 { cursor: default; width: 0; height: 0; border-bottom: 26px solid #419447; border-left: 26px solid transparent; position: absolute;}
    .inspectStatus.replaceStatus1 {background-color: #a13b3b; cursor: default;}
    .inspectStatus.replaceStatus2 {background-color: #b17037; cursor: default;}
    .inspectStatus.replaceStatus3 {background-color: #a8a339; cursor: default;}
    .inspectStatus.replaceStatus4 {background-color: #419447; cursor: default;}

    @media print {
        #droneInfoOverview  { display: none !important;}
    }

    #droneInspectionStatusPopup .pop-up label {font-weight: bold;font-size: 1.3em; color: #464646;}
    #droneInspectionStatusPopup .label_value {font-size: 1.5em; color: #222; line-height: 2em; padding: 5px 20px 5px 20px; background-color: #f3f3f3; border-radius: 5px;}
    #droneInspectionStatusPopup .date_block {font-size: 0.9em ; color: #9a9a9a;}

    .itemStatusHighlight { background-color: #ffe9be !important; }

</style>

<script>
    var _droneGUID=null;
    var _droneOverview2rowsMode=false;
    var _droneSummaryRendered=false;

    function hideDroneOverview () {$("#droneInfoOverview").hide();}

    function droneInfoOverview_set2RowsMode () {_droneOverview2rowsMode=true;}

    function droneInfoOverview_identifiersOnly () {$("#droneInfoOverview .row1").hide();}

    function droneInfoOverview_setDrone (id, status=null, serialNb=null, droneType=null, identificationNumber=null, maxFlightTime=null) {

        if (id==undefined || id=="") return;

        _droneGUID=id;

        if (status!=null && status!="") {
            $("#droneInfoOverview #status").html(readableState (status));
            $("#droneInfoOverview #droneStatus").val(status);
        } else $("#droneInfoOverview #status").html("-");
        if (serialNb!=null && serialNb!="") {
            $("#droneInfoOverview #serialNumber").html(serialNb);
        } else $("#droneInfoOverview #serialNumber").html("-");
        if (droneType!=null && droneType!="") {
            $("#droneInfoOverview #droneType").html(droneType);
        } else $("#droneInfoOverview #droneType").html("-");
        if (identificationNumber!=null && identificationNumber!="") {
            $("#droneInfoOverview #refNumber").html(identificationNumber);
        } else $("#droneInfoOverview #refNumber").html("-");
        if (maxFlightTime!=null && maxFlightTime!="" && maxFlightTime!=0) {
            $("#droneInfoOverview #maxFlightTime").html(convertSecondsToHoursMinsSec(maxFlightTime));
            $("#droneInfoOverview #maxFlightTimeLabel").show();
        } else $("#droneInfoOverview #maxFlightTimeLabel").hide();
        

        // Get current replacement and inspections status:
       getInspectionStatus (_droneGUID);

        $("#droneInfoOverview").show();
        if (_droneOverview2rowsMode) { 
            $("#droneInfoOverview").css("display","block"); $("#droneInfoOverview").css("width","96%");
            $("#droneInfoOverview .row1").css("width","100%"); $("#droneInfoOverview .row2").css("width","100%"); 
            $("#droneInfoOverview .row1").css("justify-content", "space-around");
        }
        $("#droneInfoOverview #contextDisclaimer").hide();
    }

    function droneInfoOverview_displayRecordedStatus (id, status=null, serialNb=null, droneType=null, identificationNumber=null, globalInspectionStatus=null, globalReplacementStatus=null, showContextText=false) {

        if (id==undefined || id=="") return;

        _droneGUID=id;

        if (status!=null && status!="") {
            $("#droneInfoOverview #status").html(readableState (status));
            $("#droneInfoOverview #droneStatus").val(status);
        } else $("#droneInfoOverview #status").html("-");
        if (serialNb!=null && serialNb!="") {
            $("#droneInfoOverview #serialNumber").html(serialNb);
        } else $("#droneInfoOverview #serialNumber").html("-");
        if (droneType!=null && droneType!="") {
            $("#droneInfoOverview #droneType").html(droneType);
        } else $("#droneInfoOverview #droneType").html("-");
        if (identificationNumber!=null && identificationNumber!="") {
            $("#droneInfoOverview #refNumber").html(identificationNumber);
        } else $("#droneInfoOverview #refNumber").html("-");

        if (globalInspectionStatus!=null &&globalInspectionStatus!="")
            setInspectionAndReplacementStatus (globalInspectionStatus, globalReplacementStatus);

        $("#droneInfoOverview").show();
        if (_droneOverview2rowsMode) { 
            $("#droneInfoOverview").css("display","block"); $("#droneInfoOverview").css("width","96%");
            $("#droneInfoOverview .row1").css("width","100%"); $("#droneInfoOverview .row2").css("width","100%"); 
            $("#droneInfoOverview .row1").css("justify-content", "space-around");
        }

        if (showContextText==true) {
            $("#droneInfoOverview #contextDisclaimer").show();
        } else $("#droneInfoOverview #contextDisclaimer").hide();
    }
    

	function readableState ($state) {
		if ($state==0) return "<span class='statusTag statusOn'>Airworthy</span>";
        if ($state==2) return "<span class='statusTag statusMid'>Maintenance</span>";
        if ($state==1) return "<span class='statusTag statusOff'>Retired</span>";
		return "-";
	}

    function getInspectionStatus (droneId) {

        $.ajax({
              url: "/inspection/inspectionEditAction.php",
              type: "POST",
              data: { 
                      "action": "ACTION_GETDRONE_GLOBALINSPECTIONSTATUS",
                      "currentDroneGUID": droneId
                    }
            }).done( function (data) {

                // trim data spaces:
                data=data.replace(/^\s+|\s+$/gm,'');

                $("#droneInfoOverview #inspectionStatus").html("");
                if (data=="") {$("#droneInfoOverview #inspectionStatusInfo").hide(); return;}

                var obj=null;
                try {
                    obj = jQuery.parseJSON(data);
                } catch (e) {
                    console.log("getInspectionStatus : error parsing data.", data);
                    $("#droneInfoOverview #inspectionStatusInfo").hide(); return;
                };

                globalInspectionStatus=obj[0].droneInspectionStatus;
                globalReplacementStatus=obj[1].droneReplacementStatus;

                setInspectionAndReplacementStatus(globalInspectionStatus, globalReplacementStatus);
            });
    }

    function setInspectionAndReplacementStatus (globalInspectionStatus, globalReplacementStatus){

        $("#droneInfoOverview .row1").show();

        inspectionStatus = '<div id="globalInspectionStatus" class="inspectStatus status'+globalInspectionStatus+'" onClick="showDroneInspectionSummaryPopup ()" style="margin-left: -5px; width: 28px; height: 28px; box-sizing: border-box; border: 1px solid #6f6f6f; border-radius: 5px; margin-right: 10px; cursor: pointer;">';
        if (globalReplacementStatus>0) inspectionStatus += '<div id="globalReplacementStatus" class="replaceStatus'+globalReplacementStatus+'" style="cursor: inherit;"></div>';
        inspectionStatus += '</div>';

        $("#droneInfoOverview #inspectionStatus").html(inspectionStatus);
        $("#droneInfoOverview #inspectionStatusInfo").css("display", "flex"); 

        $("#droneInfoOverview #droneInspectionStatus").val(globalInspectionStatus);
        $("#droneInfoOverview #droneReplacementStatus").val(globalReplacementStatus);
    }

    function intervalType2Text (intervalType) {
        if (intervalType=="FLYING_HOURS")  return "Flying Hours";
        if (intervalType=="FLIGHTS") return "Flights";
        if (intervalType=="DAYS") return "Days";
        if (intervalType=="USED") return "Used";
        return intervalType;
    }

    function showDroneInspectionSummaryPopup () {
        if (_droneSummaryRendered==false) {
            $.ajax({
              url: "/inspection/inspectionEditAction.php",
              type: "POST",
              data: { 
                      "action": "ACTION_GETDRONE_SUMMARYINSPECTIONSTATUS",
                      "currentDroneGUID": _droneGUID
                    }
            }).done( function (data) {

                //console.log ("showDroneInspectionSummaryPopup : ", data);

                var obj=null;
                try {
                    dataArr = jQuery.parseJSON(data);
                } catch (e) {
                    console.log("showDroneInspectionSummaryPopup : error parsing data.", data);
                    return;
                };

                droneInfoOverview_displayDetailedInfo (dataArr);
                $('#droneInspectionStatusPopup').show();
            });
        } else $('#droneInspectionStatusPopup').show();
    }

    function droneInfoOverview_displayDetailedInfo (data) {
        if (data==undefined || data=="") return;

        _droneSummaryRendered=true;
        
        $("#droneInspectionStatusPopup #fromDate").text(data.savedWhen);
        
        var block="";
        if (data.IS!=undefined) {

            $("#droneInspectionStatusPopup #inspectionInfoBlockTitle").show();

            if (data.IS.FLYING_HOURS!=undefined) {
                block+='<div style="text-align: center;"><label>'+intervalType2Text('FLYING_HOURS')+'</label><span class="label_value">'+data.IS.FLYING_HOURS.value+'</span>';
                if (data.IS.FLYING_HOURS.latestInspectionDate!="") block+='<br/><span class="date_block"><b>Last Inspection Date:</b><br/>' + data.IS.FLYING_HOURS.latestInspectionDate+"</span>";
                if (data.IS.FLYING_HOURS.latestInspectionDate=="" && data.IS.FLYING_HOURS.minFlightDate!="") block+='<br/><span class="date_block"><b>First Flight Date</b><br/>' + data.IS.FLYING_HOURS.minFlightDate+"</span>";
                block+='</div>';
            }
            if (data.IS.FLIGHTS!=undefined) {
                block+='<div style="text-align: center;"><label>'+intervalType2Text('FLIGHTS')+'</label><span class="label_value">'+data.IS.FLIGHTS.value+'</span>';
                if (data.IS.FLIGHTS.latestInspectionDate!="") block+='<br/><span class="date_block"><b>Last Inspection Date:</b><br/>' + data.IS.FLIGHTS.latestInspectionDate+"</span>";
                if (data.IS.FLIGHTS.latestInspectionDate=="" && data.IS.FLIGHTS.minFlightDate!="") block+='<br/><span class="date_block"><b>First Flight Date</b><br/>' + data.IS.FLIGHTS.minFlightDate+"</span>";
                block+='</div>';
            }
            if (data.IS.DAYS!=undefined) {
                block+='<div style="text-align: center;"><label>'+intervalType2Text('DAYS')+'</label><span class="label_value">'+data.IS.DAYS.value+'</span>';
                if (data.IS.DAYS.latestInspectionDate!="") block+='<br/><span class="date_block"><b>Last Inspection Date:</b><br/>' + data.IS.DAYS.latestInspectionDate+"</span>";
                if (data.IS.DAYS.latestInspectionDate=="" && data.IS.DAYS.minFlightDate!="") block+='<br/><span class="date_block"><b>First Flight Date</b><br/>' + data.IS.DAYS.minFlightDate+"</span>";
                block+='</div>';
            }

            $("#droneInspectionStatusPopup #inspectionInfoBlock").html(block);
        }

        if (data.RS!=undefined) {
            block="";
            $("#droneInspectionStatusPopup .replacementBlock").css("display", "block");
            if (data.RS.FLYING_HOURS!=undefined) {
                block+='<div style="text-align: center;"><label>'+intervalType2Text('FLYING_HOURS')+'</label><span class="label_value">'+data.RS.FLYING_HOURS.value+'</span>';
                if (data.RS.FLYING_HOURS.latestInspectionDate!="") block+='<br/><span class="date_block"><b>Last Inspection Date:</b><br/>' + data.RS.FLYING_HOURS.latestInspectionDate+"</span>";
                if (data.RS.FLYING_HOURS.latestInspectionDate=="" && data.RS.FLYING_HOURS.minFlightDate!="") block+='<br/><span class="date_block"><b>First Flight Date</b><br/>' + data.RS.FLYING_HOURS.minFlightDate+"</span>";
                block+='</div>';
            }
            if (data.RS.FLIGHTS!=undefined) {
                block+='<div style="text-align: center;"><label>'+intervalType2Text('FLIGHTS')+'</label><span class="label_value">'+data.RS.FLIGHTS.value+'</span>';
                if (data.RS.FLIGHTS.latestInspectionDate!="") block+='<br/><span class="date_block"><b>Last Inspection Date:</b><br/>' + data.RS.FLIGHTS.latestInspectionDate+"</span>";
                if (data.RS.FLIGHTS.latestInspectionDate=="" && data.RS.FLIGHTS.minFlightDate!="") block+='<br/><span class="date_block"><b>First Flight Date</b><br/>' + data.RS.FLIGHTS.minFlightDate+"</span>";
                block+='</div>';
            }
            if (data.RS.DAYS!=undefined) {
                block+='<div style="text-align: center;"><label>'+intervalType2Text('DAYS')+'</label><span class="label_value">'+data.RS.DAYS.value+'</span>';
                if (data.RS.DAYS.latestInspectionDate!="") block+='<br/><span class="date_block"><b>Last Inspection Date:</b><br/>' + data.RS.DAYS.latestInspectionDate+"</span>";
                if (data.RS.DAYS.latestInspectionDate=="" && data.RS.DAYS.minFlightDate!="") block+='<br/><span class="date_block"><b>First Flight Date</b><br/>' + data.RS.DAYS.minFlightDate+"</span>";
                block+='</div>';
            }
            $("#droneInspectionStatusPopup #replacementInfoBlock").html(block);
        }
        
    }

    function getDroneUnifiedStatus (droneId, container, droneStatus, highlightParentRow=false) {

        
        $.ajax({
            url: "/inspection/inspectionEditAction.php",
            type: "POST",
            data: { 
                    "action": "ACTION_GETDRONE_UNIFIED_STATUS",
                    "currentDroneGUID": droneId
                  }
            }).done( function (data) {
                //console.log ("getDroneUnifiedStatus : ", data);

                var obj=null;
                try {
                    dataArr = jQuery.parseJSON(data);
                } catch (e) {
                    console.log("getDroneUnifiedStatus : error parsing data.", data);
                    return;
                };

                if (dataArr.droneStatus!=-1 && (droneStatus==undefined || droneStatus==null || droneStatus=="")) droneStatus=dataArr.droneStatus;

                widget  = '<div id="unifiedStatus_'+droneId+'" class="inspectStatus status'+dataArr.inspectionStatus+' assetMainStatus'+droneStatus+'" style="margin-right: 10px;">';
                widget += '<div style="cursor: none; border-radius: 15px;" class="replaceStatus'+dataArr.replacementStatus+'"></div>';
                widget += '</div>';

                if (highlightParentRow && (droneStatus!=0 || dataArr.inspectionStatus==1 || dataArr.replacementStatus==1)) {
                    var $div = $(container).closest('.item').addClass('itemStatusHighlight');
                }

                $(container).html(widget);
            });
    }
    
</script>


<div id="droneInfoOverview" style="display:none;">
    <input type="hidden" id="droneInspectionStatus" name="droneInspectionStatus" value=""/>
    <input type="hidden" id="droneReplacementStatus" name="droneReplacementStatus" value=""/>
    <input type="hidden" id="droneStatus" name="droneStatus" value=""/>
    
    <div class="row1" style="display: flex; align-content: space-evenly; justify-content: space-between; /*width: 25%;*/">
        <div id="inspectionStatusInfo" style="display:none"><span id="inspectionStatus"></span><label>Inspections</label></div>
        <div id="status" style="position: relative; margin-left: 15px; font-weight: bold;"></div>
    </div>
    <div class="row2" style="display: flex; flex-wrap: wrap; align-content: space-evenly; justify-content: space-around; /*width: 70%;*/">
        <div><label>Serial #:</label>&nbsp;<span id="serialNumber"></span></div>
        <div><label>Ref #:</label>&nbsp;<span id="refNumber"></span></div>
        <div><label>Type:</label>&nbsp;<span id="droneType"></span></div>
        <div id="maxFlightTimeLabel"><label>Max Flight Time:</label>&nbsp;<span id="maxFlightTime"></span></div>
    </div>
    <div id="contextDisclaimer" align="center" style="display: none; color: #989898; font-weight: normal;"><i>(Status as recorded during mission creation or approval)</i></div>
</div>


<div id="droneInspectionStatusPopup" class="pop-up add">
    <div class="dimmer"></div>
    <div class="content-container" style="top: 150px; width: 800px; border-radius: 5px; left: calc(50% - 400px); padding-bottom: 40px;">
        <div class="close" onClick="$('#droneInspectionStatusPopup').hide()"></div>

            <fieldset class="fields one" style="width: 95%; line-height: 1.2em;">

                <div class="add-fields">

                    <div class="title" style="margin-top: 13px; font-size: 22px; line-height: 22px;">Drone Inspection & Replacement Status</div>
                    <div style="text-align: center;"><b>Snapshot done:</b>: <span id="fromDate"></span></div>

                    <!-- ********* Inspection Info  -->
                    <div class="fields-container one" style="margin-bottom: 10px; display:block;">
                        <h2 id="inspectionInfoBlockTitle" style="display:none; text-align:center;">Inspection Status</h2>
                        <div id="inspectionInfoBlock" style="display: flex; justify-content: space-around; width: 100%;"></div>
                    </div>  

                    <!-- ********* Replacement Info  -->
                    <div class="fields-container one replacementBlock" style="display:none;">
                        <h2 style="text-align:center;">Replacement Status</h2>
                        <div id="replacementInfoBlock" style="display: flex; justify-content: space-around; width: 100%;"></div>
                    </div>  
                </div> 
            </fieldset>
    </div>
</div>    
	<form id="droneForm" class="sharedItemForm" method="post" action="droneList.php">
    <input type="hidden" name="action" id="action" value=""/>
    <input type="hidden" name="currentGUID" id="currentGUID" value=""/>
    <input type="hidden" name="currentPLSharedValue" id="currentPLSharedValue" value=""/>
    <input type="hidden" name="currentPLSharedRestrictions" id="currentPLSharedRestrictions" value=""/>
    <input type="hidden" name="currentPagination" id="currentPagination" value="1"/> 

    <div class="main-content">
        <div class="header">
            <div class="header-content">
                <div class="title-container">
                    <div class="section-title">Drones</div>
                    <div class="section-sub">41 Total</div>
                </div>

                <div class="stats-container">
                    <div class="stat">
                        <p>Airworthy</p>
                        <strong>35</strong>
                    </div>
                    <div class="stat">
                        <p>Maintenance</p>
                        <strong>0</strong>
                    </div>
                    <div class="stat">
                        <p>Retired</p>
                        <strong>6</strong>
                    </div>
                </div>	
                
                <div class="button-container">
                                        <div onClick="location='/migrationTools/massimport-drone.php'" class="add-button">Drone Mass-Import</div>    
                    <div onClick="droneEditionAction ('', 'ACTION_ADD_ITEM')" class="add-button">Add Drone</div>
                                        <a class="help-button enable" href="https://dronelogbook.freshdesk.com/support/solutions/folders/151000263484" target="_blank">?</a>                </div>
                
            </div>
        </div>

        <div class="content">
            <!-- CONTENT HEADER + FILTER -->
            <div class="list-header">
                <div class="left-content">
                    <div class="list-category">All Drones</div>
                    <div class="page-count"><a onclick="onchangePage('PREV',1,2, 'droneForm')" style="font-size:1.5em; cursor:pointer;"><span class="before arrow"></span></a><select id="paginationSelect1" onchange="onchangePageDirect($('#paginationSelect1').val(), 'droneForm')" style="display:inline-block; width: auto; padding-right: 7px !important; padding-left:5px;font-size: 1em;line-height: 0.8em; height: 35px; background-color: #545454;color: white;border-color: #545353;"><option value="1" selected>1</option><option value="2" >2</option></select> of 2&nbsp;&nbsp;<a onclick="onchangePage('NEXT',1,2, 'droneForm')" style="font-size:1.5em; cursor:pointer;"><span class="after arrow"></span></a></div>                </div>
                <div class="right-content">
                    <div class="filter "></div>

                    <div><button class="square-button" style="margin-right: 15px; margin-bottom: 30px;">Search</button></div>

                    <div class="filter-options">
                        <div id="filter">
                            <div class="close-filter"></div>
                            <div class="filter-container">
                                <div class="container">
                                    <div class="filter-title">View</div>
                                        <select id="itemStatus" name="itemStatus">
                                        <option value='' selected>Current (Airworthy + Maintenance)</option><option value='1' >Retired</option><option value='2' >In Maintenance</option>                                        </select>
                                </div>
                                                            </div>
                            <a onclick="$('#currentPagination').val(1);$('#droneForm').submit();" class="filter-submit">Filter</a>
                        </div>
                    </div>

                    <div id="search">
                        <input class="search-bar" placeholder="Search" value="" id="fullTextSearch" name="fullTextSearch" onKeyPress="$('#currentPagination').val(1);submitOnEnterKey(event, 'droneForm', '')" >
                        <div class="search-icon"></div>
                        <div style="display: flex; justify-content: space-around;">
                            <div><input type="radio" id="searchType" name="searchType" value="NAME" checked >Name</div>
                            <div><input type="radio" id="searchType" name="searchType" value="ASSET"  >Asset</div>
                            <div><input type="radio" id="searchType" name="searchType" value="OTHER"  >Other</div>
                        </div>
                    </div>

                    <div>
                        <select id="ownerFilter" name="ownerFilter" style="height: 35px; background-color: #f2f2f2; border: none; color: #555;">
                            <option value="">All</option>
                            <option value="52273" >Flight Dev</option><option value="148189" >Manufacturing</option>                        </select>
                        <div>Owner</div>
                    </div>

                </div>
            </div>

            <!-- LIST -->
            <div class="list-container">

                <div class="list-fields">
                    
                    <div class="full-item item-header"><div class="item one"><div class="field"><div class="field-title">Name</div></div><div class="divider"></div><div class="field"><div class="field-title">Flights #<br/><span style="font-size: 14px;">Flying Time</span></div></div><div class="divider"></div><div class="field"><div class="field-title">Legal ID</div></div><div class="divider"></div><div class="field"><div class="field-title">Status</div></div><div class="divider"></div><div class="button-container-header"></div></div></div><div class="full-item">		<div class="secondary iconTags">		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=295B980B-173E-6B4A-39BF-0DCBAB529FB6"><b>AA-TRT-0019</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">339 Flight(s)			</div>			<div class="secondary"><span class="infoList1">21:38:03</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0019</div>		<div class="secondary"><b>S#</b>: AA-TRT-0019</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_295B980B-173E-6B4A-39BF-0DCBAB529FB6"></span></div>		    <script> getDroneUnifiedStatus ("295B980B-173E-6B4A-39BF-0DCBAB529FB6", $("#unifiedStatus_295B980B-173E-6B4A-39BF-0DCBAB529FB6"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','295B980B-173E-6B4A-39BF-0DCBAB529FB6')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('295B980B-173E-6B4A-39BF-0DCBAB529FB6', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('295B980B-173E-6B4A-39BF-0DCBAB529FB6', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="unshareData('drone', '295B980B-173E-6B4A-39BF-0DCBAB529FB6', '52273', unshareCallBackFct)" >Un-share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', '295B980B-173E-6B4A-39BF-0DCBAB529FB6')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('295B980B-173E-6B4A-39BF-0DCBAB529FB6', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('295B980B-173E-6B4A-39BF-0DCBAB529FB6', 'droneImg295B980B-173E-6B4A-39BF-0DCBAB529FB6', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImg295B980B-173E-6B4A-39BF-0DCBAB529FB6" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary">AA-TRT-0019</div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags"><a href="#" class="action-list-item" onClick="shareData('drone', '4C05BF47-327F-4A29-F740-30A3A88877CD', '52273', '6571', shareCallBackFct)" ><span class="infoTag orange">NOT-SHARED</span></a>		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=4C05BF47-327F-4A29-F740-30A3A88877CD"><b>AA-TRT-0021</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">7 Flight(s)			</div>			<div class="secondary"><span class="infoList1">00:32:40</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-T0021</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_4C05BF47-327F-4A29-F740-30A3A88877CD"></span></div>		    <script> getDroneUnifiedStatus ("4C05BF47-327F-4A29-F740-30A3A88877CD", $("#unifiedStatus_4C05BF47-327F-4A29-F740-30A3A88877CD"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','4C05BF47-327F-4A29-F740-30A3A88877CD')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('4C05BF47-327F-4A29-F740-30A3A88877CD', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('4C05BF47-327F-4A29-F740-30A3A88877CD', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="shareData('drone', '4C05BF47-327F-4A29-F740-30A3A88877CD', '52273', '6571', shareCallBackFct)" >Share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', '4C05BF47-327F-4A29-F740-30A3A88877CD')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('4C05BF47-327F-4A29-F740-30A3A88877CD', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('4C05BF47-327F-4A29-F740-30A3A88877CD', 'droneImg4C05BF47-327F-4A29-F740-30A3A88877CD', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImg4C05BF47-327F-4A29-F740-30A3A88877CD" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags"><a href="#" class="action-list-item" onClick="shareData('drone', 'F546DC25-DD7A-584E-5B5A-111EBD13B294', '52273', '6571', shareCallBackFct)" ><span class="infoTag orange">NOT-SHARED</span></a>		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=F546DC25-DD7A-584E-5B5A-111EBD13B294"><b>AA-TRT-0026</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">84 Flight(s)			</div>			<div class="secondary"><span class="infoList1">06:11:37</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0026</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_F546DC25-DD7A-584E-5B5A-111EBD13B294"></span></div>		    <script> getDroneUnifiedStatus ("F546DC25-DD7A-584E-5B5A-111EBD13B294", $("#unifiedStatus_F546DC25-DD7A-584E-5B5A-111EBD13B294"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','F546DC25-DD7A-584E-5B5A-111EBD13B294')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('F546DC25-DD7A-584E-5B5A-111EBD13B294', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('F546DC25-DD7A-584E-5B5A-111EBD13B294', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="shareData('drone', 'F546DC25-DD7A-584E-5B5A-111EBD13B294', '52273', '6571', shareCallBackFct)" >Share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', 'F546DC25-DD7A-584E-5B5A-111EBD13B294')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('F546DC25-DD7A-584E-5B5A-111EBD13B294', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('F546DC25-DD7A-584E-5B5A-111EBD13B294', 'droneImgF546DC25-DD7A-584E-5B5A-111EBD13B294', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImgF546DC25-DD7A-584E-5B5A-111EBD13B294" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags"><a href="#" class="action-list-item" onClick="shareData('drone', 'C7D66890-EB76-D304-635C-1A5F424A4F2E', '52273', '6571', shareCallBackFct)" ><span class="infoTag orange">NOT-SHARED</span></a>		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=C7D66890-EB76-D304-635C-1A5F424A4F2E"><b>AA-TRT-0028</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">175 Flight(s)			</div>			<div class="secondary"><span class="infoList1">11:38:03</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0028</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_C7D66890-EB76-D304-635C-1A5F424A4F2E"></span></div>		    <script> getDroneUnifiedStatus ("C7D66890-EB76-D304-635C-1A5F424A4F2E", $("#unifiedStatus_C7D66890-EB76-D304-635C-1A5F424A4F2E"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','C7D66890-EB76-D304-635C-1A5F424A4F2E')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('C7D66890-EB76-D304-635C-1A5F424A4F2E', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('C7D66890-EB76-D304-635C-1A5F424A4F2E', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="shareData('drone', 'C7D66890-EB76-D304-635C-1A5F424A4F2E', '52273', '6571', shareCallBackFct)" >Share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', 'C7D66890-EB76-D304-635C-1A5F424A4F2E')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('C7D66890-EB76-D304-635C-1A5F424A4F2E', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('C7D66890-EB76-D304-635C-1A5F424A4F2E', 'droneImgC7D66890-EB76-D304-635C-1A5F424A4F2E', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImgC7D66890-EB76-D304-635C-1A5F424A4F2E" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags"><a href="#" class="action-list-item" onClick="shareData('drone', '95B24293-5785-5F14-4C3E-DCD0F97089C7', '52273', '6571', shareCallBackFct)" ><span class="infoTag orange">NOT-SHARED</span></a>		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=95B24293-5785-5F14-4C3E-DCD0F97089C7"><b>AA-TRT-0031</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">16 Flight(s)			</div>			<div class="secondary"><span class="infoList1">01:02:40</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0031</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_95B24293-5785-5F14-4C3E-DCD0F97089C7"></span></div>		    <script> getDroneUnifiedStatus ("95B24293-5785-5F14-4C3E-DCD0F97089C7", $("#unifiedStatus_95B24293-5785-5F14-4C3E-DCD0F97089C7"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','95B24293-5785-5F14-4C3E-DCD0F97089C7')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('95B24293-5785-5F14-4C3E-DCD0F97089C7', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('95B24293-5785-5F14-4C3E-DCD0F97089C7', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="shareData('drone', '95B24293-5785-5F14-4C3E-DCD0F97089C7', '52273', '6571', shareCallBackFct)" >Share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', '95B24293-5785-5F14-4C3E-DCD0F97089C7')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('95B24293-5785-5F14-4C3E-DCD0F97089C7', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('95B24293-5785-5F14-4C3E-DCD0F97089C7', 'droneImg95B24293-5785-5F14-4C3E-DCD0F97089C7', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImg95B24293-5785-5F14-4C3E-DCD0F97089C7" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags">		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=91E6890B-EF50-631C-4D9C-9A43135E1EF8"><b>AA-TRT-0032</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">62 Flight(s)			</div>			<div class="secondary"><span class="infoList1">04:15:35</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0032</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_91E6890B-EF50-631C-4D9C-9A43135E1EF8"></span></div>		    <script> getDroneUnifiedStatus ("91E6890B-EF50-631C-4D9C-9A43135E1EF8", $("#unifiedStatus_91E6890B-EF50-631C-4D9C-9A43135E1EF8"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','91E6890B-EF50-631C-4D9C-9A43135E1EF8')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('91E6890B-EF50-631C-4D9C-9A43135E1EF8', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('91E6890B-EF50-631C-4D9C-9A43135E1EF8', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="unshareData('drone', '91E6890B-EF50-631C-4D9C-9A43135E1EF8', '52273', unshareCallBackFct)" >Un-share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', '91E6890B-EF50-631C-4D9C-9A43135E1EF8')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('91E6890B-EF50-631C-4D9C-9A43135E1EF8', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('91E6890B-EF50-631C-4D9C-9A43135E1EF8', 'droneImg91E6890B-EF50-631C-4D9C-9A43135E1EF8', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImg91E6890B-EF50-631C-4D9C-9A43135E1EF8" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags">		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=C8FCEC00-6A52-7049-49DC-EE533EA610D0"><b>AA-TRT-0033</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">55 Flight(s)			</div>			<div class="secondary"><span class="infoList1">04:54:21</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0033</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_C8FCEC00-6A52-7049-49DC-EE533EA610D0"></span></div>		    <script> getDroneUnifiedStatus ("C8FCEC00-6A52-7049-49DC-EE533EA610D0", $("#unifiedStatus_C8FCEC00-6A52-7049-49DC-EE533EA610D0"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','C8FCEC00-6A52-7049-49DC-EE533EA610D0')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('C8FCEC00-6A52-7049-49DC-EE533EA610D0', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('C8FCEC00-6A52-7049-49DC-EE533EA610D0', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="unshareData('drone', 'C8FCEC00-6A52-7049-49DC-EE533EA610D0', '52273', unshareCallBackFct)" >Un-share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', 'C8FCEC00-6A52-7049-49DC-EE533EA610D0')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('C8FCEC00-6A52-7049-49DC-EE533EA610D0', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('C8FCEC00-6A52-7049-49DC-EE533EA610D0', 'droneImgC8FCEC00-6A52-7049-49DC-EE533EA610D0', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImgC8FCEC00-6A52-7049-49DC-EE533EA610D0" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags">		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=16961C00-E95D-6B2B-8D7E-EDBDCF39D9A5"><b>AA-TRT-0034</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">105 Flight(s)			</div>			<div class="secondary"><span class="infoList1">07:26:46</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0034</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_16961C00-E95D-6B2B-8D7E-EDBDCF39D9A5"></span></div>		    <script> getDroneUnifiedStatus ("16961C00-E95D-6B2B-8D7E-EDBDCF39D9A5", $("#unifiedStatus_16961C00-E95D-6B2B-8D7E-EDBDCF39D9A5"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','16961C00-E95D-6B2B-8D7E-EDBDCF39D9A5')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('16961C00-E95D-6B2B-8D7E-EDBDCF39D9A5', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('16961C00-E95D-6B2B-8D7E-EDBDCF39D9A5', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="unshareData('drone', '16961C00-E95D-6B2B-8D7E-EDBDCF39D9A5', '52273', unshareCallBackFct)" >Un-share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', '16961C00-E95D-6B2B-8D7E-EDBDCF39D9A5')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('16961C00-E95D-6B2B-8D7E-EDBDCF39D9A5', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('16961C00-E95D-6B2B-8D7E-EDBDCF39D9A5', 'droneImg16961C00-E95D-6B2B-8D7E-EDBDCF39D9A5', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImg16961C00-E95D-6B2B-8D7E-EDBDCF39D9A5" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags">		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=763B814C-6631-0EDB-D1E9-F643030BA3FD"><b>AA-TRT-0035</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">121 Flight(s)			</div>			<div class="secondary"><span class="infoList1">11:32:39</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0035</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_763B814C-6631-0EDB-D1E9-F643030BA3FD"></span></div>		    <script> getDroneUnifiedStatus ("763B814C-6631-0EDB-D1E9-F643030BA3FD", $("#unifiedStatus_763B814C-6631-0EDB-D1E9-F643030BA3FD"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','763B814C-6631-0EDB-D1E9-F643030BA3FD')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('763B814C-6631-0EDB-D1E9-F643030BA3FD', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('763B814C-6631-0EDB-D1E9-F643030BA3FD', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="unshareData('drone', '763B814C-6631-0EDB-D1E9-F643030BA3FD', '52273', unshareCallBackFct)" >Un-share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', '763B814C-6631-0EDB-D1E9-F643030BA3FD')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('763B814C-6631-0EDB-D1E9-F643030BA3FD', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('763B814C-6631-0EDB-D1E9-F643030BA3FD', 'droneImg763B814C-6631-0EDB-D1E9-F643030BA3FD', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImg763B814C-6631-0EDB-D1E9-F643030BA3FD" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags">		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=F6AAA840-61CF-8906-5E5B-58F0A6AF3BC3"><b>AA-TRT-0036</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">12 Flight(s)			</div>			<div class="secondary"><span class="infoList1">01:05:36</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0036</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_F6AAA840-61CF-8906-5E5B-58F0A6AF3BC3"></span></div>		    <script> getDroneUnifiedStatus ("F6AAA840-61CF-8906-5E5B-58F0A6AF3BC3", $("#unifiedStatus_F6AAA840-61CF-8906-5E5B-58F0A6AF3BC3"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','F6AAA840-61CF-8906-5E5B-58F0A6AF3BC3')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('F6AAA840-61CF-8906-5E5B-58F0A6AF3BC3', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('F6AAA840-61CF-8906-5E5B-58F0A6AF3BC3', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="unshareData('drone', 'F6AAA840-61CF-8906-5E5B-58F0A6AF3BC3', '52273', unshareCallBackFct)" >Un-share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', 'F6AAA840-61CF-8906-5E5B-58F0A6AF3BC3')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('F6AAA840-61CF-8906-5E5B-58F0A6AF3BC3', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('F6AAA840-61CF-8906-5E5B-58F0A6AF3BC3', 'droneImgF6AAA840-61CF-8906-5E5B-58F0A6AF3BC3', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImgF6AAA840-61CF-8906-5E5B-58F0A6AF3BC3" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags">		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=E708338E-9492-012E-7F7C-AD127CC7EA12"><b>AA-TRT-0037</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">1 Flight(s)			</div>			<div class="secondary"><span class="infoList1">00:04:35</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title"></div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_E708338E-9492-012E-7F7C-AD127CC7EA12"></span></div>		    <script> getDroneUnifiedStatus ("E708338E-9492-012E-7F7C-AD127CC7EA12", $("#unifiedStatus_E708338E-9492-012E-7F7C-AD127CC7EA12"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','E708338E-9492-012E-7F7C-AD127CC7EA12')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('E708338E-9492-012E-7F7C-AD127CC7EA12', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('E708338E-9492-012E-7F7C-AD127CC7EA12', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="unshareData('drone', 'E708338E-9492-012E-7F7C-AD127CC7EA12', '52273', unshareCallBackFct)" >Un-share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', 'E708338E-9492-012E-7F7C-AD127CC7EA12')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('E708338E-9492-012E-7F7C-AD127CC7EA12', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('E708338E-9492-012E-7F7C-AD127CC7EA12', 'droneImgE708338E-9492-012E-7F7C-AD127CC7EA12', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImgE708338E-9492-012E-7F7C-AD127CC7EA12" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags">		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=A79852BB-819B-E17F-E779-DD76C4478819"><b>AA-TRT-0038</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">106 Flight(s)			</div>			<div class="secondary"><span class="infoList1">07:06:51</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0038</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_A79852BB-819B-E17F-E779-DD76C4478819"></span></div>		    <script> getDroneUnifiedStatus ("A79852BB-819B-E17F-E779-DD76C4478819", $("#unifiedStatus_A79852BB-819B-E17F-E779-DD76C4478819"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','A79852BB-819B-E17F-E779-DD76C4478819')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('A79852BB-819B-E17F-E779-DD76C4478819', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('A79852BB-819B-E17F-E779-DD76C4478819', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="unshareData('drone', 'A79852BB-819B-E17F-E779-DD76C4478819', '52273', unshareCallBackFct)" >Un-share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', 'A79852BB-819B-E17F-E779-DD76C4478819')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('A79852BB-819B-E17F-E779-DD76C4478819', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('A79852BB-819B-E17F-E779-DD76C4478819', 'droneImgA79852BB-819B-E17F-E779-DD76C4478819', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImgA79852BB-819B-E17F-E779-DD76C4478819" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags">		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=D8F5797B-106B-178B-9517-A1519CBCCCC9"><b>AA-TRT-0039</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">85 Flight(s)			</div>			<div class="secondary"><span class="infoList1">06:59:33</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0039</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_D8F5797B-106B-178B-9517-A1519CBCCCC9"></span></div>		    <script> getDroneUnifiedStatus ("D8F5797B-106B-178B-9517-A1519CBCCCC9", $("#unifiedStatus_D8F5797B-106B-178B-9517-A1519CBCCCC9"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','D8F5797B-106B-178B-9517-A1519CBCCCC9')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('D8F5797B-106B-178B-9517-A1519CBCCCC9', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('D8F5797B-106B-178B-9517-A1519CBCCCC9', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="unshareData('drone', 'D8F5797B-106B-178B-9517-A1519CBCCCC9', '52273', unshareCallBackFct)" >Un-share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', 'D8F5797B-106B-178B-9517-A1519CBCCCC9')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('D8F5797B-106B-178B-9517-A1519CBCCCC9', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('D8F5797B-106B-178B-9517-A1519CBCCCC9', 'droneImgD8F5797B-106B-178B-9517-A1519CBCCCC9', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImgD8F5797B-106B-178B-9517-A1519CBCCCC9" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags">		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=9398498D-E408-FB05-181B-75E885C14F90"><b>AA-TRT-0041</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">47 Flight(s)			</div>			<div class="secondary"><span class="infoList1">03:11:07</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-T0041</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_9398498D-E408-FB05-181B-75E885C14F90"></span></div>		    <script> getDroneUnifiedStatus ("9398498D-E408-FB05-181B-75E885C14F90", $("#unifiedStatus_9398498D-E408-FB05-181B-75E885C14F90"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','9398498D-E408-FB05-181B-75E885C14F90')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('9398498D-E408-FB05-181B-75E885C14F90', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('9398498D-E408-FB05-181B-75E885C14F90', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="unshareData('drone', '9398498D-E408-FB05-181B-75E885C14F90', '52273', unshareCallBackFct)" >Un-share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', '9398498D-E408-FB05-181B-75E885C14F90')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('9398498D-E408-FB05-181B-75E885C14F90', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('9398498D-E408-FB05-181B-75E885C14F90', 'droneImg9398498D-E408-FB05-181B-75E885C14F90', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImg9398498D-E408-FB05-181B-75E885C14F90" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary">AA-TRT-T0041</div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags">		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=8C0A037E-00AB-FF27-A8DD-29FA2E03701D"><b>AA-TRT-0044</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">15 Flight(s)			</div>			<div class="secondary"><span class="infoList1">00:59:10</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0044</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_8C0A037E-00AB-FF27-A8DD-29FA2E03701D"></span></div>		    <script> getDroneUnifiedStatus ("8C0A037E-00AB-FF27-A8DD-29FA2E03701D", $("#unifiedStatus_8C0A037E-00AB-FF27-A8DD-29FA2E03701D"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','8C0A037E-00AB-FF27-A8DD-29FA2E03701D')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('8C0A037E-00AB-FF27-A8DD-29FA2E03701D', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('8C0A037E-00AB-FF27-A8DD-29FA2E03701D', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="unshareData('drone', '8C0A037E-00AB-FF27-A8DD-29FA2E03701D', '52273', unshareCallBackFct)" >Un-share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', '8C0A037E-00AB-FF27-A8DD-29FA2E03701D')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('8C0A037E-00AB-FF27-A8DD-29FA2E03701D', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('8C0A037E-00AB-FF27-A8DD-29FA2E03701D', 'droneImg8C0A037E-00AB-FF27-A8DD-29FA2E03701D', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImg8C0A037E-00AB-FF27-A8DD-29FA2E03701D" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags">		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=4F3F16EF-8BF3-9640-D0A1-4F175D54AD84"><b>AA-TRT-0045</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">166 Flight(s)			</div>			<div class="secondary"><span class="infoList1">12:34:14</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0045</div>		<div class="secondary"><b>S#</b>: AA-TRT-0045</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_4F3F16EF-8BF3-9640-D0A1-4F175D54AD84"></span></div>		    <script> getDroneUnifiedStatus ("4F3F16EF-8BF3-9640-D0A1-4F175D54AD84", $("#unifiedStatus_4F3F16EF-8BF3-9640-D0A1-4F175D54AD84"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','4F3F16EF-8BF3-9640-D0A1-4F175D54AD84')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('4F3F16EF-8BF3-9640-D0A1-4F175D54AD84', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('4F3F16EF-8BF3-9640-D0A1-4F175D54AD84', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="unshareData('drone', '4F3F16EF-8BF3-9640-D0A1-4F175D54AD84', '52273', unshareCallBackFct)" >Un-share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', '4F3F16EF-8BF3-9640-D0A1-4F175D54AD84')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('4F3F16EF-8BF3-9640-D0A1-4F175D54AD84', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('4F3F16EF-8BF3-9640-D0A1-4F175D54AD84', 'droneImg4F3F16EF-8BF3-9640-D0A1-4F175D54AD84', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImg4F3F16EF-8BF3-9640-D0A1-4F175D54AD84" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary">AA-TRT-0045</div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags"><span class="infoTag black">SHARED</span>		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=247979B8-CEAC-5235-5BE6-20E4322D33C3"><b>AA-TRT-0046</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">148 Flight(s)			</div>			<div class="secondary"><span class="infoList1">10:56:32</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0046</div>		<div class="secondary"><b>S#</b>: AA-TRT-0046</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_247979B8-CEAC-5235-5BE6-20E4322D33C3"></span></div>		    <script> getDroneUnifiedStatus ("247979B8-CEAC-5235-5BE6-20E4322D33C3", $("#unifiedStatus_247979B8-CEAC-5235-5BE6-20E4322D33C3"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(148189)">Manufacturing</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','247979B8-CEAC-5235-5BE6-20E4322D33C3')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('247979B8-CEAC-5235-5BE6-20E4322D33C3', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('247979B8-CEAC-5235-5BE6-20E4322D33C3', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="unshareData('drone', '247979B8-CEAC-5235-5BE6-20E4322D33C3', '148189', unshareCallBackFct)" >Un-share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', '247979B8-CEAC-5235-5BE6-20E4322D33C3')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('247979B8-CEAC-5235-5BE6-20E4322D33C3', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('247979B8-CEAC-5235-5BE6-20E4322D33C3', 'droneImg247979B8-CEAC-5235-5BE6-20E4322D33C3', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImg247979B8-CEAC-5235-5BE6-20E4322D33C3" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary">AA-TRT-0046</div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags">		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=4673BEAC-CE30-1775-0532-A3B4D26F1C7B"><b>AA-TRT-0047</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">11 Flight(s)			</div>			<div class="secondary"><span class="infoList1">01:08:30</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0047</div>		<div class="secondary"><b>S#</b>: AA-TRT-0047</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_4673BEAC-CE30-1775-0532-A3B4D26F1C7B"></span></div>		    <script> getDroneUnifiedStatus ("4673BEAC-CE30-1775-0532-A3B4D26F1C7B", $("#unifiedStatus_4673BEAC-CE30-1775-0532-A3B4D26F1C7B"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','4673BEAC-CE30-1775-0532-A3B4D26F1C7B')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('4673BEAC-CE30-1775-0532-A3B4D26F1C7B', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('4673BEAC-CE30-1775-0532-A3B4D26F1C7B', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="unshareData('drone', '4673BEAC-CE30-1775-0532-A3B4D26F1C7B', '52273', unshareCallBackFct)" >Un-share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', '4673BEAC-CE30-1775-0532-A3B4D26F1C7B')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('4673BEAC-CE30-1775-0532-A3B4D26F1C7B', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('4673BEAC-CE30-1775-0532-A3B4D26F1C7B', 'droneImg4673BEAC-CE30-1775-0532-A3B4D26F1C7B', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImg4673BEAC-CE30-1775-0532-A3B4D26F1C7B" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags">		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=2F7A36DC-E45D-D3C4-AC16-0A2DCA80C0BA"><b>AA-TRT-0048</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">20 Flight(s)			</div>			<div class="secondary"><span class="infoList1">01:22:39</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0048</div>		<div class="secondary"><b>S#</b>: AA-TRT-0048</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_2F7A36DC-E45D-D3C4-AC16-0A2DCA80C0BA"></span></div>		    <script> getDroneUnifiedStatus ("2F7A36DC-E45D-D3C4-AC16-0A2DCA80C0BA", $("#unifiedStatus_2F7A36DC-E45D-D3C4-AC16-0A2DCA80C0BA"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','2F7A36DC-E45D-D3C4-AC16-0A2DCA80C0BA')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('2F7A36DC-E45D-D3C4-AC16-0A2DCA80C0BA', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('2F7A36DC-E45D-D3C4-AC16-0A2DCA80C0BA', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="unshareData('drone', '2F7A36DC-E45D-D3C4-AC16-0A2DCA80C0BA', '52273', unshareCallBackFct)" >Un-share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', '2F7A36DC-E45D-D3C4-AC16-0A2DCA80C0BA')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('2F7A36DC-E45D-D3C4-AC16-0A2DCA80C0BA', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('2F7A36DC-E45D-D3C4-AC16-0A2DCA80C0BA', 'droneImg2F7A36DC-E45D-D3C4-AC16-0A2DCA80C0BA', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImg2F7A36DC-E45D-D3C4-AC16-0A2DCA80C0BA" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary">AA-TRT-0048</div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div><div class="full-item">		<div class="secondary iconTags">		</div>	<div class="item" >		<div class="field">			<div class="field-title lighterCell">				<a href="/inventory/droneDetail.php?id=70D4EDFC-2DF9-67AD-2687-59B4A89DD96D"><b>AA-TRT-0049</b></a>			</div>			<div class="secondary"><b> / </b></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">23 Flight(s)			</div>			<div class="secondary"><span class="infoList1">01:19:15</span></div>		</div>		<div class="divider"></div>		<div class="field">			<div class="field-title">AA-TRT-0049</div>		</div>		<div class="divider"></div>		<div class="field" style="display: flex;">		    <div class=""><span id="unifiedStatus_70D4EDFC-2DF9-67AD-2687-59B4A89DD96D"></span></div>		    <script> getDroneUnifiedStatus ("70D4EDFC-2DF9-67AD-2687-59B4A89DD96D", $("#unifiedStatus_70D4EDFC-2DF9-67AD-2687-59B4A89DD96D"), 0, true); </script>			<div><div class="field-title">Airworthy</div>		    <div class="secondary"><b>Owner:</b> <a href="#" onClick="showPersonOverviewBox(52273)">Flight Dev</a></div></div>		</div>		<div class="button-container">			<div class="more-info">More Info</div>			<div class="button-actions">Actions				<div class="action-list">		          <a href="#" class="action-list-item" onClick="viewDetail ('DRONE','70D4EDFC-2DF9-67AD-2687-59B4A89DD96D')" >Details</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('70D4EDFC-2DF9-67AD-2687-59B4A89DD96D', 'ACTION_EDIT_ITEM')" >Edit</a>		  <a href="#" class="action-list-item" onClick="droneEditionAction ('70D4EDFC-2DF9-67AD-2687-59B4A89DD96D', 'ACTION_CLONE_ITEM')" >Clone</a>		  <a href="#" class="action-list-item" onClick="unshareData('drone', '70D4EDFC-2DF9-67AD-2687-59B4A89DD96D', '52273', unshareCallBackFct)" >Un-share</a>				  <a href="#" class="action-list-item" onClick="addDocument ( '', '70D4EDFC-2DF9-67AD-2687-59B4A89DD96D')">Add Doc</a>				</div>			</div>		<div class="edit" onClick="droneEditionAction ('70D4EDFC-2DF9-67AD-2687-59B4A89DD96D', 'ACTION_EDIT_ITEM')"></div>		</div>	</div>	<div class="extra-info ">		<div class="upper-container">		    <div class="field" style="line-height: 1;">              <div class="avatar-view" title="Change the thumbnail" style="display: inline-block;" onclick="showAvatarBox('70D4EDFC-2DF9-67AD-2687-59B4A89DD96D', 'droneImg70D4EDFC-2DF9-67AD-2687-59B4A89DD96D', 1, avatarUploadDone, 220, 220, 'Set Avatar Image')"><img id="droneImg70D4EDFC-2DF9-67AD-2687-59B4A89DD96D" src="/uploadAvatar/img/default.png" alt="" ></div>		     </div>		    <div class="field">		        <div class="field-title">Firmware / Hardware</div>		        <div class="secondary">FW:&nbsp;-		        / HW:&nbsp;-</div>		    </div>		    <div class="field">		        <div class="field-title">Serial #</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Remote ID</div>		        <div class="secondary"></div>		    </div>		    <div class="field">		        <div class="field-title">Purchase Date</div>		    <div class="secondary">-</div>		    </div>		</div>	</div></div>
                    <div class="smallButtonContainer" align="center">
						<div  class="buttonContainer" onclick="onchangePage('PREV',1,2, 'droneForm')"><</div>
						<div  class="buttonContainer" onclick="onchangePage('NEXT',1,2, 'droneForm')">></div>
					</div>
            </div></div>

            <div id="shareAllBlock" style="display:none; padding-left: 35px;">
					You have some drone not shared with your current organization. 
					<div class="square-button shareButton" style="display: inline-block; margin-left: 20px;" onClick="shareData('drone', 'ALL', '52273', '6571', shareCallBackFct)">Share all with your organization</div>
			</div>

        </div> <!-- End class="content" -->
            
    </div>
    </form>

    
<script>

	var _noTitle=false;

    $(document).ready(function() {

    });

	function showUserNotificationBox ( userId, recipientName="", noTitle=false) {

		if (userId==undefined || userId=="") return;

		$("#userNotificationPopup #userId").val(userId);
		$('#userNotificationPopup #status').html("");
		$("#userNotificationPopup #notifTitle").val("");
		$("#userNotificationPopup #notifBody").val("");

		_noTitle=noTitle;
		if (_noTitle==true) { 
			$("#userNotificationPopup #notifTitle").hide();
			$("#userNotificationPopup #notifTitleLabel").hide();
		}

		if (recipientName!="" && recipientName!=undefined) {
			$("#userNotificationPopup .sub-title").html("=> "+recipientName);
		}

		$('#userNotificationPopup').show();
	}

	function sendUserNotification () {
		
		notifTitle = $("#userNotificationPopup #notifTitle").val();
		notifBody = $("#userNotificationPopup #notifBody").val();
		if (notifBody=="") return;

		if (_noTitle==true) notifTitle="From Flight Dev" ;
		
		var datas = {"action": "SEND_USER_PUSHNOTIFICATION", "userId": $("#userNotificationPopup #userId").val() , "notifTitle": notifTitle , "notifBody": notifBody, "notifExtradata": ""};
    
		$.ajax({
			url: "/profile/personOverviewAction.php",
			type: "POST",
			data: datas,
			cache: false,
			dataType:"JSON"
		})
		.done(function ( data ) {
			console.log (data)
			if (data.device_count==0)
				$('#userNotificationPopup #status').html("<span style='color: #BA0100;'>No device registered.</span>");
			else
				$('#userNotificationPopup #status').html("<span style='color: #00a537;'>Notification sent successfully.</span>");
				
			setTimeout(function() {		
				$('#userNotificationPopup').hide();
			}, 3000);
			
		});

	}

</script>

<style>
#personOverviewPopup label {
	line-height: 1.3em;
	padding-top: 15px;
	border-bottom: 1px #e2e2e2 solid;
	color: #b5b5b5;
}
</style>

<div id="userNotificationPopup" class="pop-up">

    <div class="dimmer"></div>
    <div class="content-container" style="top: 150px; width: 600px; border-radius: 5px; left: calc(50% - 300px);">
        <div class="close" onClick="$('#userNotificationPopup').hide()"></div>
		<input type="hidden" name="userId" id="userId" value=""/>

            <fieldset class="fields one" style="width: 95%;">
                <div class="add-fields">
					<div class="title">Send Mobile Notification						<div class="sub-title" style="font-size:0.8em"></div>
					</div>
					<div>The notification message is sent to user mobile device(s), registered from our mobile app.</div>
                    <div class="fields-container one" style="margin-bottom: 10px;">
                        <div class="field" style="margin-right: 10px;">
							<label id="notifTitleLabel">Title</label>
							<input id="notifTitle" name="notifTitle" value="">

							<label>Message</label>
							<textarea id="notifBody" name="notifBody" style="height: 100px;"></textarea>
						</div>
                    </div>  

					<div class="fields-container one" style="margin-bottom: 10px;">
						<div class='square-button' onClick="sendUserNotification ()">Send Notification</div> 
						<div id="status" style="font-weight: bold;"></div>
					</div>

                </div>

            </fieldset>
    </div>
</div> 
<script>
    $(document).ready(function() {
		
    });

	function showPersonOverviewBox ( userId) {

		var datas = {"action": "GET_USER_INFO", "userId": userId };
    
		$.ajax({
			url: "/profile/personOverviewAction.php",
			type: "POST",
			data: datas,
			cache: false,
			dataType:"JSON"
		})
		.done(function ( data ) {
			$("#personName").html(data.fullName);
			$("#companyName").html(data.companyName);
			if (data.licenseNumber!="") { $("#licenseNumber").html(data.licenseNumber); $("#licenseNumber").show();}
			else $("#licenseNumber").hide();
			
			$("#personImg").attr("src", data.avatar);

						$("#detailLink").attr("href", "/profile/personDetail.php?id="+userId);
			
			if (data.login!="") $("#personEmail").html(data.login);
			if (data.phone!="") $("#personPhone").html(data.phone);
			if (data.roles!="") $("#personRoles").html(data.roles);
			if (data.externalUser==1) $("#externalUser").show(); else $("#externalUser").hide();

			$('#personOverviewPopup').show();
			$('#editPersonButton').off('click'); 
			$('#editPersonButton').on('click', function() { editItem ('PERSONNEL', userId) });

			isUserNotificationAvailable (userId);
		});

	}

	function getUserCurrencies (userId, nbDaysCurrency, callBack) {
		
		var datas = {"action": "GET_USER_CURRENCY", "userId": userId , "nbDaysCurrency": nbDaysCurrency};
    
		$.ajax({
			url: "/profile/personOverviewAction.php",
			type: "POST",
			data: datas,
			cache: false,
			dataType:"JSON"
		})
		.done(function ( data ) {
			if (callBack!=undefined) callBack(userId, data);
		});

	}
	function isUserNotificationAvailable (userId) {

		var datas = {"action": "GET_PUSHNOTIFICATION_DATA", "userId": userId };
    
		$.ajax({
			url: "/profile/personOverviewAction.php",
			type: "POST",
			data: datas,
			cache: false,
			dataType:"JSON"
		})
		.done(function ( data ) {
			if (data.device_count>0) { 
				$("#sendUserNotificationButton").attr("href", "javascript:$('#personOverviewPopup').hide();showUserNotificationBox ("+userId+",$('#personName').html(),true)");
				$("#sendUserNotificationButton").show();
			}
		});

	}

</script>

<style>
#personOverviewPopup label {
	line-height: 1.3em;
	padding-top: 15px;
	border-bottom: 1px #e2e2e2 solid;
	color: #b5b5b5;
}
</style>

<div id="personOverviewPopup" class="pop-up">
    <div class="dimmer"></div>
    <div class="content-container" style="top: 150px; width: 400px; border-radius: 5px; left: calc(50% - 200px);">
        <div class="close" onClick="$('#personOverviewPopup').hide()"></div>

            <fieldset class="fields one" style="width: 95%;">
                <div class="add-fields">
        
                    <div class="fields-container two" style="margin-bottom: 10px;">
                        <div class="field" align="center">
							<div class="avatar-view" title="Change the thumbnail" style="display: inline-block; width: 95px; height: 95px; cursor: default;">
								<img id="personImg" src="" alt="Avatar">
							</div>
							<div id="personName" style="font-weight: 600;"></div>
							<div id="companyName" style=""></div>
							<div id="licenseNumber"></div>
							<div id="externalUser"><span class="infoTag">EXTERNAL</span></div>
							<div style='margin-top: 20px; display: inline-table;'>
							<a id='editPersonButton' class='square-button'>Edit</a>								<a id="detailLink" class='square-button'>Detail</a> 
							</div>
							<div class="" style='margin-top: 20px; display:flex; justify-content: center;'>
								<a id="sendUserNotificationButton" class='square-button mobile-notification' style="display: none;">&nbsp;</a>
							</div>
                        </div>

                        <div class="field" style="width: 200px;">
							
							<label>Email</label>
							<div id="personEmail" style="overflow: auto; height: 40px; line-height: 18px;">-</div>

							<label>Phone</label>
							<div id="personPhone">-</div>

							<label>Roles</label>
							<div id="personRoles">-</div>
						
						</div>
                    </div>  
                </div>

            </fieldset>
    </div>
</div> 	
<script>
    $(document).ready(function() {
        $("#addDronePopup .button.save").on('click', function () {

            // in maintenance:
                            actionsDrone ("ACTION_SAVE");
                        
        });
        $("#addDronePopup .button.delete").on('click', function () {
            popupConfirm('Confirmation',"When a drone is deleted, all associated data (flight, maintenance) is unlinked. If you wish to retain these data relationships, you should instead change the drone status to RETIRED.<br/>Are you sure to delete this drone?", function(){actionsDrone ("ACTION_DELETE");})
        });
        
        // QR Code:   
        $("#inventoryNumber").change(function() {
            drawInventoryQRCode ();
        });
           

        $("#purchaseDate").flatpickr (
                {
                    enableTime: false,
                    enableSeconds: false, 
                    time_24hr: false,
                    allowInput: true,
                    minuteIncrement: 1,
                    secondIncrement: 1
                }
            );

    });
     
    var callbackDrone = null;
    var refActionPath = "";
    var droneProfiles = [];

	function showEditDroneBox (callbackFct, addNew) {

        $('#addDronePopup').show();
        $('#addDronePopup fieldset.fields').hide(); 
                $('#addDronePopup.pop-up fieldset.one').show(); 
        
        if (addNew==true) {
            $("#addDronePopup #currentGUID").val("");
            $("#addDronePopup .button.delete").hide();
            $("#addDronePopup .button.save").text("Add");
            resetDroneFields();
            $("#addNew").val(1);
        } else {
            $("#addDronePopup .button.delete").show();
            $("#addDronePopup .button.save").text("Save");
        }
		
        initDroneEditTabs();

        callbackDrone = callbackFct;
	}
	
	function actionsDrone (action) {
	
        $("#droneActionForm #action").val(action);

        if (action=="ACTION_SAVE") {
            // Validation:
            if ($("#addDronePopup #name").val()=="") {
                popupAlert("Please enter a drone name.");
                return false;
            }

            
            // Model id is the database technical id => keep Model selection text:
            $("#addDronePopup #modelName").val($("#addDronePopup #model").text())

            
            
            // construct connectivityService string:
            connectivityService="";
            if ($("#simCardId1").val()!="" || $("#simCardId2").val()!="") {
                connectivityService="[";
                if ($("#simCardId1").val()!="")
                    connectivityService+='{"sim_card":"'+$("#simCardId1").val()+'", "sim_type":"'+$("#simType1").val()+'"}';
                if ($("#simCardId2").val()!="") { 
                    if ($("#simCardId1").val()!="") connectivityService+=",";
                    connectivityService+='{"sim_card":"'+$("#simCardId2").val()+'", "sim_type":"'+$("#simType2").val()+'"}';
                }
                connectivityService+="]";
            }
            $("#addDronePopup #connectivityService").val(connectivityService);
        }

	    var fd = new FormData(document.getElementById("droneActionForm"));

	    $.ajax({
	      url: "/inventory/droneEditAction.php",
	      type: "POST",
	      data: fd,
	      enctype: 'multipart/form-data',
	      processData: false,  // tell jQuery not to process the data
	      contentType: false   // tell jQuery not to set contentType

	    }).done(function( data ) {
			$('#addDronePopup').hide();
            callbackDrone (data);
	    });
	    return false;
	}

    function resetDroneFields() {
        $("#addDronePopup #droneName").val("");
        $("#addDronePopup #notes").val("");
    }

    // QRCode preview:
    var qrcode = null;
      function drawInventoryQRCode () {
           if (qrcode==null) {
            if ($("#inventoryNumber").val()=="") {
                $("#inventoryQRCode").html("");
                return;
            }
            qrcode = new QRCode("inventoryQRCode", {
                    text: $("#inventoryNumber").val(),
                    width: 150,
                    height: 150,
                    colorDark : "#757575",
                    colorLight : "#f8f8f8",
                    correctLevel : QRCode.CorrectLevel.H
            });
           } else {
               if ($("#inventoryNumber").val()=="") {
                   $("#inventoryQRCode").html("");
                   qrcode=null;
                   return;
               }
               qrcode.clear();
               qrcode.makeCode($("#inventoryNumber").val());
           }
      }

    function getApprovedDroneList (pilotId, callback) {

        $.ajax({
              url: "/inventory/droneEditAction.php",
              type: "POST",
              data: { 
                      "action": "GET_APPROVED_DRONES",
                      "pilotId": pilotId
                    }
            }).done( function (data) {
                var obj = jQuery.parseJSON(data);
                if (callback!=undefined) callback(obj);
            });
    }

    function onDroneProfileSelected(){

        currentDroneProfileGUID=$("#droneProfile").val();

        if (currentDroneProfileGUID!=""){
            $("#addDronePopup #droneProfileGUID").val(currentDroneProfileGUID);

            // Fill drone params from the profile default ones:
            models_select[0].selectize.addItem(droneProfiles[currentDroneProfileGUID].model);
            brands_select[0].selectize.addItem(droneProfiles[currentDroneProfileGUID].brand);
            dronetypes_select[0].selectize.addItem(droneProfiles[currentDroneProfileGUID].dronetype);
            
            $("#addDronePopup #firmwareVersion").val (droneProfiles[currentDroneProfileGUID].firmwareVersion);
            $("#addDronePopup #hardwareVersion").val (droneProfiles[currentDroneProfileGUID].hardwareVersion);

            $("#addDronePopup #geometryGUID").val (droneProfiles[currentDroneProfileGUID].geometryGUID);
            geometryDroneOnChange ()
            
            $("#addDronePopup #insurableValue").val (droneProfiles[currentDroneProfileGUID].insurableValue);
            $("#addDronePopup #maxHorizontalSpeed").val (droneProfiles[currentDroneProfileGUID].maxHorizontalSpeed);
            $("#addDronePopup #maxVerticalSpeed").val (droneProfiles[currentDroneProfileGUID].maxVerticalSpeed);
            $("#addDronePopup #maxFlightTime").val (droneProfiles[currentDroneProfileGUID].maxFlightTime);

            nbSeconds=droneProfiles[currentDroneProfileGUID].maxFlightTime;
                hours=Math.floor(nbSeconds / 3600); console.log("hours",hours);
                nbSeconds=nbSeconds-hours*3600;
                minutes=Math.floor((nbSeconds / 60) % 60); console.log("minutes",minutes);
                nbSeconds=nbSeconds-minutes*60;console.log("nbSeconds",nbSeconds%60);
                $("#addDronePopup #maxFlightTime_H").attr("value",hours);
                $("#addDronePopup #maxFlightTime_M").attr("value",minutes);
                $("#addDronePopup #maxFlightTime_S").attr("value",nbSeconds % 60);

            
            $("#addDronePopup #payloadCapacity").val (droneProfiles[currentDroneProfileGUID].payloadCapacity);
            $("#addDronePopup #propulsionType").val (droneProfiles[currentDroneProfileGUID].propulsionType);
            $("#addDronePopup #safetyCategory").val (droneProfiles[currentDroneProfileGUID].safetyCategory);
            $("#addDronePopup #weight").val (droneProfiles[currentDroneProfileGUID].weight);
            $("#addDronePopup #color").val (droneProfiles[currentDroneProfileGUID].color);
            $("#addDronePopup #minBvlosDistance").val (droneProfiles[currentDroneProfileGUID].minBvlosDistance);
        }
    }

</script>       

<div id="addDronePopup" class="pop-up add">
    <div class="dimmer"></div>
    <div class="content-container" style="padding-top: 0px;">
        <div class="close"></div>
        <form  method="post" id="droneActionForm" name="droneActionForm">
            <input type="hidden" name="action" id="action" value=""/>
            <input type="hidden" name="currentGUID" id="currentGUID" value=""/>
            <input type="hidden" name="addNew" id="addNew" value=""/>
            <input type="hidden" name="cloneGUID" id="cloneGUID" value=""/>
            <input type="hidden" name="droneProfileGUID" id="droneProfileGUID" value=""/>
            <input type="hidden" name="connectivityService" id="connectivityService" value=""/>

            <div class="list-header simple-tabs">
                <div class="left-content">
                    <div class="nav-link active" data-target="drone_overview_block">Overview</div>
                    <div class="nav-link" data-target="drone_geometry_block">Geometry / Inventory</div>
                    <div class="nav-link" data-target="drone_extra_block">Extra Information</div>
                                        <div class="nav-link" data-target="drone_connectivity_block">Connect</div>
                                    </div>
            </div>

            
            <fieldset id="drone_overview_block" class="nav-block fields one">
                <div class="add-fields">
                    <div class="title">Drone Overview</div>
                    <div class="fields-container three">
                        <div class="field">
                            <label>Drone Name</label>
                            <input type="text" name="name" id="name" class="requiredField" placeholder="Drone name" value=""/>								
                        </div>
                        <div class="field">
                            <label>Status</label>
                            <select id="active" name="active">
                                <option value="0" selected>Airworthy</option>
                                <option value="2" >Maintenance</option>
                                <option value="1" >Retired</option>
                            </select>							
                        </div> 
                        <div class="field">
                            <label>Legal ID</label>
                            <input type="text" id="identificationNumber" name="identificationNumber" placeholder="identification" value=""/>	
                                                    </div>
                    </div>
                    <div class="fields-container three">
                        <div class="field">
                            <label>Brand</label>
                            <select id="brand" name="brand" onChange="filterModels()">
                            <option  value='3DRobotics'>3DRobotics</option><option  value='Acecore'>Acecore</option><option  value='Aerialtronics'>Aerialtronics</option><option  value='Aeromapper'>Aeromapper</option><option  value='Aeronavics'>Aeronavics</option><option  value='Aeryon'>Aeryon</option><option  value='AGEagle'>AGEagle</option><option  value='Airbus'>Airbus</option><option  value='Alphaswift'>Alphaswift</option><option  value='Alti UAS'>Alti UAS</option><option  value='Atmos'>Atmos</option><option  value='Aurelia Aerospace'>Aurelia Aerospace</option><option  value='Autel'>Autel</option><option  value='Avidrone'>Avidrone</option><option  value='Avy'>Avy</option><option  value='Beagle Systems'>Beagle Systems</option><option  value='BFD'>BFD</option><option  value='BirdsEyeView '>BirdsEyeView </option><option  value='Black Swift'>Black Swift</option><option  value='BlackSquare'>BlackSquare</option><option  value='Blade'>Blade</option><option  value='Brinc'>Brinc</option><option  value='BROUAV'>BROUAV</option><option  value='CamFlite'>CamFlite</option><option  value='Carbonix'>Carbonix</option><option  value='Censys'>Censys</option><option  value='Cerana'>Cerana</option><option  value='CHCNAV'>CHCNAV</option><option  value='Commaris'>Commaris</option><option  value='Custom'>Custom</option><option  value='Deerc'>Deerc</option><option  value='DeltaQuad'>DeltaQuad</option><option  value='DIY'>DIY</option><option  value='DJI'>DJI</option><option  value='Doosan'>Doosan</option><option  value='Draganfly'>Draganfly</option><option  value='DroneAmerica'>DroneAmerica</option><option  value='DroneRC'>DroneRC</option><option  value='Dufour Aerospace'>Dufour Aerospace</option><option  value='Eachine'>Eachine</option><option  value='Easy Aerial'>Easy Aerial</option><option  value='EAVision'>EAVision</option><option  value='EFT'>EFT</option><option  value='Elistair'>Elistair</option><option  value='Event 38'>Event 38</option><option  value='Evolve Dynamics'>Evolve Dynamics</option><option  value='EyeFly'>EyeFly</option><option  value='Fimi'>Fimi</option><option  value='Fixar'>Fixar</option><option  value='FlightWave'>FlightWave</option><option  value='Flyability'>Flyability</option><option  value='Flying Production'>Flying Production</option><option  value='FlyingBasket'>FlyingBasket</option><option  value='FlyingEye'>FlyingEye</option><option  value='Fotokite'>Fotokite</option><option  value='Foxtech'>Foxtech</option><option  value='FreeFly'>FreeFly</option><option  value='Gopro'>Gopro</option><option  value='GRIFF Aviation'>GRIFF Aviation</option><option  value='Harris Aerial'>Harris Aerial</option><option  value='Heven'>Heven</option><option  value='Hexadrone'>Hexadrone</option><option  value='Hitec'>Hitec</option><option  value='HoneyComb	'>HoneyComb	</option><option  value='Hoverfly'>Hoverfly</option><option  value='Hubsan'>Hubsan</option><option  value='Hubson'>Hubson</option><option  value='Hylio'>Hylio</option><option  value='iFlight'>iFlight</option><option  value='Immersion RC'>Immersion RC</option><option  value='ImpulseRC'>ImpulseRC</option><option  value='Innoflight'>Innoflight</option><option  value='Inspired Flight'>Inspired Flight</option><option  value='Intel'>Intel</option><option  value='JB-Hyperspectral'>JB-Hyperspectral</option><option  value='JOUAV'>JOUAV</option><option  value='Kraus Hamdani'>Kraus Hamdani</option><option  value='Leading Edge'>Leading Edge</option><option  value='Litehawk'>Litehawk</option><option  value='Lucid'>Lucid</option><option  value='Lumenier'>Lumenier</option><option  value='MakeFlyEasy'>MakeFlyEasy</option><option  value='Mikrokopter'>Mikrokopter</option><option  value='MJX'>MJX</option><option  value='MMC'>MMC</option><option  value='MMC-UAV'>MMC-UAV</option><option  value='mRobotics'>mRobotics</option><option  value='Multinnov'>Multinnov</option><option  value='Nimbus'>Nimbus</option><option  value='Overflew'>Overflew</option><option  value='Parrot'>Parrot</option><option  value='Percepto'>Percepto</option><option  value='Potensic'>Potensic</option><option  value='PowerVision'>PowerVision</option><option  value='PrecisionHawk'>PrecisionHawk</option><option  value='Quantum Systems'>Quantum Systems</option><option  value='Quest UAV'>Quest UAV</option><option  value='RigiTech'>RigiTech</option><option  value='Ruko'>Ruko</option><option  value='Ryze'>Ryze</option><option  value='Sabre'>Sabre</option><option  value='Sagetown'>Sagetown</option><option  value='Scientific Aerospace'>Scientific Aerospace</option><option  value='SCOUTDI'>SCOUTDI</option><option  value='SenseFly'>SenseFly</option><option  value='Shendrones'>Shendrones</option><option  value='Sky-Hero'>Sky-Hero</option><option  value='Skydio'>Skydio</option><option  value='Skyfish'>Skyfish</option><option  value='Skyfront'>Skyfront</option><option  value='Skypersonic'>Skypersonic</option><option  value='Sonic Modell'>Sonic Modell</option><option  value='Sony'>Sony</option><option  value='Speedbird'>Speedbird</option><option  value='Steadidrone'>Steadidrone</option><option  value='Storm'>Storm</option><option  value='SwellPro'>SwellPro</option><option  value='Swift'>Swift</option><option  value='Syma'>Syma</option><option  value='T-Drones'>T-Drones</option><option  value='Tarot'>Tarot</option><option  value='TBS'>TBS</option><option  value='Teal'>Teal</option><option  value='Tekever'>Tekever</option><option  value='Teledyne'>Teledyne</option><option  value='Trimble Navigation'>Trimble Navigation</option><option  value='TTA'>TTA</option><option  value='TUSUAV'>TUSUAV</option><option  value='UAV Aerosystems'>UAV Aerosystems</option><option  value='Uvify'>Uvify</option><option  value='Verge Aero'>Verge Aero</option><option  value='Vision Aerial'>Vision Aerial</option><option  value='Voliro'>Voliro</option><option  value='Vulcan'>Vulcan</option><option  value='Walkera'>Walkera</option><option  value='Watts Innovations'>Watts Innovations</option><option  value='Wingcopter'>Wingcopter</option><option  value='Wingtra'>Wingtra</option><option  value='XAG'>XAG</option><option  value='XER'>XER</option><option  value='Xiaomi'>Xiaomi</option><option  value='Yuneec'>Yuneec</option><option  value='Zero-X'>Zero-X</option><option selected value=''></option>                            </select>
                        </div>
                        <div class="field">
                            <label>Model</label>
                            <input type="hidden" name="modelName" id="modelName" value=""/>
                            <select id="model" name="model"></select>
                                                        <script>        
                                var brands_select = $('#brand').selectize({ create: true, sortField: 'text', allowEmptyOption: true } );
                                var models_select = $("#model").selectize({
                                    create: true,
                                    valueField: 'id', labelField: 'name', searchField: ['name', 'brand'],
                                    options: [{"id": "Fixar_007", "name": "007", "brand": "Fixar"},{"id": "Swift_021", "name": "021", "brand": "Swift"},{"id": "Fixar_025", "name": "025", "brand": "Fixar"},{"id": "Inspired Flight_1200A", "name": "1200A", "brand": "Inspired Flight"},{"id": "Blade_180 QX HD", "name": "180 QX HD", "brand": "Blade"},{"id": "Wingcopter_198R1A ", "name": "198R1A ", "brand": "Wingcopter"},{"id": "Wingcopter_198R1B ", "name": "198R1B ", "brand": "Wingcopter"},{"id": "Skydio_2", "name": "2", "brand": "Skydio"},{"id": "Skydio_2+", "name": "2+", "brand": "Skydio"},{"id": "Skydio_2+ Enterprise", "name": "2+ Enterprise", "brand": "Skydio"},{"id": "Avidrone_210TL", "name": "210TL", "brand": "Avidrone"},{"id": "Blade_350 QX3", "name": "350 QX3", "brand": "Blade"},{"id": "Scientific Aerospace_4Scight", "name": "4Scight", "brand": "Scientific Aerospace"},{"id": "BROUAV_52DL", "name": "52DL", "brand": "BROUAV"},{"id": "BROUAV_72DL", "name": "72DL", "brand": "BROUAV"},{"id": "Alphaswift_A-22 Falco", "name": "A-22 Falco", "brand": "Alphaswift"},{"id": "Fimi_A3", "name": "A3", "brand": "Fimi"},{"id": "Avy_Aera", "name": "Aera", "brand": "Avy"},{"id": "Avy_Aera 1.5", "name": "Aera 1.5", "brand": "Avy"},{"id": "Avy_Aera 2", "name": "Aera 2", "brand": "Avy"},{"id": "Avy_Aera 3", "name": "Aera 3", "brand": "Avy"},{"id": "3DRobotics_AERO", "name": "AERO", "brand": "3DRobotics"},{"id": "Dufour Aerospace_Aero2", "name": "Aero2", "brand": "Dufour Aerospace"},{"id": "HoneyComb	_Ag Drone", "name": "Ag Drone", "brand": "HoneyComb	"},{"id": "Hylio_AG-110", "name": "AG-110", "brand": "Hylio"},{"id": "Hylio_AG-116", "name": "AG-116", "brand": "Hylio"},{"id": "Hylio_AG-122", "name": "AG-122", "brand": "Hylio"},{"id": "Hylio_AG-130", "name": "AG-130", "brand": "Hylio"},{"id": "Hylio_AG-152", "name": "AG-152", "brand": "Hylio"},{"id": "Hylio_AG-172", "name": "AG-172", "brand": "Hylio"},{"id": "Hylio_AG-210", "name": "AG-210", "brand": "Hylio"},{"id": "Hylio_AG-216", "name": "AG-216", "brand": "Hylio"},{"id": "Hylio_AG-230", "name": "AG-230", "brand": "Hylio"},{"id": "Hylio_AG-252", "name": "AG-252", "brand": "Hylio"},{"id": "Hylio_AG-272", "name": "AG-272", "brand": "Hylio"},{"id": "Hylio_AG-272", "name": "AG-272", "brand": "Hylio"},{"id": "DJI_Agras MG-1", "name": "Agras MG-1", "brand": "DJI"},{"id": "DJI_Agras MG-1P", "name": "Agras MG-1P", "brand": "DJI"},{"id": "DJI_Agras MG-1P RTK", "name": "Agras MG-1P RTK", "brand": "DJI"},{"id": "DJI_Agras MG-1S", "name": "Agras MG-1S", "brand": "DJI"},{"id": "DJI_Agras MG-1S Advanced", "name": "Agras MG-1S Advanced", "brand": "DJI"},{"id": "DJI_Agras MG-1S RTK", "name": "Agras MG-1S RTK", "brand": "DJI"},{"id": "DJI_Agras T10", "name": "Agras T10", "brand": "DJI"},{"id": "DJI_Agras T16", "name": "Agras T16", "brand": "DJI"},{"id": "DJI_Agras T20", "name": "Agras T20", "brand": "DJI"},{"id": "DJI_Agras T20P", "name": "Agras T20P", "brand": "DJI"},{"id": "DJI_Agras T25", "name": "Agras T25", "brand": "DJI"},{"id": "DJI_Agras T30", "name": "Agras T30", "brand": "DJI"},{"id": "DJI_Agras T40", "name": "Agras T40", "brand": "DJI"},{"id": "DJI_Agras T50", "name": "Agras T50", "brand": "DJI"},{"id": "DJI_Air 2S", "name": "Air 2S", "brand": "DJI"},{"id": "DJI_Air 3", "name": "Air 3", "brand": "DJI"},{"id": "DJI_Air 3S", "name": "Air 3S", "brand": "DJI"},{"id": "Percepto_Air-Max", "name": "Air-Max", "brand": "Percepto"},{"id": "Percepto_Air-Mobile", "name": "Air-Mobile", "brand": "Percepto"},{"id": "JB-Hyperspectral_Air-ROX", "name": "Air-ROX", "brand": "JB-Hyperspectral"},{"id": "Sony_Airpeak S1", "name": "Airpeak S1", "brand": "Sony"},{"id": "Easy Aerial_Albatross", "name": "Albatross", "brand": "Easy Aerial"},{"id": "SenseFly_Albris", "name": "Albris", "brand": "SenseFly"},{"id": "ImpulseRC_Alien", "name": "Alien", "brand": "ImpulseRC"},{"id": "Easy Aerial_Alpine Swift", "name": "Alpine Swift", "brand": "Easy Aerial"},{"id": "FreeFly_Alta 6", "name": "Alta 6", "brand": "FreeFly"},{"id": "FreeFly_Alta 8", "name": "Alta 8", "brand": "FreeFly"},{"id": "FreeFly_Alta 8 Pro", "name": "Alta 8 Pro", "brand": "FreeFly"},{"id": "FreeFly_Alta X", "name": "Alta X", "brand": "FreeFly"},{"id": "Aerialtronics_Altura Zenith", "name": "Altura Zenith", "brand": "Aerialtronics"},{"id": "Parrot_Anafi", "name": "Anafi", "brand": "Parrot"},{"id": "Parrot_Anafi AI", "name": "Anafi AI", "brand": "Parrot"},{"id": "Parrot_Anafi USA", "name": "Anafi USA", "brand": "Parrot"},{"id": "ImpulseRC_APEX", "name": "APEX", "brand": "ImpulseRC"},{"id": "Parrot_AR.Drone2.0", "name": "AR.Drone2.0", "brand": "Parrot"},{"id": "Tekever_AR3", "name": "AR3", "brand": "Tekever"},{"id": "Tekever_AR4", "name": "AR4", "brand": "Tekever"},{"id": "Tekever_AR5", "name": "AR5", "brand": "Tekever"},{"id": "DroneAmerica_Ariel", "name": "Ariel", "brand": "DroneAmerica"},{"id": "Zero-X_Ascend", "name": "Ascend", "brand": "Zero-X"},{"id": "CamFlite_ASCENT X", "name": "ASCENT X", "brand": "CamFlite"},{"id": "CamFlite_ASCENT X8", "name": "ASCENT X8", "brand": "CamFlite"},{"id": "FreeFly_Astro", "name": "Astro", "brand": "FreeFly"},{"id": "Tekever_Atlas", "name": "Atlas", "brand": "Tekever"},{"id": "Potensic_Atom", "name": "Atom", "brand": "Potensic"},{"id": "DJI_Avata", "name": "Avata", "brand": "DJI"},{"id": "DJI_Avata 2", "name": "Avata 2", "brand": "DJI"},{"id": "Aeromapper_AVEM", "name": "AVEM", "brand": "Aeromapper"},{"id": "Foxtech_AYK-250", "name": "AYK-250", "brand": "Foxtech"},{"id": "Foxtech_AYK-320", "name": "AYK-320", "brand": "Foxtech"},{"id": "Foxtech_Baby Shark", "name": "Baby Shark", "brand": "Foxtech"},{"id": "Beagle Systems_Beagle M", "name": "Beagle M", "brand": "Beagle Systems"},{"id": "Beagle Systems_Beagle One", "name": "Beagle One", "brand": "Beagle Systems"},{"id": "Beagle Systems_Beagle S", "name": "Beagle S", "brand": "Beagle Systems"},{"id": "Parrot_BeBop", "name": "BeBop", "brand": "Parrot"},{"id": "Parrot_BeBop 2", "name": "BeBop 2", "brand": "Parrot"},{"id": "MakeFlyEasy_Believer", "name": "Believer", "brand": "MakeFlyEasy"},{"id": "GRIFF Aviation_Bespoke", "name": "Bespoke", "brand": "GRIFF Aviation"},{"id": "Parrot_Bluegrass", "name": "Bluegrass", "brand": "Parrot"},{"id": "MJX_Bugs 12 EIS", "name": "Bugs 12 EIS", "brand": "MJX"},{"id": "MJX_Bugs 16 Pro", "name": "Bugs 16 Pro", "brand": "MJX"},{"id": "MJX_Bugs 18 Pro", "name": "Bugs 18 Pro", "brand": "MJX"},{"id": "MJX_Bugs 19 EIS", "name": "Bugs 19 EIS", "brand": "MJX"},{"id": "MJX_Bugs 20 EIS", "name": "Bugs 20 EIS", "brand": "MJX"},{"id": "Alphaswift_C-72 Anna", "name": "C-72 Anna", "brand": "Alphaswift"},{"id": "Alphaswift_C-75 Fregata", "name": "C-75 Fregata", "brand": "Alphaswift"},{"id": "Lucid_C1", "name": "C1", "brand": "Lucid"},{"id": "TBS_Caipirinha", "name": "Caipirinha", "brand": "TBS"},{"id": "DeltaQuad_Cargo", "name": "Cargo", "brand": "DeltaQuad"},{"id": "Harris Aerial_Carrier H6 Electric", "name": "Carrier H6 Electric", "brand": "Harris Aerial"},{"id": "Harris Aerial_Carrier H6 Hybrid", "name": "Carrier H6 Hybrid", "brand": "Harris Aerial"},{"id": "Harris Aerial_Carrier H6 Hydrone", "name": "Carrier H6 Hydrone", "brand": "Harris Aerial"},{"id": "Harris Aerial_Carrier H6HL", "name": "Carrier H6HL", "brand": "Harris Aerial"},{"id": "Harris Aerial_Carrier HX8", "name": "Carrier HX8", "brand": "Harris Aerial"},{"id": "Blade_Chroma", "name": "Chroma", "brand": "Blade"},{"id": "EyeFly_Cine Fly X6", "name": "Cine Fly X6", "brand": "EyeFly"},{"id": "EyeFly_Cine Fly X6 XL", "name": "Cine Fly X6 XL", "brand": "EyeFly"},{"id": "FlyingEye_CineCopter I", "name": "CineCopter I", "brand": "FlyingEye"},{"id": "FlyingEye_CineCopter II", "name": "CineCopter II", "brand": "FlyingEye"},{"id": "FlyingEye_CineCopter III", "name": "CineCopter III", "brand": "FlyingEye"},{"id": "FreeFly_Cinestar HL", "name": "Cinestar HL", "brand": "FreeFly"},{"id": "FreeFly_Cinestar6", "name": "Cinestar6", "brand": "FreeFly"},{"id": "FreeFly_Cinestar8", "name": "Cinestar8", "brand": "FreeFly"},{"id": "Sagetown_CL-10", "name": "CL-10", "brand": "Sagetown"},{"id": "Sagetown_CL-11", "name": "CL-11", "brand": "Sagetown"},{"id": "Sagetown_CL-12M", "name": "CL-12M", "brand": "Sagetown"},{"id": "Sagetown_CL-4", "name": "CL-4", "brand": "Sagetown"},{"id": "Sagetown_CL-460", "name": "CL-460", "brand": "Sagetown"},{"id": "Sagetown_CL-8", "name": "CL-8", "brand": "Sagetown"},{"id": "Sagetown_CL-806", "name": "CL-806", "brand": "Sagetown"},{"id": "Sagetown_CL-812", "name": "CL-812", "brand": "Sagetown"},{"id": "Sagetown_CL-850", "name": "CL-850", "brand": "Sagetown"},{"id": "Sagetown_CL-850E", "name": "CL-850E", "brand": "Sagetown"},{"id": "Sagetown_CL-866", "name": "CL-866", "brand": "Sagetown"},{"id": "Sagetown_CL-866E", "name": "CL-866E", "brand": "Sagetown"},{"id": "Sagetown_CL-880", "name": "CL-880", "brand": "Sagetown"},{"id": "Draganfly_Commander 2", "name": "Commander 2", "brand": "Draganfly"},{"id": "Draganfly_Commander 3XL", "name": "Commander 3XL", "brand": "Draganfly"},{"id": "JOUAV_CW25D", "name": "CW25D", "brand": "JOUAV"},{"id": "Scientific Aerospace_CyberEye II", "name": "CyberEye II", "brand": "Scientific Aerospace"},{"id": "Scientific Aerospace_CyberQuad", "name": "CyberQuad", "brand": "Scientific Aerospace"},{"id": "Scientific Aerospace_CyberWraith", "name": "CyberWraith", "brand": "Scientific Aerospace"},{"id": "Scientific Aerospace_CyBird", "name": "CyBird", "brand": "Scientific Aerospace"},{"id": "Lucid_D1", "name": "D1", "brand": "Lucid"},{"id": "Deerc_DE22", "name": "DE22", "brand": "Deerc"},{"id": "Parrot_DiscoPro Ag", "name": "DiscoPro Ag", "brand": "Parrot"},{"id": "TBS_Discovery", "name": "Discovery", "brand": "TBS"},{"id": "TBS_Discovery Pro", "name": "Discovery Pro", "brand": "TBS"},{"id": "Doosan_DJ25", "name": "DJ25", "brand": "Doosan"},{"id": "Speedbird_DLV-1", "name": "DLV-1", "brand": "Speedbird"},{"id": "Speedbird_DLV-2", "name": "DLV-2", "brand": "Speedbird"},{"id": "Speedbird_DLV-4", "name": "DLV-4", "brand": "Speedbird"},{"id": "Airbus_Do-DT25", "name": "Do-DT25", "brand": "Airbus"},{"id": "Airbus_Do-DT45neo", "name": "Do-DT45neo", "brand": "Airbus"},{"id": "Airbus_Do-DT55neo", "name": "Do-DT55neo", "brand": "Airbus"},{"id": "Carbonix_Domani", "name": "Domani", "brand": "Carbonix"},{"id": "Autel_Dragonfish", "name": "Dragonfish", "brand": "Autel"},{"id": "Doosan_DS30", "name": "DS30", "brand": "Doosan"},{"id": "Doosan_DT30", "name": "DT30", "brand": "Doosan"},{"id": "Black Swift_E2", "name": "E2", "brand": "Black Swift"},{"id": "Alti UAS_E35", "name": "E35", "brand": "Alti UAS"},{"id": "Event 38_E400", "name": "E400", "brand": "Event 38"},{"id": "Event 38_E455", "name": "E455", "brand": "Event 38"},{"id": "Alphaswift_E616", "name": "E616", "brand": "Alphaswift"},{"id": "EAVision_EA-20X", "name": "EA-20X", "brand": "EAVision"},{"id": "EAVision_EA-20XE", "name": "EA-20XE", "brand": "EAVision"},{"id": "EAVision_EA-30X", "name": "EA-30X", "brand": "EAVision"},{"id": "EAVision_EA-30XP", "name": "EA-30XP", "brand": "EAVision"},{"id": "Easy Aerial_Easy Guard", "name": "Easy Guard", "brand": "Easy Aerial"},{"id": "SenseFly_eBee", "name": "eBee", "brand": "SenseFly"},{"id": "SenseFly_eBee Plus", "name": "eBee Plus", "brand": "SenseFly"},{"id": "SenseFly_eBee X", "name": "eBee X", "brand": "SenseFly"},{"id": "FlightWave_Edge", "name": "Edge", "brand": "FlightWave"},{"id": "Zero-X_Edge", "name": "Edge", "brand": "Zero-X"},{"id": "RigiTech_Eiger", "name": "Eiger", "brand": "RigiTech"},{"id": "Flyability_Elios 1", "name": "Elios 1", "brand": "Flyability"},{"id": "Flyability_Elios 2", "name": "Elios 2", "brand": "Flyability"},{"id": "Flyability_Elios 3", "name": "Elios 3", "brand": "Flyability"},{"id": "Hitec_Endurance", "name": "Endurance", "brand": "Hitec"},{"id": "Autel_Evo", "name": "Evo", "brand": "Autel"},{"id": "Autel_Evo 2", "name": "Evo 2", "brand": "Autel"},{"id": "Zero-X_Evo 4K", "name": "Evo 4K", "brand": "Zero-X"},{"id": "Autel_Evo II Enterprise V3", "name": "Evo II Enterprise V3", "brand": "Autel"},{"id": "Autel_Evo Max 4N", "name": "Evo Max 4N", "brand": "Autel"},{"id": "Autel_Evo Max 4T", "name": "Evo Max 4T", "brand": "Autel"},{"id": "Autel_Evo2", "name": "Evo2", "brand": "Autel"},{"id": "Autel_Evo2 Dual", "name": "Evo2 Dual", "brand": "Autel"},{"id": "Autel_Evo2 Pro", "name": "Evo2 Pro", "brand": "Autel"},{"id": "Zero-X_Evolve", "name": "Evolve", "brand": "Zero-X"},{"id": "Zero-X_Evolved 4K", "name": "Evolved 4K", "brand": "Zero-X"},{"id": "Ruko_F11 GIM", "name": "F11 GIM", "brand": "Ruko"},{"id": "Ruko_F11 GIM2", "name": "F11 GIM2", "brand": "Ruko"},{"id": "Ruko_F11 PRO", "name": "F11 PRO", "brand": "Ruko"},{"id": "DJI_F450", "name": "F450", "brand": "DJI"},{"id": "Percepto_F450", "name": "F450", "brand": "Percepto"},{"id": "DJI_F550", "name": "F550", "brand": "DJI"},{"id": "Easy Aerial_Falcon", "name": "Falcon", "brand": "Easy Aerial"},{"id": "Intel_Falcon 8", "name": "Falcon 8", "brand": "Intel"},{"id": "Intel_Falcon 8+", "name": "Falcon 8+", "brand": "Intel"},{"id": "Scientific Aerospace_FarScight", "name": "FarScight", "brand": "Scientific Aerospace"},{"id": "FlyingBasket_FB3", "name": "FB3", "brand": "FlyingBasket"},{"id": "MakeFlyEasy_Fighter hand throw", "name": "Fighter hand throw", "brand": "MakeFlyEasy"},{"id": "MakeFlyEasy_Fighter VTOL", "name": "Fighter VTOL", "brand": "MakeFlyEasy"},{"id": "BirdsEyeView _FireFLY6 PRO", "name": "FireFLY6 PRO", "brand": "BirdsEyeView "},{"id": "SwellPro_Fisherman Max", "name": "Fisherman Max", "brand": "SwellPro"},{"id": "DJI_Flamewheel F450", "name": "Flamewheel F450", "brand": "DJI"},{"id": "DJI_Flamewheel F550", "name": "Flamewheel F550", "brand": "DJI"},{"id": "Steadidrone_Flare", "name": "Flare", "brand": "Steadidrone"},{"id": "DJI_Flip", "name": "Flip", "brand": "DJI"},{"id": "Teledyne_FLIR SIRAS", "name": "FLIR SIRAS", "brand": "Teledyne"},{"id": "DJI_FPV", "name": "FPV", "brand": "DJI"},{"id": "MakeFlyEasy_Freeman 2100", "name": "Freeman 2100", "brand": "MakeFlyEasy"},{"id": "MakeFlyEasy_Freeman 2300", "name": "Freeman 2300", "brand": "MakeFlyEasy"},{"id": "EFT_G20", "name": "G20", "brand": "EFT"},{"id": "EFT_G630", "name": "G630", "brand": "EFT"},{"id": "Alphaswift_G630", "name": "G630", "brand": "Alphaswift"},{"id": "BFD_GE-8", "name": "GE-8", "brand": "BFD"},{"id": "Teal_Golden Eagle", "name": "Golden Eagle", "brand": "Teal"},{"id": "Foxtech_Great Shark", "name": "Great Shark", "brand": "Foxtech"},{"id": "FOXTECH_Great Shark 330", "name": "Great Shark 330", "brand": "FOXTECH"},{"id": "GRIFF Aviation_GRIFF 135", "name": "GRIFF 135", "brand": "GRIFF Aviation"},{"id": "MMC_Griflion M8", "name": "Griflion M8", "brand": "MMC"},{"id": "Swift_Gryphon 3", "name": "Gryphon 3", "brand": "Swift"},{"id": "Heven_H100", "name": "H100", "brand": "Heven"},{"id": "Alphaswift_H1600", "name": "H1600", "brand": "Alphaswift"},{"id": "BFD_H2-6", "name": "H2-6", "brand": "BFD"},{"id": "Heven_H250", "name": "H250", "brand": "Heven"},{"id": "Hylio_H450", "name": "H450", "brand": "Hylio"},{"id": "Yuneec_H520", "name": "H520", "brand": "Yuneec"},{"id": "Yuneec_H520E", "name": "H520E", "brand": "Yuneec"},{"id": "Yuneec_H850", "name": "H850", "brand": "Yuneec"},{"id": "Draganfly_Heavy Lift", "name": "Heavy Lift", "brand": "Draganfly"},{"id": "ImpulseRC_Helix", "name": "Helix", "brand": "ImpulseRC"},{"id": "BlackSquare_Hercules X4", "name": "Hercules X4", "brand": "BlackSquare"},{"id": "BlackSquare_Hercules X8", "name": "Hercules X8", "brand": "BlackSquare"},{"id": "MakeFlyEasy_Hero VTOL", "name": "Hero VTOL", "brand": "MakeFlyEasy"},{"id": "FlyingEye_Hexacopter", "name": "Hexacopter", "brand": "FlyingEye"},{"id": "Sabre_HL36", "name": "HL36", "brand": "Sabre"},{"id": "Sabre_HL48", "name": "HL48", "brand": "Sabre"},{"id": "DroneAmerica_HuginnAir", "name": "HuginnAir", "brand": "DroneAmerica"},{"id": "Inspired Flight_IF1200", "name": "IF1200", "brand": "Inspired Flight"},{"id": "Inspired Flight_IF1200A", "name": "IF1200A", "brand": "Inspired Flight"},{"id": "Inspired Flight_IF750", "name": "IF750", "brand": "Inspired Flight"},{"id": "Uvify_IFO", "name": "IFO", "brand": "Uvify"},{"id": "Uvify_IFO-S", "name": "IFO-S", "brand": "Uvify"},{"id": "DJI_Inspire 1", "name": "Inspire 1", "brand": "DJI"},{"id": "DJI_Inspire 1 Pro with X5 Zenmuse", "name": "Inspire 1 Pro with X5 Zenmuse", "brand": "DJI"},{"id": "DJI_Inspire 2", "name": "Inspire 2", "brand": "DJI"},{"id": "DJI_Inspire 3", "name": "Inspire 3", "brand": "DJI"},{"id": "3DRobotics_IRIS", "name": "IRIS", "brand": "3DRobotics"},{"id": "3DRobotics_IRIS+", "name": "IRIS+", "brand": "3DRobotics"},{"id": "EAVision_J100", "name": "J100", "brand": "EAVision"},{"id": "EAVision_J100", "name": "J100", "brand": "EAVision"},{"id": "EAVision_J150", "name": "J150", "brand": "EAVision"},{"id": "EAVision_J70", "name": "J70", "brand": "EAVision"},{"id": "ImpulseRC_JS-1", "name": "JS-1", "brand": "ImpulseRC"},{"id": "FlightWave_Jupiter", "name": "Jupiter", "brand": "FlightWave"},{"id": "Kraus Hamdani_K1000ULE", "name": "K1000ULE", "brand": "Kraus Hamdani"},{"id": "Gopro_Karma", "name": "Karma", "brand": "Gopro"},{"id": "PrecisionHawk_Lancaster", "name": "Lancaster", "brand": "PrecisionHawk"},{"id": "Brinc_Lemur S", "name": "Lemur S", "brand": "Brinc"},{"id": "Autel_Lite", "name": "Lite", "brand": "Autel"},{"id": "Autel_Lite +", "name": "Lite +", "brand": "Autel"},{"id": "Sky-Hero_Loki MkII", "name": "Loki MkII", "brand": "Sky-Hero"},{"id": "XAG_M2000", "name": "M2000", "brand": "XAG"},{"id": "DJI_M30TD", "name": "M30TD", "brand": "DJI"},{"id": "DJI_M3TD", "name": "M3TD", "brand": "DJI"},{"id": "Skyfish_M4", "name": "M4", "brand": "Skyfish"},{"id": "TTA_M4E Smart Mini", "name": "M4E Smart Mini", "brand": "TTA"},{"id": "XAG_M500", "name": "M500", "brand": "XAG"},{"id": "Skyfish_M6", "name": "M6", "brand": "Skyfish"},{"id": "T-Drones_M690Pro", "name": "M690Pro", "brand": "T-Drones"},{"id": "TTA_M6E-1", "name": "M6E-1", "brand": "TTA"},{"id": "TTA_M6E-G200", "name": "M6E-G200", "brand": "TTA"},{"id": "TTA_M6E-G300", "name": "M6E-G300", "brand": "TTA"},{"id": "TTA_M6E-X V1", "name": "M6E-X V1", "brand": "TTA"},{"id": "TTA_M6E-X V2", "name": "M6E-X V2", "brand": "TTA"},{"id": "TTA_M6E-XT", "name": "M6E-XT", "brand": "TTA"},{"id": "TTA_M6FA", "name": "M6FA", "brand": "TTA"},{"id": "TTA_M6FC", "name": "M6FC", "brand": "TTA"},{"id": "TTA_M8A PRO", "name": "M8A PRO", "brand": "TTA"},{"id": "TTA_M8FA", "name": "M8FA", "brand": "TTA"},{"id": "TTA_M8FD", "name": "M8FD", "brand": "TTA"},{"id": "Flying Production_Magni-X", "name": "Magni-X", "brand": "Flying Production"},{"id": "DeltaQuad_Map", "name": "Map", "brand": "DeltaQuad"},{"id": "Atmos_Marlyn", "name": "Marlyn", "brand": "Atmos"},{"id": "DJI_Matrice 100", "name": "Matrice 100", "brand": "DJI"},{"id": "DJI_Matrice 200", "name": "Matrice 200", "brand": "DJI"},{"id": "DJI_Matrice 200 V2", "name": "Matrice 200 V2", "brand": "DJI"},{"id": "DJI_Matrice 210", "name": "Matrice 210", "brand": "DJI"},{"id": "DJI_Matrice 210 RTK", "name": "Matrice 210 RTK", "brand": "DJI"},{"id": "DJI_Matrice 210 RTK V2", "name": "Matrice 210 RTK V2", "brand": "DJI"},{"id": "DJI_Matrice 210 V2", "name": "Matrice 210 V2", "brand": "DJI"},{"id": "DJI_Matrice 30", "name": "Matrice 30", "brand": "DJI"},{"id": "DJI_Matrice 30 Thermal Enterprise", "name": "Matrice 30 Thermal Enterprise", "brand": "DJI"},{"id": "DJI_Matrice 300", "name": "Matrice 300", "brand": "DJI"},{"id": "DJI_Matrice 300", "name": "Matrice 300", "brand": "DJI"},{"id": "DJI_Matrice 300 RTK", "name": "Matrice 300 RTK", "brand": "DJI"},{"id": "DJI_Matrice 30T", "name": "Matrice 30T", "brand": "DJI"},{"id": "DJI_Matrice 350 RTK", "name": "Matrice 350 RTK", "brand": "DJI"},{"id": "DJI_Matrice 4D", "name": "Matrice 4D", "brand": "DJI"},{"id": "DJI_Matrice 4E", "name": "Matrice 4E", "brand": "DJI"},{"id": "DJI_Matrice 4T", "name": "Matrice 4T", "brand": "DJI"},{"id": "DJI_Matrice 4TD", "name": "Matrice 4TD", "brand": "DJI"},{"id": "DJI_Matrice 600", "name": "Matrice 600", "brand": "DJI"},{"id": "DJI_Matrice 600 Pro", "name": "Matrice 600 Pro", "brand": "DJI"},{"id": "DJI_Mavic 2", "name": "Mavic 2", "brand": "DJI"},{"id": "DJI_Mavic 2 Enterprise", "name": "Mavic 2 Enterprise", "brand": "DJI"},{"id": "DJI_Mavic 2 Enterprise Advanced", "name": "Mavic 2 Enterprise Advanced", "brand": "DJI"},{"id": "DJI_Mavic 2 Enterprise DUAL", "name": "Mavic 2 Enterprise DUAL", "brand": "DJI"},{"id": "DJI_Mavic 2 Pro", "name": "Mavic 2 Pro", "brand": "DJI"},{"id": "DJI_Mavic 2 Zoom", "name": "Mavic 2 Zoom", "brand": "DJI"},{"id": "DJI_Mavic 3", "name": "Mavic 3", "brand": "DJI"},{"id": "DJI_Mavic 3 Cine", "name": "Mavic 3 Cine", "brand": "DJI"},{"id": "DJI_Mavic 3 Cine Pro", "name": "Mavic 3 Cine Pro", "brand": "DJI"},{"id": "DJI_Mavic 3 Enterprise", "name": "Mavic 3 Enterprise", "brand": "DJI"},{"id": "DJI_Mavic 3 Pro", "name": "Mavic 3 Pro", "brand": "DJI"},{"id": "DJI_Mavic 3 Pro Multispectral", "name": "Mavic 3 Pro Multispectral", "brand": "DJI"},{"id": "DJI_Mavic 3 RTK", "name": "Mavic 3 RTK", "brand": "DJI"},{"id": "DJI_Mavic 3 Thermal", "name": "Mavic 3 Thermal", "brand": "DJI"},{"id": "DJI_Mavic 3 Thermal Enterprise", "name": "Mavic 3 Thermal Enterprise", "brand": "DJI"},{"id": "DJI_Mavic 3E", "name": "Mavic 3E", "brand": "DJI"},{"id": "DJI_Mavic 3T", "name": "Mavic 3T", "brand": "DJI"},{"id": "DJI_Mavic 4 Pro", "name": "Mavic 4 Pro", "brand": "DJI"},{"id": "DJI_Mavic Air", "name": "Mavic Air", "brand": "DJI"},{"id": "DJI_Mavic Air 2", "name": "Mavic Air 2", "brand": "DJI"},{"id": "DJI_Mavic Air 2S", "name": "Mavic Air 2S", "brand": "DJI"},{"id": "DJI_Mavic Mini", "name": "Mavic Mini", "brand": "DJI"},{"id": "DJI_Mavic Mini 2", "name": "Mavic Mini 2", "brand": "DJI"},{"id": "DJI_Mavic Pro", "name": "Mavic Pro", "brand": "DJI"},{"id": "Steadidrone_Mavrik", "name": "Mavrik", "brand": "Steadidrone"},{"id": "Watts Innovations_MFD 5000", "name": "MFD 5000", "brand": "Watts Innovations"},{"id": "Xiaomi_MI 4K", "name": "MI 4K", "brand": "Xiaomi"},{"id": "DJI_Mini 2", "name": "Mini 2", "brand": "DJI"},{"id": "DJI_Mini 2 SE", "name": "Mini 2 SE", "brand": "DJI"},{"id": "DJI_Mini 3", "name": "Mini 3", "brand": "DJI"},{"id": "DJI_Mini 3 Pro", "name": "Mini 3 Pro", "brand": "DJI"},{"id": "DJI_Mini 4 Pro", "name": "Mini 4 Pro", "brand": "DJI"},{"id": "Mikrokopter_MK-Hexa", "name": "MK-Hexa", "brand": "Mikrokopter"},{"id": "Mikrokopter_MK-Okto", "name": "MK-Okto", "brand": "Mikrokopter"},{"id": "Mikrokopter_MK-Quad", "name": "MK-Quad", "brand": "Mikrokopter"},{"id": "Mikrokopter_MK8-3500", "name": "MK8-3500", "brand": "Mikrokopter"},{"id": "DroneRC_MOTION X8-950", "name": "MOTION X8-950", "brand": "DroneRC"},{"id": "T-Drones_MX860", "name": "MX860", "brand": "T-Drones"},{"id": "Autel_Nano", "name": "Nano", "brand": "Autel"},{"id": "Autel_Nano +", "name": "Nano +", "brand": "Autel"},{"id": "mRobotics_Nano Talon EVO", "name": "Nano Talon EVO", "brand": "mRobotics"},{"id": "DroneAmerica_NavX", "name": "NavX", "brand": "DroneAmerica"},{"id": "iFlight_Nazgul 5 HD", "name": "Nazgul 5 HD", "brand": "iFlight"},{"id": "Acecore_Neo", "name": "Neo", "brand": "Acecore"},{"id": "DJI_Neo", "name": "Neo", "brand": "DJI"},{"id": "Acecore_Noa", "name": "Noa", "brand": "Acecore"},{"id": "MMC-UAV_Notuzi X85", "name": "Notuzi X85", "brand": "MMC-UAV"},{"id": "MMC_Notuzi X85", "name": "Notuzi X85", "brand": "MMC"},{"id": "FlyingEye_Octo S1000", "name": "Octo S1000", "brand": "FlyingEye"},{"id": "FlyingEye_OctoCopter", "name": "OctoCopter", "brand": "FlyingEye"},{"id": "Wingtra_One", "name": "One", "brand": "Wingtra"},{"id": "Wingtra_One Gen II", "name": "One Gen II", "brand": "Wingtra"},{"id": "Elistair_Orion", "name": "Orion", "brand": "Elistair"},{"id": "Easy Aerial_Osprey", "name": "Osprey", "brand": "Easy Aerial"},{"id": "Teledyne_OSPREY", "name": "OSPREY", "brand": "Teledyne"},{"id": "XAG_P100", "name": "P100", "brand": "XAG"},{"id": "XAG_P100 PRO", "name": "P100 PRO", "brand": "XAG"},{"id": "CHCNAV_P330 PRO", "name": "P330 PRO", "brand": "CHCNAV"},{"id": "XAG_P40", "name": "P40", "brand": "XAG"},{"id": "Skyfront_Perimeter 8", "name": "Perimeter 8", "brand": "Skyfront"},{"id": "DJI_Phantom", "name": "Phantom", "brand": "DJI"},{"id": "DJI_Phantom 2", "name": "Phantom 2", "brand": "DJI"},{"id": "DJI_Phantom 2 Vision+", "name": "Phantom 2 Vision+", "brand": "DJI"},{"id": "DJI_Phantom 3 4K", "name": "Phantom 3 4K", "brand": "DJI"},{"id": "DJI_Phantom 3 Adv", "name": "Phantom 3 Adv", "brand": "DJI"},{"id": "DJI_Phantom 3 Pro", "name": "Phantom 3 Pro", "brand": "DJI"},{"id": "DJI_Phantom 3 SE", "name": "Phantom 3 SE", "brand": "DJI"},{"id": "DJI_Phantom 3 Standard", "name": "Phantom 3 Standard", "brand": "DJI"},{"id": "DJI_Phantom 4", "name": "Phantom 4", "brand": "DJI"},{"id": "DJI_Phantom 4 Adv", "name": "Phantom 4 Adv", "brand": "DJI"},{"id": "DJI_Phantom 4 Multispectral", "name": "Phantom 4 Multispectral", "brand": "DJI"},{"id": "DJI_Phantom 4 Pro", "name": "Phantom 4 Pro", "brand": "DJI"},{"id": "DJI_Phantom 4 Pro V2", "name": "Phantom 4 Pro V2", "brand": "DJI"},{"id": "DJI_Phantom 4 RTK", "name": "Phantom 4 RTK", "brand": "DJI"},{"id": "DroneAmerica_Phoebus", "name": "Phoebus", "brand": "DroneAmerica"},{"id": "Custom_Pixhawk-based", "name": "Pixhawk-based", "brand": "Custom"},{"id": "PowerVision_PowerDolphin", "name": "PowerDolphin", "brand": "PowerVision"},{"id": "PowerVision_PowerEgg", "name": "PowerEgg", "brand": "PowerVision"},{"id": "PowerVision_PowerEgg X", "name": "PowerEgg X", "brand": "PowerVision"},{"id": "PowerVision_PowerEye", "name": "PowerEye", "brand": "PowerVision"},{"id": "PowerVision_PowerRay", "name": "PowerRay", "brand": "PowerVision"},{"id": "Nimbus_PPL418", "name": "PPL418", "brand": "Nimbus"},{"id": "Nimbus_PPL612 Plus EVO XL", "name": "PPL612 Plus EVO XL", "brand": "Nimbus"},{"id": "Watts Innovations_Prism", "name": "Prism", "brand": "Watts Innovations"},{"id": "UAV Aerosystems_Providence", "name": "Providence", "brand": "UAV Aerosystems"},{"id": "UAV Aerosystems_Providence-V", "name": "Providence-V", "brand": "UAV Aerosystems"},{"id": "UAV Aerosystems_Providence-VX", "name": "Providence-VX", "brand": "UAV Aerosystems"},{"id": "UAV Aerosystems_Providence-X", "name": "Providence-X", "brand": "UAV Aerosystems"},{"id": "Teledyne_PRS BLACK HORNET", "name": "PRS BLACK HORNET", "brand": "Teledyne"},{"id": "Leading Edge_PV35X", "name": "PV35X", "brand": "Leading Edge"},{"id": "Leading Edge_PV40X", "name": "PV40X", "brand": "Leading Edge"},{"id": "Quest UAV_Q200 Survey Pro", "name": "Q200 Survey Pro", "brand": "Quest UAV"},{"id": "Lumenier_QAV250", "name": "QAV250", "brand": "Lumenier"},{"id": "Lumenier_QAV400", "name": "QAV400", "brand": "Lumenier"},{"id": "Lumenier_QAV500", "name": "QAV500", "brand": "Lumenier"},{"id": "Lumenier_QAV540G", "name": "QAV540G", "brand": "Lumenier"},{"id": "TBS_QQ190", "name": "QQ190", "brand": "TBS"},{"id": "Walkera_QR-X350", "name": "QR-X350", "brand": "Walkera"},{"id": "Walkera_QR-X350 PRO", "name": "QR-X350 PRO", "brand": "Walkera"},{"id": "FlyingEye_QuadCopter", "name": "QuadCopter", "brand": "FlyingEye"},{"id": "Litehawk_Quattro", "name": "Quattro", "brand": "Litehawk"},{"id": "XAG_R150", "name": "R150", "brand": "XAG"},{"id": "Easy Aerial_Raptor", "name": "Raptor", "brand": "Easy Aerial"},{"id": "Vulcan_Raven", "name": "Raven", "brand": "Vulcan"},{"id": "Alti UAS_Reach", "name": "Reach", "brand": "Alti UAS"},{"id": "ImpulseRC_Reverb", "name": "Reverb", "brand": "ImpulseRC"},{"id": "AGEagle_RX-48", "name": "RX-48", "brand": "AGEagle"},{"id": "AGEagle_RX-60", "name": "RX-60", "brand": "AGEagle"},{"id": "EyeFly_S 1000", "name": "S 1000", "brand": "EyeFly"},{"id": "EyeFly_S 800 EVO", "name": "S 800 EVO", "brand": "EyeFly"},{"id": "Black Swift_S1", "name": "S1", "brand": "Black Swift"},{"id": "DJI_S1000", "name": "S1000", "brand": "DJI"},{"id": "Overflew_S101", "name": "S101", "brand": "Overflew"},{"id": "Black Swift_S2", "name": "S2", "brand": "Black Swift"},{"id": "Skydio_S2+", "name": "S2+", "brand": "Skydio"},{"id": "DJI_S800", "name": "S800", "brand": "DJI"},{"id": "DJI_S800 EVO", "name": "S800 EVO", "brand": "DJI"},{"id": "DJI_S900", "name": "S900", "brand": "DJI"},{"id": "Quantum Systems_Scorpion", "name": "Scorpion", "brand": "Quantum Systems"},{"id": "SCOUTDI_Scout 137", "name": "Scout 137", "brand": "SCOUTDI"},{"id": "BFD_SE-8", "name": "SE-8", "brand": "BFD"},{"id": "Commaris_Seeker", "name": "Seeker", "brand": "Commaris"},{"id": "Censys_Sentaero BVLOS", "name": "Sentaero BVLOS", "brand": "Censys"},{"id": "Censys_Sentaero VLOS", "name": "Sentaero VLOS", "brand": "Censys"},{"id": "Hoverfly_Sentry", "name": "Sentry", "brand": "Hoverfly"},{"id": "Fotokite_Sigma", "name": "Sigma", "brand": "Fotokite"},{"id": "Evolve Dynamics_Sky Mantis", "name": "Sky Mantis", "brand": "Evolve Dynamics"},{"id": "Skypersonic_Skycopter", "name": "Skycopter", "brand": "Skypersonic"},{"id": "Sonic Modell_Skyhunter", "name": "Skyhunter", "brand": "Sonic Modell"},{"id": "Aeronavics_SkyJib", "name": "SkyJib", "brand": "Aeronavics"},{"id": "MMC_Skylle 1550", "name": "Skylle 1550", "brand": "MMC"},{"id": "Aeryon_SkyRanger R60", "name": "SkyRanger R60", "brand": "Aeryon"},{"id": "Aeryon_SkyRanger R70", "name": "SkyRanger R70", "brand": "Aeryon"},{"id": "Teledyne_SKYRANGER R70", "name": "SKYRANGER R70", "brand": "Teledyne"},{"id": "Aeryon_SkyRanger R80", "name": "SkyRanger R80", "brand": "Aeryon"},{"id": "Aeryon_SkyRanger R80D", "name": "SkyRanger R80D", "brand": "Aeryon"},{"id": "3DRobotics_Solo", "name": "Solo", "brand": "3DRobotics"},{"id": "TTA_SP-7", "name": "SP-7", "brand": "TTA"},{"id": "TTA_SP-9 Hand Launching", "name": "SP-9 Hand Launching", "brand": "TTA"},{"id": "TTA_SP-9 VTOL", "name": "SP-9 VTOL", "brand": "TTA"},{"id": "DJI_Spark", "name": "Spark", "brand": "DJI"},{"id": "Hoverfly_Spectre", "name": "Spectre", "brand": "Hoverfly"},{"id": "SwellPro_Splash Drone 3 Auto", "name": "Splash Drone 3 Auto", "brand": "SwellPro"},{"id": "SwellPro_Splash Drone 3 Fisherman", "name": "Splash Drone 3 Fisherman", "brand": "SwellPro"},{"id": "SwellPro_Spry", "name": "Spry", "brand": "SwellPro"},{"id": "Storm_SRD280", "name": "SRD280", "brand": "Storm"},{"id": "Multinnov_Stereo2", "name": "Stereo2", "brand": "Multinnov"},{"id": "MakeFlyEasy_Striver mini hand throw", "name": "Striver mini hand throw", "brand": "MakeFlyEasy"},{"id": "MakeFlyEasy_Striver mini VTOL", "name": "Striver mini VTOL", "brand": "MakeFlyEasy"},{"id": "Zero-X_Swift", "name": "Swift", "brand": "Zero-X"},{"id": "Zero-X_Swift +", "name": "Swift +", "brand": "Zero-X"},{"id": "Vision Aerial_SwitchBlade", "name": "SwitchBlade", "brand": "Vision Aerial"},{"id": "Voliro_T", "name": "T", "brand": "Voliro"},{"id": "DIY_Tarot", "name": "Tarot", "brand": "DIY"},{"id": "Ryze_Tello", "name": "Tello", "brand": "Ryze"},{"id": "Shendrones_Thicc 2.0", "name": "Thicc 2.0", "brand": "Shendrones"},{"id": "Flying Production_Thor", "name": "Thor", "brand": "Flying Production"},{"id": "Yuneec_Tornado CGO4", "name": "Tornado CGO4", "brand": "Yuneec"},{"id": "Yuneec_Tornado H920", "name": "Tornado H920", "brand": "Yuneec"},{"id": "Alti UAS_Transition", "name": "Transition", "brand": "Alti UAS"},{"id": "Quantum Systems_Trinity F9", "name": "Trinity F9", "brand": "Quantum Systems"},{"id": "Quantum Systems_Trinity F90+", "name": "Trinity F90+", "brand": "Quantum Systems"},{"id": "Quantum Systems_Trinity Pro", "name": "Trinity Pro", "brand": "Quantum Systems"},{"id": "Quantum Systems_Tron F9", "name": "Tron F9", "brand": "Quantum Systems"},{"id": "Quantum Systems_Tron F90+", "name": "Tron F90+", "brand": "Quantum Systems"},{"id": "Hexadrone_Tundra", "name": "Tundra", "brand": "Hexadrone"},{"id": "Hexadrone_Tundra 2", "name": "Tundra 2", "brand": "Hexadrone"},{"id": "Yuneec_Typhoon 4K", "name": "Typhoon 4K", "brand": "Yuneec"},{"id": "Yuneec_Typhoon H", "name": "Typhoon H", "brand": "Yuneec"},{"id": "Yuneec_Typhoon H Plus", "name": "Typhoon H Plus", "brand": "Yuneec"},{"id": "Yuneec_Typhoon H3", "name": "Typhoon H3", "brand": "Yuneec"},{"id": "Yuneec_Typhoon Q500+", "name": "Typhoon Q500+", "brand": "Yuneec"},{"id": "Eachine_Tyro 119", "name": "Tyro 119", "brand": "Eachine"},{"id": "Ruko_U11 PRO", "name": "U11 PRO", "brand": "Ruko"},{"id": "Heven_URBAN", "name": "URBAN", "brand": "Heven"},{"id": "Heven_URBAN HYBRID", "name": "URBAN HYBRID", "brand": "Heven"},{"id": "DroneRC_URBAN X4-560", "name": "URBAN X4-560", "brand": "DroneRC"},{"id": "Heven_URBAN XL", "name": "URBAN XL", "brand": "Heven"},{"id": "DroneRC_URBAN Y6-950", "name": "URBAN Y6-950", "brand": "DroneRC"},{"id": "Trimble Navigation_UX5", "name": "UX5", "brand": "Trimble Navigation"},{"id": "Trimble Navigation_UX5 HP", "name": "UX5 HP", "brand": "Trimble Navigation"},{"id": "XAG_V40", "name": "V40", "brand": "XAG"},{"id": "T-Drones_VA25", "name": "VA25", "brand": "T-Drones"},{"id": "Quantum Systems_Vector", "name": "Vector", "brand": "Quantum Systems"},{"id": "Vision Aerial_Vector", "name": "Vector", "brand": "Vision Aerial"},{"id": "TBS_Vendetta V1", "name": "Vendetta V1", "brand": "TBS"},{"id": "TBS_Vendetta V2", "name": "Vendetta V2", "brand": "TBS"},{"id": "CamFlite_VERSA X", "name": "VERSA X", "brand": "CamFlite"},{"id": "CamFlite_VERSA X8", "name": "VERSA X8", "brand": "CamFlite"},{"id": "DeltaQuad_View", "name": "View", "brand": "DeltaQuad"},{"id": "Carbonix_Volanti", "name": "Volanti", "brand": "Carbonix"},{"id": "Immersion RC_Vortex 285", "name": "Vortex 285", "brand": "Immersion RC"},{"id": "DroneAmerica_VTOL Savant", "name": "VTOL Savant", "brand": "DroneAmerica"},{"id": "Steadidrone_X", "name": "X", "brand": "Steadidrone"},{"id": "Verge Aero_X1", "name": "X1", "brand": "Verge Aero"},{"id": "Skydio_X10", "name": "X10", "brand": "Skydio"},{"id": "Trimble Navigation_X100", "name": "X100", "brand": "Trimble Navigation"},{"id": "XER_X12", "name": "X12", "brand": "XER"},{"id": "Skydio_X2", "name": "X2", "brand": "Skydio"},{"id": "Hubsan_X4", "name": "X4", "brand": "Hubsan"},{"id": "Hubson_X4", "name": "X4", "brand": "Hubson"},{"id": "Aurelia Aerospace_X4", "name": "X4", "brand": "Aurelia Aerospace"},{"id": "Cerana_X4-21", "name": "X4-21", "brand": "Cerana"},{"id": "Syma_X5C", "name": "X5C", "brand": "Syma"},{"id": "Aurelia Aerospace_X6", "name": "X6", "brand": "Aurelia Aerospace"},{"id": "Alphaswift_X6100", "name": "X6100", "brand": "Alphaswift"},{"id": "3DRobotics_X8", "name": "X8", "brand": "3DRobotics"},{"id": "Tarot_X8", "name": "X8", "brand": "Tarot"},{"id": "Aurelia Aerospace_X8", "name": "X8", "brand": "Aurelia Aerospace"},{"id": "Fimi_X8 Mini", "name": "X8 Mini", "brand": "Fimi"},{"id": "Fimi_X8 SE", "name": "X8 SE", "brand": "Fimi"},{"id": "Cerana_X8-28 +", "name": "X8-28 +", "brand": "Cerana"},{"id": "Innoflight_X8BR", "name": "X8BR", "brand": "Innoflight"},{"id": "3DRobotics_Y6", "name": "Y6", "brand": "3DRobotics"},{"id": "EFT_Z30", "name": "Z30", "brand": "EFT"},{"id": "Alphaswift_Z30", "name": "Z30", "brand": "Alphaswift"},{"id": "EFT_Z50", "name": "Z50", "brand": "EFT"},{"id": "Alphaswift_Z50", "name": "Z50", "brand": "Alphaswift"},{"id": "Sagetown_Z8", "name": "Z8", "brand": "Sagetown"},{"id": "Acecore_Zetona", "name": "Zetona", "brand": "Acecore"},{"id": "Acecore_Zoe", "name": "Zoe", "brand": "Acecore"},{"id": "TUSUAV_ZT-100V", "name": "ZT-100V", "brand": "TUSUAV"},{"id": "TUSUAV_ZT-13V", "name": "ZT-13V", "brand": "TUSUAV"},{"id": "TUSUAV_ZT-16V", "name": "ZT-16V", "brand": "TUSUAV"},{"id": "TUSUAV_ZT-25V", "name": "ZT-25V", "brand": "TUSUAV"},{"id": "TUSUAV_ZT-39V", "name": "ZT-39V", "brand": "TUSUAV"},{"id": "TUSUAV_ZT-3VS", "name": "ZT-3VS", "brand": "TUSUAV"},{"id": "Trimble Navigation_ZX5", "name": "ZX5", "brand": "Trimble Navigation"},{"id": "_", "name": "", "brand": ""},]
                                });

                                
                                function copyObject (src) {
                                    return Object.assign({}, src);
                                }
                                var allModelsOptions = copyObject (models_select[0].selectize.options);

                                // Select current model:
                                
                                function filterModels() {
                                    
                                    var currentBrand=$("#brand").val();

                                    /*console.log ("filterModels: " + currentBrand)
                                    console.log ("options: ", allModelsOptions)*/

                                    var models = copyObject (allModelsOptions);
                                    models_select[0].selectize.addOption(Object.entries(allModelsOptions));
                                    models_select[0].selectize.refreshOptions();

                                    var itemsProcessed = 0;
                                    Object.entries(models).forEach(entry => {
                                        let key = entry[0];
                                        let value = entry[1];

                                        if (value.brand!=currentBrand) {
                                            models_select[0].selectize.removeOption(key)
                                        }

                                        itemsProcessed++;

                                        // Iteration done:
                                        if(itemsProcessed === Object.entries(models).length) {
                                            countOption = Object.entries(models_select[0].selectize.options).length;
                                            if (countOption==0) {
                                                models_select[0].selectize.addOption(Object.entries(allModelsOptions));
                                            }
                                            //models_select[0].selectize.close();
                                        }
                                        
                                    });
                                }
                                                            </script>

                        </div>
                        <div class="field">
                            <label>Type</label>
                            <select id="dronetype" name="dronetype">
                            <option  value='Aircraft'>Aircraft</option><option  value='Autopilot'>Autopilot</option><option  value='Boat'>Boat</option><option  value='Fixed-wing'>Fixed-wing</option><option  value='Flight controller'>Flight controller</option><option  value='Flying-wing'>Flying-wing</option><option  value='FPV'>FPV</option><option  value='Hexacopter'>Hexacopter</option><option  value='Home-made'>Home-made</option><option  value='Multi-rotors'>Multi-rotors</option><option  value='Quadcopter'>Quadcopter</option><option  value='Rover'>Rover</option><option  value='RPA'>RPA</option><option  value='Submersible'>Submersible</option><option selected value=''></option>                            </select>     
                            <script>var dronetypes_select = $('#dronetype').selectize({ create: true, sortField: 'text', allowEmptyOption: true } );</script>                   
                        </div>    
                    </div>
                    <div style="position: absolute; font-size: 0.85em; top: 355px;"><a href="#" onclick="openContactForm ('SALES-FeedBack_General', 'Missing Drone Brand-model',1)">Suggest a missing Brand/Model</a></div>
                    <div class="fields-container two">
                        <div class="field">
                            <label>Serial # (Printed)</label>
                            <input type="text" id="serialNumberPrinted" name="serialNumberPrinted" placeholder="Serial number" value=""/>
                                                    </div>
                        <div class="field">
                            <label>Serial # (Internal)</label>
                            <input type="text" id="serialNumber" name="serialNumber" placeholder="Serial number" value=""/>
                                                    </div>
                    </div>
                    <div class="fields-container three" style="margin-top: 12px;">   
                        <div class="field">
                            <label>Flight Controller Serial#</label>
                            <input type="text" id="flightcontrollerSerialNumber" name="flightcontrollerSerialNumber" placeholder="" value=""/>                        
                        </div>
                        <div class="field">
                            <label>Remote Controller Serial#</label>
                            <input type="text" id="controllerSerialNumber" name="controllerSerialNumber" placeholder="" value=""/>                        
                        </div>
                        <div class="field">
                            <label>Remote Controller 2 Serial#</label>
                            <input type="text" id="controllerSerialNumber2" name="controllerSerialNumber2" placeholder="" value=""/>	
                        </div>
                    </div>
                    <div class="fields-container one">
                        <div class="field">
                            <label>Software Information</label>
                            <textarea id="softwareInfo" name="softwareInfo" rows="2" style="height: 50px;"></textarea>
                        </div>
                    </div>
                    
                </div>
                <!--div class="button-container one">
                    <div class="button cancel">Cancel</div> 
                                        <div class="button next">Next</div>
                </div-->

                <div style="text-align: center; font-size: 1em; margin-left: 30px; margin-right: 30px;">Please refer to our Integrations Hub page. This will give you instructions on how to set up automated telemetry importing for those drones and 3rd party controllers / ground stations that support it. <a href="/flightImport/integrationsHub.php" target="_new">Visit Integration Hub</a></div>


                            </fieldset>

            <fieldset id="drone_geometry_block" class="nav-block fields two">
                <div class="add-fields">
                    <div class="title">Drone Geometry / Inventory</div>
                    <div class="fields-container two">
                        <div class="field" align="center">
                            <label>Geometry</label>
                            <select id="geometryGUID" name="geometryGUID" onChange="geometryDroneOnChange ()">
                                <option value=""> - </option>
                                <option value='6FF7460B-0193-4EA3-A6FE-9A9BB6034091' img='/images/drone_geometry/Drone-Geometry-SINGLECoaxial.png'  >Dual Rotor Coaxial</option><option value='40683EE3-F47D-4C8F-BB93-0DDFFC5FE0BB' img='/images/drone_geometry/Drone-Geometry-FIXEDWING-1.png'  >Fixed Wing 1</option><option value='9F077A70-FE44-4B01-92EE-885330B17650' img='/images/drone_geometry/Drone-Geometry-FIXEDWING-2.png'  >Fixed Wing 2</option><option value='B0B837ED-958A-407B-B24E-A1F79E97385B' img='/images/drone_geometry/Drone-Geometry-FIXESWING-3.png'  >Fixed Wing 3</option><option value='0CAF09F1-4666-4BB2-9EB7-404B8041544F' img='/images/drone_geometry/Drone-Geometry-HEXAPlus.png'  >Hexa +</option><option value='C6D63AF6-F81F-4FD8-8E01-F97DFCEF4DC5' img='/images/drone_geometry/Drone-Geometry-HEXAX.png'  >Hexa X</option><option value='5EEC67D6-9357-4DDF-977F-228B6A946890' img='/images/drone_geometry/Drone-Geometry-OCTAPlus.png'  >Octa +</option><option value='CE3245F1-60EC-4DDB-9BAB-2AE686129ABE' img='/images/drone_geometry/Drone-Geometry-OCTAV.png'  >Octa V</option><option value='F941FE3E-6C0E-46E5-B8FA-9D9DEC13A54A' img='/images/drone_geometry/Drone-Geometry-OCTAX.png'  >Octa X</option><option value='F9BCE067-03D4-4E29-83B8-FD4F6CEAA904' img='/images/drone_geometry/Drone-Geometry-QUADPlus.png'  >Quad +</option><option value='D7B47A4E-8DE5-4832-9071-80FEBF335DAE' img='/images/drone_geometry/Drone-Geometry-QUADX.png'  >Quad X</option><option value='B5D61843-C120-4224-BCD3-30019DD27428' img='/images/drone_geometry/Drone-Geometry-QUADX-DJI.png'  >Quad X DJI</option><option value='1E53327A-28FE-4555-9FDF-DB83131C5AC1' img='/images/drone_geometry/Drone-Geometry-SINGLE.png'  >Single Rotor</option><option value='176ED1F4-1B64-4018-A914-0F2B834CDC44' img='/images/drone_geometry/Drone-Geometry-TRI.png'  >Tri</option><option value='F08F7203-022A-4B8B-A50E-88787F2418D9' img='/images/drone_geometry/Drone-Geometry-VTOL-1.png'  >VTOL 1</option><option value='96E46375-F5C6-4FD1-A54A-872BA6611905' img='/images/drone_geometry/Drone-Geometry-VTOL-2.png'  >VTOL 2</option><option value='3C3A3F62-4AC5-4562-8074-3E4BD59F12BD' img='/images/drone_geometry/Drone-Geometry-VTOL-3.png'  >VTOL 3</option><option value='2BE29650-9DAE-407E-A6C6-8F302899360A' img='/images/drone_geometry/Drone-Geometry-VTOL-4.png'  >VTOL 4</option><option value='AC5DEF74-4017-42D5-8FFF-C59DEDA609A8' img='/images/drone_geometry/Drone-Geometry-X8Coaxial.png'  >X8 Coaxial</option><option value='5E555205-3F28-4065-B8D7-0F5DE02D6E94' img='/images/drone_geometry/Drone-Geometry-Y6Coaxial.png'  >Y6 Coaxial</option>                            </select>
                            <img id="geometryImg" src="/_static/images/blank.png" width="65%"/>
                            <script>
                                geometryDroneOnChange ();
                                function geometryDroneOnChange () {
                                    var imgUrl = $( "#geometryGUID option:selected" ).attr("img");
                                    if (imgUrl!=undefined)
                                        $("#geometryImg").attr("src",imgUrl);
                                }
                            </script>
                        </div>
                        <div class="divider"></div>
                        <div class="field">
                            <label>Inventory / Asset #</label>
                            <input type="text" id="inventoryNumber" name="inventoryNumber" placeholder="Inventory" value=""/>
                            <div id="inventoryQRCode" class="barcodePreview" align="center" style="padding-left: 0px; margin-top: 40px;"></div>
                        </div>
                    </div>
                    <div class="fields-container one">
                        <div class="field">
                            <label>Description</label>
                            <textarea rows="4" id="notes" name="notes"></textarea>
                        </div>
                    </div>

                    <div class="fields-container one">
                        <div class="field">
                            <label>Tags</label>
                            <input id='tagsDroneInput' name='tagsDroneInput' class="" value=""/>
							<script>
								var data = [];
								var items = data.map(function(x) { return { item: x }; });

								$('#addDronePopup #tagsDroneInput').selectize({
									delimiter: '; ',
									persist: true,
									maxItems: null,
									options: items,
									labelField: "item",
									valueField: "item",
									sortField: "item",
									searchField: "item",
									create: true
								});

															</script>
                        </div>

                </div>
                <!--div class="button-container two">
                    <div class="button back">Back</div>
                    <div class="button next">Next</div>
                </div-->
            </fieldset>

            <fieldset id="drone_extra_block" class="nav-block fields three">
                <div class="add-fields">
                    <div class="title">Extra Information</div>
                                        <div class="fields-container two">
                        <div class="field" style="width: 100%">
                            <label>Owner</label>
                            <select id="owner" name="owner">
                            <option  value='52273'>Flight Dev</option><option  value='148189'>Manufacturing</option>                            </select>
                            <script>$('#owner').selectize({ create: true, sortField: 'text', allowEmptyOption: true } ); 
                                 
                                var $select = $('#owner').selectize(); var control = $select[0].selectize; control.clear();
                                                            </script>
                        </div>

                        
                                                
                    </div>
                    
                    <div class="fields-container four">

                        <div class="field">
                            <label>Firmware Version</label>
                            <input type="text" id="firmwareVersion" name="firmwareVersion" placeholder="Firmware version" value=""/>
                        </div>
                        <div class="field">
                            <label>Hardware Version</label>
                            <input type="text" id="hardwareVersion" name="hardwareVersion" placeholder="Hardware version" value=""/>
                        </div>
                        <div class="field">
                            <label>Propulsion Type</label>
                            <select id="propulsionType" name="propulsionType">
                                <option value="ELECTRIC" >Electric</option>
                                <option value="FUEL" >Fuel</option>
                                <option value="HYDROGEN" >Hydrogen</option>
                                <option value="HYBRID" >Hybrid</option>
                                <option value="TURBINE" >Turbine</option>
                            </select>
                        </div>
                        <div class="field" style="width: auto;">
                            <label>Max Payload Capacity</label>
                            <input type="text" id="payloadCapacity" name="payloadCapacity" class="numbersOnly" style="width:50px;" placeholder="" value="0"/>
                        </div>
                    </div>

                    <div class="fields-container one">
                        <div class="field" style="width: auto;">
                            <label>Weight (Kg)</label>
                            <input type="text" id="weight" name="weight" class="numbersOnly" style="width:50px;" placeholder="" value="0"/>
                        </div>
                        <div class="field" style="width: auto;">
                            <label>Color</label>
                            <input type="text" id="color" name="color" style="width:120px;" placeholder="" value=""/>
                        </div>
                        <div class="field" style="width: auto;">
                            <label>Max Speed (m/s)</label>
                            <input type="text" id="maxHorizontalSpeed" name="maxHorizontalSpeed" class="numbersOnly" style="width:50px;" placeholder="" value="0"/>
                        </div>
                        <div class="field" style="width: auto;">
                            <label>Max Vertical Speed (m/s)</label>
                            <input type="text" id="maxVerticalSpeed" name="maxVerticalSpeed" class="numbersOnly" style="width:50px;" placeholder="" value="0"/>
                        </div>
                        <div class="field" style="width: auto;">
                            <label>Max Flight Time</label>
                            <input type="hidden" id="maxFlightTime" name="maxFlightTime" value="0">
                                                        <input type="text" id="maxFlightTime_H" name="maxFlightTime_H" class="numbersOnly" style="width:50px;" value="0" onChange="changeMaxFlightTime()"/>
                            <input type="text" id="maxFlightTime_M" name="maxFlightTime_M" class="numbersOnly" style="width:50px;" value="0" onChange="changeMaxFlightTime()"/>
                            <input type="text" id="maxFlightTime_S" name="maxFlightTime_S" class="numbersOnly" style="width:50px;" value="0" onChange="changeMaxFlightTime()"/>
                            <h4 style="margin:0;">Format: hours:min:sec</h4>
                            <script> function changeMaxFlightTime() { $("#maxFlightTime").val($("#maxFlightTime_H").val()*60*60 + $("#maxFlightTime_M").val()*60 + $("#maxFlightTime_S").val()*1); }</script>
                        </div>
                    </div>

                    <div class="fields-container four">
                        <div class="field" style="width: auto;">
                            <label>Out of Sight Distance</label>
                            <input type="text" id="minBvlosDistance" name="minBvlosDistance" class="numbersOnly" value="0">
                        </div>
                        <div class="field">
                            <label>Purchase Date</label>
                            <input type="text" id="purchaseDate" name="purchaseDate" value="">
                        </div>
                        <div class="field">
                            <label>Insurable Value</label>
                            <input type="text" id="insurableValue" name="insurableValue" class="numbersOnly" value="0">
                        </div>
                        <div class="field">
                            <label>&nbsp;</label>
                            <input type="checkbox" class="checkbox" name="loanerDrone" id="loanerDrone" >&nbsp;&nbsp;Loaner Drone                        </div>
                    </div>

                    <div class="fields-container three">
                        <div class="field" style="width: auto;">
                            <label>Initial Flight #</label>
                            <input type="text" id="initialFlightNb" name="initialFlightNb" class="numbersOnly" value="0">
                        </div>
                        <div class="field">
                            <label>Initial Flight Time</label>
                            <input type="hidden" id="initialFlightTimeSeconds" name="initialFlightTimeSeconds" value="0">
                                                        <input type="text" id="initialFlightTime_H" name="initialFlightTime_H" class="numbersOnly" style="width:50px;" value="0"/>
                            <input type="text" id="initialFlightTime_M" name="initialFlightTime_M" class="numbersOnly" style="width:50px;" value="0"/>
                            <input type="text" id="initialFlightTime_S" name="initialFlightTime_S" class="numbersOnly" style="width:50px;" value="0"/>
                            <h4 style="margin:0;">Format: hours:min:sec</h4>
                        </div>
                        <div class="field">
                            <label>&nbsp;</label>
                            <input type="checkbox" class="checkbox" name="excludeFromLegalReport" id="excludeFromLegalReport" >&nbsp;&nbsp;Excluded From Legal Report                        </div>
                    </div>
                    
                </div>

            </fieldset>

            <fieldset id="drone_connectivity_block" class="nav-block fields four">
                <div class="add-fields">
                    <div class="title">Connect</div>

                    <div class="fields-container three">
                        <div class="field">
                            <label>Remote ID</label>
                            <input type="text" id="remoteID" name="remoteID" placeholder="" value=""/>	
                        </div>
                    </div>

                    <div class="fields-container one">
                        <div class="field">
                                                        <label>Connectivity Cards</label>
                            <div style="display: flex; align-items: center;">
                                <div style="white-space: nowrap; margin-right: 10px;"><b>Slot 1: </b></div>
                                                                    <input type="text" id="simCardId1" name="simCardId1" placeholder="" value=""/>
                                                                <select id="simType1" name="simType1" style="width: 150px; margin-left: 10px;">
                                    <option value="">-</option>
                                    <option value="C2" >C2</option>
                                    <option value="Payload" >Payload</option>
                                </select>		
                            </div>   
                            
                            <div style="display: flex; align-items: center; margin-top: 15px;">
                                <div style="white-space: nowrap; margin-right: 10px;"><b>Slot 2: </b></div>
                                                                    <input type="text" id="simCardId2" name="simCardId2" placeholder="" value=""/>
                                                                <select id="simType2" name="simType2" style="width: 150px; margin-left: 10px;">
                                    <option value="">-</option>
                                    <option value="C2" >C2</option>
                                    <option value="Payload" >Payload</option>
                                </select>
                            </div>  
                        </div>
                    </div>


                </div>
            </fieldset>

            <div id="tabs_buttons" class="button-container three">
                <!--div class="button back">Back</div-->
                                <div class="button save default">Save</div>
                                                <div class="button cancel">Cancel</div> 
            </div>

        </form>
    </div>
</div>
     
<script>
$(document).ready(function() {

    $('#addDronePopup .nav-link').on('click', function() {
        var newBlock = $(this).data("target");
        selectSimpleTab (newBlock);
    });

    initDroneEditTabs();

});

function selectSimpleTab (target) {

    $("#addDronePopup .simple-tabs").show();
    $("#addDronePopup #tabs_buttons").show();

    $("#addDronePopup .nav-link").removeClass("active");
    $('#addDronePopup .nav-block').css('height', 0);
    $('#addDronePopup .nav-block').hide();

    newTab = $("#addDronePopup .simple-tabs [data-target="+target+"]");
    $(newTab).addClass("active");

    $("#addDronePopup #"+target).css('height', 'auto');
    $("#addDronePopup #"+target).show();
}

function initDroneEditTabs() {

    $('#addDronePopup .nav-link.active').each(function() {
        var newBlock = $(this).data("target");
        $("#addDronePopup #"+newBlock).css('height', 'auto');
        $("#addDronePopup #"+newBlock).show();
    });

    }


</script>
    
<link rel="stylesheet" type="text/css" href="/_static/css/inspection-details.css?v=20250925">
<link rel="stylesheet" type="text/css" href="/_static/css/inspections.css?v=20210706">
<script>

    var _CONTEXT_PROFILE=0; // 0: from Ops Inspections screens, 1: from Master Admin Profiles screens.
    var _CURRENT_PROFILE_TYPE="DRONE"; // DRONE, EQUIPMENT
    var _CURRENT_PROFILE_GUID="";
    
    function setProfileContext (droneProfileGUID, profileType="DRONE"){
        _CONTEXT_PROFILE=1;
        _CURRENT_PROFILE_GUID=droneProfileGUID;
        _CURRENT_PROFILE_TYPE=profileType;
        if (_CURRENT_PROFILE_TYPE!="DRONE" && _CURRENT_PROFILE_TYPE!="EQUIPMENT") _CURRENT_PROFILE_TYPE="DRONE";

        $("#addPartPopup .title").html("Edit Profile Components");
        $("#addPartPopup #parNumberBlock").hide();

        $("#addInspectionPopup .title").html("Edit Profile Inspections");
        $("#moreInspectionComponentPopup #inpsectionComponentInspectedBox").show();
    }
    
    function setProfileType (profileType) {
        _CURRENT_PROFILE_TYPE=profileType;
        if (_CURRENT_PROFILE_TYPE!="DRONE" && _CURRENT_PROFILE_TYPE!="EQUIPMENT") _CURRENT_PROFILE_TYPE="DRONE";
        $('#componentActionForm #profileType').val(_CURRENT_PROFILE_TYPE);

        if (_CURRENT_PROFILE_TYPE=="EQUIPMENT") {
            $('#cloneInspectionsButton').text("Copy Components/Inspections From Another Equipment");
        }
    }

    $(document).ready(function() {

        $("#inspectionActionDate").flatpickr (
			{
				enableTime: true,
				enableSeconds: false, 
                allowInput: true,
				time_24hr: false,
				minuteIncrement: 1,
				secondIncrement: 1
			}
    	);

        $("#timeSpentEdit").flatpickr(
            {
                enableTime: true,
                noCalendar: true,
                enableSeconds: false, 
                time_24hr: true,
                minuteIncrement: 5,
                dateFormat: "H:i",
                defaultDate: "00:30"
            }
		);

        
        
        
        
            });

    function intervalType2Text (intervalType) {
        if (intervalType=="FLYING_HOURS")  return "Flying Hours";
        if (intervalType=="FLIGHTS") return "Flights";
        if (intervalType=="DAYS") return "Days";
        if (intervalType=="USED") return "Used";
        return intervalType;
    }

    function initCheckedInspectionComponent () {
        delete initCheckedInspectionComponent;
    }
    function openDroneInspection (droneId) {
        $('#componentActionForm #currentGUID').val(droneId); 
        $('#componentActionForm #action').val('ACTION_COMPONENT_EDIT'); 
        $('#componentActionForm').submit()
    }

    function closeAddDroneComponentPopup() {
        location = '';
    }

	function action_AddDroneComponent () {

        if ($("#addPartPopup #partCustomName").val()!="") compoName=$("#addPartPopup #partCustomName").val();
        else compoName=$("#addPartPopup #partSelect").val();

        if (_CURRENT_PROFILE_TYPE=="EQUIPMENT" && $("#addPartPopup #partCustomName").val()=="") {
            popupAlert ("Component Name can not be empty.", "Validation");
            return;
        }

        if (compoName=="" || compoName==null) {
            popupAlert ("Component Name can not be empty.", "Validation");
            return;
        }

        var partMultiplicator = $("#addPartPopup #partMultiplicator").val();
        if (partMultiplicator<=0) partMultiplicator=1;
        
        for (var i=1;i<=partMultiplicator;i++) {

            if (partMultiplicator>1) {
                name = compoName + " (" + i + ")";
            } 
            else {
                name=compoName; 
            }
            groupName = $("#addPartPopup #partGroupName").val();

            $.ajax({
            url: "/inspection/inspectionEditAction.php",
            type: "POST",
            data: { 
                    "action": "ACTION_ADD_COMPONENT", 
                    "currentDroneGUID": "",
                    "droneComponentGUID": $("#addPartPopup #droneComponentGUID").val(),
                    "componentName": name,
                    "groupName": groupName,
                    "serialNumber": $("#addPartPopup #partSerialNumber").val(),
                    "listOrder": $("#addPartPopup #partListOrder").val(),
                    "contextDroneProfile": _CONTEXT_PROFILE,
                    "contextProfileType": _CURRENT_PROFILE_TYPE,
                    "droneProfileItemGUID": $("#addPartPopup #droneProfileItemGUID").val(),
                    "droneProfileGUID": _CURRENT_PROFILE_GUID
                }
            }).done( function( data ) {

                if (_CONTEXT_PROFILE==0) { // From Ops Inspections screens:
                    $("#componentActionForm").submit();

                } else { // From Profiles screens:
                    $('#addDroneComponentPopup').hide(); 
                    if (_CURRENT_PROFILE_TYPE=="DRONE")
                        $("#droneProfileDetailForm").submit();
                    if (_CURRENT_PROFILE_TYPE=="EQUIPMENT")
                        $("#equipmentProfileDetailForm").submit();
                    return false;
                }

            });
        }
        if (_CONTEXT_PROFILE==0) {
            $('#addDroneComponentPopup').show(); 
        } 
        $('#addPartPopup').hide();
	    return false;
	}

    function action_DeleteDroneComponent () {

        if ($("#addPartPopup #droneComponentGUID").val()=="") return;

        popupConfirm('Confirmation','Are you sure to remove this profile part?', function(){ 
            $.ajax({
                url: "/inspection/inspectionEditAction.php",
                type: "POST",
                data: { 
                        "action": "ACTION_DELETE_COMPONENT", 
                        "currentGUID": $("#addPartPopup #droneComponentGUID").val(),
                        "contextDroneProfile": _CONTEXT_PROFILE,
                        "contextProfileType": _CURRENT_PROFILE_TYPE,
                        "droneProfileGUID": _CURRENT_PROFILE_GUID
                    }
                }).done( function( data ) {

                    if (_CONTEXT_PROFILE==0)
                        $("#componentActionForm").submit();

                    else {
                        $('#addDroneComponentPopup').hide(); 
                        if (_CURRENT_PROFILE_TYPE=="DRONE")
                            $("#droneProfileDetailForm").submit();
                        if (_CURRENT_PROFILE_TYPE=="EQUIPMENT")
                            $("#equipmentProfileDetailForm").submit();
                        return false;
                    }

                });
        });
    }

    function action_AddInspection (inspectionId) {

        
        if ($("#addInspectionPopup #inspectionName").val()=="" || $("#addInspectionPopup #inspectionIntervalValue").val()=="" || $("#addInspectionPopup #inspectionIntervalValue").val()=="0") {
            popupAlert ("Interval Value and Inspection Name can not be empty.", "Validation");
            return;
        }

        if (isNaN($("#addInspectionPopup #inspectionIntervalValue").val()) || isNaN($("#addInspectionPopup #inspectionIntervalValue2").val())) {
            popupAlert ("Interval Value is not a number.", "Validation");
            return;
        }
        if ($("#addInspectionPopup #inspectionIntervalValue").val()<=0) {
            popupAlert ("Interval Value must be greater than 0.", "Validation");
            return;
        }

        inspectionId=$("#addInspectionPopup #inspectionGUID").val();
        if (inspectionId==undefined) inspection="";
        
        if ($("#addInspectionPopup #testFlightRequired").is(":checked")) testFlightRequired=1; else testFlightRequired=0;
        inspectionIntervalValue2 = $("#addInspectionPopup #inspectionIntervalValue2").val();
        inspectionIntervalType2 = $("#addInspectionPopup #inspectionIntervalType2").val();
        if (inspectionIntervalValue2<=0 || inspectionIntervalType2=="") {
            inspectionIntervalValue2 = 0;  inspectionIntervalType2="";
        }

        $.ajax({
            url: "/inspection/inspectionEditAction.php",
            type: "POST",
            data: { 
                    "action": "ACTION_ADD_INSPECTION", 
                    "currentDroneGUID": "",
                    "inspectionGUID": inspectionId,
                    "inspectionName": $("#addInspectionPopup #inspectionName").val(),
                    "inspectionIntervalValue": $("#addInspectionPopup #inspectionIntervalValue").val(),
                    "inspectionIntervalType": $("#addInspectionPopup #inspectionIntervalType").val(),
                    "inspectionIntervalValue2": inspectionIntervalValue2,
                    "inspectionIntervalType2":  inspectionIntervalType2,
                    "testFlightRequired": testFlightRequired,
                    "contextDroneProfile": _CONTEXT_PROFILE,
                    "contextProfileType": _CURRENT_PROFILE_TYPE,
                    "droneProfileGUID": _CURRENT_PROFILE_GUID
                }
            }).done( function( data ) {

                if (_CONTEXT_PROFILE==0)
                    $("#componentActionForm").submit();

                else {
                    $('#addInspectionPopup').hide(); 
                    if (_CURRENT_PROFILE_TYPE=="DRONE")
                        $("#droneProfileDetailForm").submit();
                    if (_CURRENT_PROFILE_TYPE=="EQUIPMENT")
                        $("#equipmentProfileDetailForm").submit();
                    return false;
                }

            });
        $('#addInspectionPopup').hide();
    }

    function action_DeleteDroneInspection () {

        inspectionId=$("#addInspectionPopup #inspectionGUID").val();
        if (inspectionId==undefined || inspectionId=="") return;

        popupConfirm('Confirmation','Are you sure to remove this drone inspection?', function(){ 

            $.ajax({
            url: "/inspection/inspectionEditAction.php",
            type: "POST",
            data: { 
                    "action": "ACTION_DELETE_INSPECTION", 
                    "currentGUID": inspectionId,
                    "contextDroneProfile": _CONTEXT_PROFILE,
                    "contextProfileType": _CURRENT_PROFILE_TYPE,
                    "droneProfileGUID": _CURRENT_PROFILE_GUID
                }
            }).done( function( data ) {
                if (_CONTEXT_PROFILE==0)
                    $("#componentActionForm").submit();

                else {
                    $('#addInspectionPopup').hide(); 
                    if (_CURRENT_PROFILE_TYPE=="DRONE")
                        $("#droneProfileDetailForm").submit();
                    if (_CURRENT_PROFILE_TYPE=="EQUIPMENT")
                        $("#equipmentProfileDetailForm").submit();
                    return false;
                }
            });
        })
    }

    function action_CheckUncheckInspectionComponent (inspectionId, componentId, checkbox) {

        checked = checkbox.prop("checked");
        if (checked==true)
            action = "ACTION_ADD_INSPECTIONCOMPONENT";
        else 
            action = "ACTION_DELETE_INSPECTIONCOMPONENT";

        $.ajax({
            url: "/inspection/inspectionEditAction.php",
            type: "POST",
            data: { 
                    "action": action, 
                    "componentGUID": componentId,
                    "inspectionGUID": inspectionId,
                    "contextDroneProfile": _CONTEXT_PROFILE,
                    "contextProfileType": _CURRENT_PROFILE_TYPE,
                    "droneProfileGUID": _CURRENT_PROFILE_GUID
                }
            }).done( function( data ) {
                $("#addDroneComponentPopup .inspectComponentLine[data-component-id="+componentId+"][data-inspection-id="+inspectionId+"] .moreComponentButton").remove();
                if (checked) {
                    $("#addDroneComponentPopup .inspectComponentLine[data-component-id="+componentId+"][data-inspection-id="+inspectionId+"]").append("<div class='moreComponentButton' onClick='onEditMoreInspectionComponent(\""+inspectionId+"\", \""+componentId+"\")'>+</div>");
                } 
            });
    }

    function onEditMoreInspectionComponent (inspectionId, componentId, noPopup=false) {

        $("#moreInspectionComponentPopup #inspectionComponentReplaced").prop("checked",false); 
        $("#moreInspectionComponentPopup #inspectionComponentInspected").prop("checked",true); 
        $("#moreInspectionComponentPopup #inspectionComponentNotes").val("");
        $("#moreInspectionComponentPopup #inspectionComponentSyncGUID").val("");

        $.ajax({
            url: "/inspection/inspectionEditAction.php",
            type: "POST",
            data: { 
                    "action": "ACTION_GET_INSPECTIONCOMPONENT", 
                    "componentGUID": componentId,
                    "inspectionGUID": inspectionId,
                    "contextDroneProfile": _CONTEXT_PROFILE,
                    "contextProfileType": _CURRENT_PROFILE_TYPE,
                    "droneProfileGUID": _CURRENT_PROFILE_GUID
                }
            }).done( function( data ) {
                if (data.trim()!="") {
                    var obj = jQuery.parseJSON(data.trim());
                    if (obj.syncGUID!=undefined) {
                        $("#moreInspectionComponentPopup #inspectionComponentSyncGUID").val(obj.syncGUID);
                        $("#moreInspectionComponentPopup #inspectionComponentNotes").val(obj.notes);
                        if (obj.replaced==1) $("#moreInspectionComponentPopup #inspectionComponentReplaced").prop("checked",true); 
                        $("#moreInspectionComponentPopup #inspectionComponentInspected").prop("checked",true); 
                    }
                }

                $("#moreInspectionComponentPopup #inspectionGUID").val(inspectionId);
                $("#moreInspectionComponentPopup #componentGUID").val(componentId);
                
                if (_CONTEXT_PROFILE==1 && noPopup==true) {
                    action_UpdateComponentInspection();
                } else
                    $("#moreInspectionComponentPopup").show();
            });
    }

    function action_UpdateComponentInspection () {

        inspectionId = $("#moreInspectionComponentPopup #inspectionGUID").val();
        componentId = $("#moreInspectionComponentPopup #componentGUID").val();
        inspectionComponentSyncGUID = $("#moreInspectionComponentPopup #inspectionComponentSyncGUID").val();

        if ($("#moreInspectionComponentPopup #inspectionComponentReplaced").is(":checked")) replaced=1; else replaced=0;
        if ($("#moreInspectionComponentPopup #inspectionComponentInspected").is(":checked")) inspected=1; else inspected=0;
        notes = $("#moreInspectionComponentPopup #inspectionComponentNotes").val();

        if ($("#moreInspectionComponentPopup #inspectionComponentReplaced").is(":checked") || notes!="") {
            $(".inspectComponentLine[data-component-id="+componentId+"][data-inspection-id="+inspectionId+"] .moreComponentButton").addClass ("filled");
        } else $(".inspectComponentLine[data-component-id="+componentId+"][data-inspection-id="+inspectionId+"] .moreComponentButton").removeClass ("filled");
 
        $.ajax({
            url: "/inspection/inspectionEditAction.php",
            type: "POST",
            data: { 
                    "action": "ACTION_ADD_INSPECTIONCOMPONENT", 
                    "componentGUID": componentId,
                    "inspectionGUID": inspectionId,
                    "notes" : notes,
                    "replaced" : replaced,
                    "inspected" : inspected,
                    "inspectionComponentSyncGUID" : inspectionComponentSyncGUID,
                    "contextDroneProfile": _CONTEXT_PROFILE,
                    "contextProfileType": _CURRENT_PROFILE_TYPE,
                    "droneProfileGUID": _CURRENT_PROFILE_GUID
                }
            }).done( function( data ) {

                if (_CONTEXT_PROFILE==1) {
                    if (_CURRENT_PROFILE_TYPE=="DRONE")
                        $("#droneProfileDetailForm").submit();
                    if (_CURRENT_PROFILE_TYPE=="EQUIPMENT")
                        $("#equipmentProfileDetailForm").submit();
                }

                $('#moreInspectionComponentPopup').hide();
                
            });
    }

    function onEditInspection (currentId) {

        if (currentId!=undefined && currentId!="") {

            $("#addInspectionPopup #inspectionGUID").val(currentId);

            $("#addInspectionPopup #deleteButton").show();
            $("#addInspectionPopup #saveButton").show();
            $("#addInspectionPopup #addButton").hide();

            var mainContainer = "#addDroneComponentPopup";
            if (_CONTEXT_PROFILE==1) mainContainer = "#viewMainInspection #viewInspectionContainer";

            $("#addInspectionPopup #inspectionIntervalValue").val($(mainContainer + " .inspection[data-id="+currentId+"]").attr("data-intervalvalue"));
            $("#addInspectionPopup #inspectionIntervalType").val($(mainContainer + " .inspection[data-id="+currentId+"]").attr("data-intervaltype"));
            $("#addInspectionPopup #inspectionIntervalValue2").val($(mainContainer + " .inspection[data-id="+currentId+"]").attr("data-intervalvalue2"));
            $("#addInspectionPopup #inspectionIntervalType2").val($(mainContainer + " .inspection[data-id="+currentId+"]").attr("data-intervaltype2"));
            if ($(mainContainer + " .inspection[data-id="+currentId+"]").attr("data-testflightrequired")==1) $("#addInspectionPopup #testFlightRequired").prop("checked",true); else $("#addInspectionPopup #testFlightRequired").prop("checked",false);

            $("#addInspectionPopup #inspectionName").val($(mainContainer + " .inspection[data-id="+currentId+"] .inspectionName").text());

        } else {

            $("#addInspectionPopup #inspectionGUID").val("");

            $("#addInspectionPopup #deleteButton").hide();
            $("#addInspectionPopup #saveButton").hide();
            $("#addInspectionPopup #addButton").show();
            $("#addInspectionPopup #inspectionIntervalValue").val(20);
            $("#addInspectionPopup #inspectionIntervalValue2").val();
            $("#addInspectionPopup #inspectionIntervalType2").val();
            $("#addInspectionPopup #testFlightRequired").prop("checked",false);
            
            $("#addInspectionPopup #inspectionName").val("");
        }

        $('#addInspectionPopup').show();
    }

    function onEditPart (currentId) {

        $("#addPartPopup #componentNameBlock").show();
        $("#addPartPopup #deleteButton").show();

        if (currentId!=undefined && currentId!="") {

            $("#addPartPopup #droneComponentGUID").val(currentId);

            $("#addPartPopup #deleteButton").show();
            $("#addPartPopup #saveButton").text("Update");

            var mainContainer = "#addDroneComponentPopup";
            if (_CONTEXT_PROFILE==1) mainContainer = "#viewMainInspection .droneComponentsContainer";

            $("#addPartPopup #partCustomName").val($(mainContainer + " .componentDronePart[data-id="+currentId+"] .partname").text());
            $("#addPartPopup #partListOrder").val($(mainContainer + " .componentDronePart[data-id="+currentId+"]").attr("data-order"));
            $("#addPartPopup #partSerialNumber").val($(mainContainer + " .componentDronePart[data-id="+currentId+"]").attr("data-serialNb"));
            $("#addPartPopup #droneProfileItemGUID").val($(mainContainer + " .componentDronePart[data-id="+currentId+"]").attr("data-profileid"));

            if (_CONTEXT_PROFILE==0 && $(mainContainer + " .componentDronePart[data-id="+currentId+"]").attr("data-profileid")!="") {
                $("#addPartPopup #componentNameBlock").hide();
                $("#addPartPopup #deleteButton").hide();
            }

            var _groupName=$(mainContainer + " .componentDronePart[data-id="+currentId+"]").attr("data-groupName");
            //if (_groupName=="" || _groupName==null) _groupName=$(mainContainer + " .componentDronePart[data-id="+currentId+"] .partname").text();

            var selectize_groupName = $("#addPartPopup #partGroupName")[0].selectize;
            if (_groupName!="") {
                selectize_groupName.addOption({value: _groupName, text: _groupName});
                selectize_groupName.addItem(_groupName);
            }
            else selectize_groupName.clear();

        } else {

            $("#addPartPopup #droneComponentGUID").val("");
            $("#addPartPopup #deleteButton").hide();
            $("#addPartPopup #saveButton").text("Add");

            $("#addPartPopup #partCustomName").val("");
            $("#addPartPopup #partListOrder").val(1);
            $("#addPartPopup #partSerialNumber").val("");
        }

        if (_CURRENT_PROFILE_TYPE=="EQUIPMENT") {
            $("#addPartPopup #componentTypeBlock").hide();
            $("#addPartPopup #componentNameBlock>label").text("Name");
            $("#addPartPopup #componentNameBlock").css("width","58% !important");
        }

        $('#addPartPopup').show();
    }
    
// ************* Clone inspections **********
    function showDroneComponentCloneBox () {
        $("#droneCloneTargetId").val('');
        $("#droneCloneTargetName").html("");
        $('#cloneDroneInspectionPopup').show();
    }

    function action_CloneFromDrone () {
        sourceDroneId = $("#existingComponentDroneList option:selected").val();
        if (sourceDroneId=="") {
            return;
        }
        popupConfirm('Confirmation','Are you sure to copy "'+$("#existingComponentDroneList option:selected").text()+'" components and inspections to the target item : "'+$("#droneCloneTargetName").text()+'"?', function(){ 
            $.ajax({
                url: "/inspection/inspectionEditAction.php",
                type: "POST",
                data: { 
                        "action": "ACTION_COPY_INSPECTIONS_FROM_OTHER", 
                        "currentDroneGUID": sourceDroneId,
                        "targetDroneGUID": $("#droneCloneTargetId").val(),
                        "contextProfileType": _CURRENT_PROFILE_TYPE
                    }
                }).done( function( data ) {
                    $('#cloneDroneInspectionPopup').hide();
                    window.location = "";
                });
        });
    }

    function action_AddInspectionAction (){

        inspectionActionId = $("#editInspectionActionPopup #inspectionActionGUID").val();

        hasIssue = $("#editInspectionActionPopup #inspectionActionHasIssue").is(":checked");
		if (hasIssue) hasIssue=1; else hasIssue=0;

        replaced = $("#editInspectionActionPopup #inspectionActionReplaced").is(":checked");
		if (replaced) replaced=1; else replaced=0;

        status = $("#editInspectionActionPopup #inspectionActionStatus").val();
        inspectionDate = $("#editInspectionActionPopup #inspectionActionDate").val();

        // Time Spent:
		timeSpent = $("#timeSpentEdit").val();
		var timeSpentArr = timeSpent.split(":");
		var timeSpentSeconds = 0;
		if (timeSpentArr.length==2)
			timeSpentSeconds=parseInt(timeSpentArr[0])*3600+parseInt(timeSpentArr[1])*60;
		$("#timeSpentEdit").val(timeSpentSeconds);

        $.ajax({
            url: "/inspection/inspectionEditAction.php",
            type: "POST",
            data: { 
                    "action" : "ACTION_EDIT_INSPECTIONACTION", 
                    "currentInventoryItemGUID": "",
                    "contextProfileType": _CURRENT_PROFILE_TYPE,
                    "inspectionActionGUID": inspectionActionId,
                    "notes" : $("#editInspectionActionPopup #inspectionActionNotes").val(),
                    "replaced" : replaced,
                    "hasIssue" : hasIssue,
                    "status" : status,
                    "replaceCurrentSerialNumber": $("#editInspectionActionPopup #replaceCurrentSerialNumber").val(), 
                    "replaceNewSerialNumber": $("#editInspectionActionPopup #replaceNewSerialNumber").val(),
                    "maintenanceGUID": $("#editInspectionActionPopup #inspectionActionMaintenanceGUID").val(),
                    "hardwareVersion": $("#editInspectionActionPopup #hardwareVersion").val(),
                    "firmwareVersion": $("#editInspectionActionPopup #firmwareVersion").val(),
                    "expenseAmount": $("#editInspectionActionPopup #expenseAmount").val(),
                    "expenseCurrency": $("#editInspectionActionPopup #expenseCurrency").val(),
                    "inspectionDate" : inspectionDate, 
                    "timeSpent" :  $("#timeSpentEdit").val()
                }
            }).done( function( data ) {
                location = '';
            });
    }

    function action_DeleteInspectionAction () {

        popupConfirm('Confirmation','Are you sure to delete this inspection task?', function(){ 
            inspectionActionId = $("#editInspectionActionPopup #inspectionActionGUID").val();
            $.ajax({
                url: "/inspection/inspectionEditAction.php",
                type: "POST",
                data: { 
                        "action": "ACTION_DELETE_INSPECTIONACTION", 
                        "inspectionActionGUID": inspectionActionId
                    }
                }).done( function( data ) {
                    location = '';
                });
        });
    }

function onCreateProfile () {

        popupAlert('There is no configuration to save as profile.');
    return;
    
    popupConfirm ('Confirmation','Are you sure to create a Profile from this configuration?', function(){ 

        $('#componentActionForm #profileType').val(_CURRENT_PROFILE_TYPE);
        $('#componentActionForm #action').val('ACTION_COMPONENT_CREATEPROFILE'); 
        $('#componentActionForm').submit();
    });
}

function  unLinkDroneFromProfile (droneId) {
    popupConfirm ('Confirmation','Are you sure to unlink this drone from its profile?', function(){
        $.ajax({
            url:"/inventory/droneProfileEditAction.php",
            type: "POST",
            data: {
                    "action": "ACTION_UNLINK_DRONE_FROM_PROFILE",
                    "droneGUID": droneId
            }
            }).done(function( data ) {
                location = '';
            });
    })
}

</script>       

<!-- ************************************ -->
<div id="addDroneComponentPopup" class="pop-up add" >
    <div class="dimmer"></div>
    <div class="content-container" style="height: 90vh; min-height: 760px;">
        <div class="close" onClick='closeAddDroneComponentPopup()'></div>
        <form  method="post" id="componentActionForm" name="componentActionForm">
            <input type="hidden" name="action" id="action" value="ACTION_COMPONENT_EDIT"/>
            <input type="hidden" name="currentGUID" id="currentGUID" value=""/>
            <input type="hidden" name="profileType" id="profileType" value="DRONE"/>

            <fieldset class="fields one">
                <div class="add-fields">
                    <div class="title" style="">Components & Inspections Configuration</div>
                    <!--div class="subtitle"><b>Item : </b></div-->

                    <div style="margin-bottom: 85px;">
                        <a id="cloneInspectionsButton" href="#" class="square-button" style="background-color: #000;" onClick="$('#componentActionForm #action').val('ACTION_COMPONENT_CLONE'); $('#componentActionForm').submit()" >Copy Components/Inspections From Another Drone</a>&nbsp;
                        <a id="createProfileButton" href="#" class="square-button" style="display: none; background-color: #000;" onClick="onCreateProfile ()" >Create Profile</a>
                        <a id="unlinkProfileButton" href="#" class="square-button" style="display: none; background-color: #000;" onClick="unLinkDroneFromProfile ('')" >Unlink Profile</a> 
                    </div>

                    <div style="margin-top: 20px;margin-bottom: 10px;">
                        <a class="square-button" onClick="onEditPart();">Add Component</a>
                        <a style="margin-left: 5px;" class="square-button" onClick="onEditInspection()">Add Inspection</a>
                    </div>

                    <div style="position: relative">
                        <div class="scrollViewComponents">
                            <div class="droneComponentsContainer">
                                                        </div>

                            <div class="inspectionsContainer">
                                                        
                            </div>
                        </div>
                    </div>
                    
                </div>
                <div class="button-container one">
                    <div class="button cancel" onClick='closeAddDroneComponentPopup()'>Close</div> 
                </div>
            </fieldset>
        </form>
    </div>
</div>
     
<!-- ************************************ -->
<div id="addPartPopup" class="pop-up add">
    <input type="hidden" id="droneComponentGUID" name="droneComponentGUID" value=""/>        
    <input type="hidden" id="droneProfileItemGUID" name="droneProfileItemGUID" value=""/>       

    <div class="dimmer"></div>
    <div class="content-container">
            <fieldset class="fields one"> 
                <div class="add-fields">
                    <div class="title">Set Component to: <b></b></div>

                    <div id="componentNameBlock" class="fields-container three">
                        <div id="componentTypeBlock" class="field" style="width: 35%;">
                            <label>Component Type</label>
                            <select id="partSelect" onChange="$('#partCustomName').val($('#partSelect').val());">
                            <option value="Antenna">Antenna</option><option value="Arm">Arm</option><option value="Boom">Boom</option><option value="Camera">Camera</option><option value="CCW Propeller">CCW Propeller</option><option value="CW Propeller">CW Propeller</option><option value="Electronic Speed Controller (ESC)">Electronic Speed Controller (ESC)</option><option value="Firmware">Firmware</option><option value="Flight Controller">Flight Controller</option><option value="Flight Log">Flight Log</option><option value="Frame">Frame</option><option value="Gimbal">Gimbal</option><option value="Gimbal Controller">Gimbal Controller</option><option value="Gimbal Motor">Gimbal Motor</option><option value="GPS Module">GPS Module</option><option value="Landing Gear">Landing Gear</option><option value="Modem">Modem</option><option value="Motor">Motor</option><option value="Motor Mounting">Motor Mounting</option><option value="Other">Other</option><option value="Payload">Payload</option><option value="Prop Adapter">Prop Adapter</option><option value="Propeller">Propeller</option><option value="Receiver">Receiver</option><option value="Sensor">Sensor</option><option value="Servos">Servos</option><option value="Telemetry">Telemetry</option><option value="Transmitter">Transmitter</option><option value="Wings">Wings</option><option value="Wiring">Wiring</option>                            </select>   
                        </div>

                        <div id="componentNameBlock" class="field" style="width: 25%;">
                            <label>Custom Name</label>
                            <input id="partCustomName" name="partCustomName" value="Antenna"/>
                        </div>

                        <div class="field" style="width: 25%;">
                            <label>Group</label>
                            <select id="partGroupName" name="partGroupName">
                                <option value="">-</option>
                                                            </select>
                            <script>
                                 var partGroupNameSelectize = $('#partGroupName').selectize({
                                    create: true,
                                    sortField: 'text'
                                });
                            </script>
                        </div>

                        <div class="field" style="width: 5%;">
                            <label>Order</label>
                            <input id="partListOrder" name="partListOrder" value="1"/>
                        </div>

                        <!--div class="field" style="width: 15%;">
                            <label>Units #</label>
                            <input id="partMultiplicator" name="partMultiplicator" value="1"/>
                        </div-->
                        <input type="hidden" id="partMultiplicator" name="partMultiplicator" value="1"/>

                    </div>

                    <div id="parNumberBlock" class="fields-container two" style="margin-top: 20px;">
                        <div class="field" style="">
                            <label>Part Serial Number</label>
                            <input id="partSerialNumber" name="partSerialNumber"/>
                        </div>
                        <div class="field">
                            <label style="height: 20px;">&nbsp;</label>
                            <span>Serial number should be updated during inspection task component replacement.</span>
                        </div>
                    </div>
                    
                </div>
                <div class="button-container one">
                    <div id="saveButton" class="button" onClick="action_AddDroneComponent()">Add</div> 
                    <div id="deleteButton" class="button" onClick="action_DeleteDroneComponent()">Delete</div> 
                    <div class="button default" onClick="$('#addPartPopup').hide()">Cancel</div> 
                </div>
            </fieldset>
    </div>
</div>

<!-- ************************************ -->
<div id="addInspectionPopup" class="pop-up add">
    <div class="dimmer"></div>
    <div class="content-container">
            <fieldset class="fields one"> 
                <div class="add-fields">
                    <div class="title">Set Inspection to: <b></b></div>

                    <div class="fields-container three">
                        <div class="field" style="width: 35%;">
                            <label>Inspection Name</label>
                            <input id="inspectionName" name="inspectionName" value=""/>  
                        </div>

                        <div class="field" style="width: 27%;">
                            <label>Latest After Interval Value</label>
                            <input id="inspectionIntervalValue" name="inspectionIntervalValue" value="20" class="numbersOnly"/>
                        </div>

                        <div class="field" style="width: 33%;">
                            <label>Interval Type</label>
                            <select id="inspectionIntervalType" name="inspectionIntervalType" >
                                <option value="FLYING_HOURS">Flying Hours</option>
                                <option value="FLIGHTS">Flights</option>
                                <option value="DAYS">Days</option>
                                <!--option value="USED">Deployed/Used (eg. Parachute)</option-->
                            </select>
                        </div>
                    </div>
                    <div class="fields-container three" style="margin-top: 20px;">
                        <div class="field" style="width: 35%;"> 
                            <label>&nbsp;</label>
                            <div align="right" style=" font-size: 18px; color: #333; font-weight: 500;">OR, whatever comes first : </div>
                        </div>

                        <div class="field" style="width: 27%;">
                            <label>Latest After Interval Value</label>
                            <input id="inspectionIntervalValue2" name="inspectionIntervalValue2" value="" class="numbersOnly"/>
                        </div>

                        <div class="field" style="width: 33%;">
                            <label>Interval Type</label>
                            <select id="inspectionIntervalType2" name="inspectionIntervalType2" >
                                <option value=""></option>
                                <option value="FLYING_HOURS">Flying Hours</option>
                                <option value="FLIGHTS">Flights</option>
                                <option value="DAYS">Days</option>
                                <!--option value="USED">Deployed/Used (eg. Parachute)</option-->
                            </select>
                        </div>
                    </div>
                    <div class="fields-container one" style="margin-top: 20px;">
                        <div class="field" style="width: 35%;"> 
                            <label>&nbsp;</label>
                            <div style=" font-size: 18px; color: #333;"><input type="checkbox" class="checkbox" id="testFlightRequired" name="testFlightRequired"/>&nbsp;Test Flight Required </div>
                        </div> 
                    </div>
                    
                </div>
                <div class="button-container one">
                    <input type="hidden" id="inspectionGUID" name="inspectionGUID" value=""/>
                    <div id="addButton" class="button" onClick="action_AddInspection()">Add</div> 
                    <div id="saveButton" class="button" onClick="action_AddInspection()">Update</div> 
                    <div id="deleteButton" class="button" onClick="action_DeleteDroneInspection()">Delete</div> 
                    <div class="button default" onClick="$('#addInspectionPopup').hide()">Cancel</div> 
                </div>
            </fieldset>
    </div>
</div>

<!-- ************************************ -->
<div id="moreInspectionComponentPopup" class="pop-up add"> 
    <div class="dimmer"></div>
    <div class="content-container">
            <fieldset class="fields one"> 
                <div class="add-fields">
                    <div class="title">Component Inspection Details</div>

                    <div class="fields-container two">

                        <div id="inpsectionComponentInspectedBox" class="field" style="display:none;">
                            <label>&nbsp;</label>
                            <div style=" font-size: 18px; color: #333;"><input type="checkbox" class="checkbox" id="inspectionComponentInspected" name="inspectionComponentInspected"/>&nbsp;Inspected.</div>  
                        </div> 

                        <div class="field">
                            <label>&nbsp;</label>
                            <div style=" font-size: 18px; color: #333;"><input type="checkbox" class="checkbox" id="inspectionComponentReplaced" name="inspectionComponentReplaced"/>&nbsp;Need to be replaced.</div>  
                        </div>   
                    </div>

                    <div class="fields-container one" style="margin-top: 20px;">
                        <div class="field"> 
                            <label>Notes</label>
                            <textarea rows="6" id="inspectionComponentNotes" name="inspectionComponentNotes"></textarea>
                        </div> 
                    </div>
                    
                </div>
                <div class="button-container one">
                    <input type="hidden" id="inspectionComponentSyncGUID" name="inspectionComponentSyncGUID" value=""/>
                    <input type="hidden" id="inspectionGUID" name="inspectionGUID" value=""/>
                    <input type="hidden" id="componentGUID" name="componentGUID" value=""/>

                    <div class="button" onClick="action_UpdateComponentInspection()">Update</div> 
                    <div class="button default" onClick="$('#moreInspectionComponentPopup').hide()">Cancel</div> 
                </div>
            </fieldset>
    </div>
</div>

<!-- ************************************ -->
<div id="cloneDroneInspectionPopup" class="pop-up add">
    <div class="dimmer"></div>
    <div class="content-container">
            <fieldset class="fields one"> 
                <div class="add-fields">
                    <div class="title">Copy Component and Inspection</b></div>

                    <div class="fields-container two">

                        <div class="field" style="width: 50%;">
                            <label>Existing Item With Components/Inspections</label>
                            <select id="existingComponentDroneList">
                                                        </select>
                        </div>

                        <div class="field" style="width: 40%;">
                            <label>Copy to Target Item</label>
                            <input type="hidden" id="droneCloneTargetId" value=""/>
                            <span id="droneCloneTargetName" style="font-size: 1.1em;"></span>
                        </div>
        
                    </div>
                    
                </div>
                <div class="button-container one">
                    <div id="addButton" class="button" onClick="action_CloneFromDrone()">Copy</div> 
                    <div class="button default" onClick="$('#cloneDroneInspectionPopup').hide()">Cancel</div> 
                </div>
            </fieldset>
    </div>
</div>

<!-- ************************************ -->
<div id="editInspectionActionPopup" class="pop-up add">
    <div class="dimmer"></div>
    <div class="content-container">
            <fieldset class="fields one"> 
                <div class="add-fields">
                    <div class="title">Update Inspection Task</div>

                    <div class="fields-container one" style="margin-bottom: 40px;">
                        <div class="field">
                            <label>Inspection / Component</label>
                            <b style="font-size: 20px;"> / </b>
                        </div>
                    </div>

                    <div class="fields-container five">
                        <div class="field">
                            <label>Inspection Date</label>
                            <input id="inspectionActionDate" name="inspectionActionDate" type="text" value="" style="width: 150px;"/>
                        </div>

                        <div class="field">
                            <label>Status</label>
                            <select id="inspectionActionStatus">
							    <option value="0" selected>Completed</option>
							    <option value="1" >In Progress</option>
							</select>
                        </div>
                        
                        <div class="field">
                            <label>Replaced</label>
                            <input class="checkbox" type="checkbox" id="inspectionActionReplaced"  onChange="if ($(this).prop('checked')==true) $('#replacementSerialNumberBlock').show(); else $('#replacementSerialNumberBlock').hide();" />
                        </div>

                        <div class="field">
                            <label>Has Maintenance</label>
                            <input type="hidden" id="inspectionActionMaintenanceGUID" name="inspectionActionMaintenanceGUID" value=""/>
                            <input class="checkbox" type="checkbox" id="inspectionActionHasIssue"  />  
                        </div>

                        <div class="field">
                            <label>Time Spent</label>
                            <input type="text" class="" id="timeSpentEdit" name="timeSpentEdit" style="text-align: center; width: 110px; height: 30px;" value=""/>
                                                    </div>
                    </div>

                    <div id="replacementSerialNumberBlock" class="fields-container two" style="margin-top: 20px; display: none;">
                        <div class="field"> 
                            <label>Previous Serial Number</label>
                            <input id="replaceCurrentSerialNumber" name="replaceCurrentSerialNumber" type="text" value=""/>
                        </div>
                        <div class="field"> 
                            <label>New Serial Number</label>
                            <input id="replaceNewSerialNumber" name="replaceNewSerialNumber" type="text" value=""/>
                        </div>
                    </div>

                    <div class="fields-container four">
                        <div class="field">
                            <label>Firmware Version</label>
                            <input type="text" id="firmwareVersion" name="firmwareVersion" placeholder="Firmware version" value=""/>
                        </div>
                        <div class="field">
                            <label>Hardware Version</label>
                            <input type="text" id="hardwareVersion" name="hardwareVersion" placeholder="Hardware version" value=""/>
                        </div>
                        <div class="field">
                            <label>Expense Cost</label>
                            <input type="text" id="expenseAmount" name="expenseAmount" value=""/>
                        </div>
                        <div class="field">
                            <label>Currency</label>
                            <input type="text" id="expenseCurrency" name="expenseCurrency" value="" style="width:80px;"/>
                        </div>
                    </div>

                    <div class="fields-container one" style="margin-top: 20px;">
                        <div class="field"> 
                            <label>Notes</label>
                            <textarea id="inspectionActionNotes" type="text" class="text" style="font-size: 14px; height: 130px;" rows="2"></textarea>
                        </div>
                    </div>
                    
                </div>
                <div class="button-container one">
                    <input type="hidden" id="inspectionActionGUID" name="inspectionActionGUID" value=""/>
                    <div id="saveButton" class="button" onClick="action_AddInspectionAction()">Update</div> 
                    <div id="deleteButton" class="button" onClick="action_DeleteInspectionAction()">Delete</div> 
                    <div class="button default" onClick="$('#editInspectionActionPopup').hide()">Cancel</div> 
                </div>
            </fieldset>
    </div>
</div>

<!-- ************************************ -->
<script>
    function showDroneComponentInspectionStatusInfo(state, state2='', replacementState='', replacementState2='') {

        if (state.componentName!="" && state.componentName!=undefined)
            $("#componentInspectionStatusPopup .title").html(state.componentName + "<br/><span style='font-size: 18px;'>"+ state.inspectionName+"</span>");

        var singleColumn=true;

        // Inspection Trigger 1:
        $("#componentInspectionStatusPopup #inspectionTrigger").text(state.triggerValue + " " + intervalType2Text(state.metricType));
        
        if (state.diffValue==0) {
            $("#componentInspectionStatusPopup #inspectionStatus").html(state.metricValue + " " + intervalType2Text(state.metricType) + " ("+state.percentageOfTrigger+"%) Done. <b style='color: #ef5151;'>Due Today</b>.");
        } else {
            if (state.status > 1)
                $("#componentInspectionStatusPopup #inspectionStatus").text(state.metricValue + " " + intervalType2Text(state.metricType) + " ("+state.percentageOfTrigger+"%) Done. " + (state.diffValue*-1) + " Remaining.");
            else 
                $("#componentInspectionStatusPopup #inspectionStatus").html(state.metricValue + " " + intervalType2Text(state.metricType) + " (" + state.percentageOfTrigger+"%) Done.  <b style='color: #ef5151;'>" + state.diffValue + " Overdue</b>.");
        }
        if (state.latestInspectionDate=="") {
            $("#componentInspectionStatusPopup #lastDateLabel").text("First Flight Date");
        if (state.minFlightDate=="") state.minFlightDate = "No flight."
            $("#componentInspectionStatusPopup #lastDate").text(state.minFlightDate);
        } else {
            $("#componentInspectionStatusPopup #lastDateLabel").text("Latest Inspection Date");
            $("#componentInspectionStatusPopup #lastDate").text(state.latestInspectionDate);
        }
        $("#componentInspectionStatusPopup #status").removeClass();
        $("#componentInspectionStatusPopup #status").addClass("inspectStatus");
        $("#componentInspectionStatusPopup #status").addClass("status"+state.status);
        
        // Inspection Trigger 2:
        if (state2!="" && state2!=undefined) {

            singleColumn=false;

            $("#componentInspectionStatusPopup #inspectionTrigger2").text(state2.triggerValue + " " + intervalType2Text(state2.metricType));
            if (state2.diffValue==0) {
                $("#componentInspectionStatusPopup #inspectionStatus2").html(state2.metricValue + " " + intervalType2Text(state2.metricType) + " ("+state2.percentageOfTrigger+"%) Done. <b style='color: #ef5151;'>Due Today</b>.");
            } else {
                if (state2.status > 1)
                    $("#componentInspectionStatusPopup #inspectionStatus2").text(state2.metricValue + " " + intervalType2Text(state2.metricType) + " ("+state2.percentageOfTrigger+"%) Done. " + (state2.diffValue*-1) + " Remaining.");
                else 
                    $("#componentInspectionStatusPopup #inspectionStatus2").html(state2.metricValue + " " + intervalType2Text(state2.metricType) + " (" + state2.percentageOfTrigger+"%) Done.  <b style='color: #ef5151;'>" + state2.diffValue + " Overdue</b>.");
            }
            if (state2.latestInspectionDate=="") {
                $("#componentInspectionStatusPopup #lastDateLabel2").text("First Flight Date");
                if (state2.minFlightDate=="") state2.minFlightDate = "No flight."
                $("#componentInspectionStatusPopup #lastDate2").text(state2.minFlightDate);
            } else {
                $("#componentInspectionStatusPopup #lastDateLabel2").text("Latest Inspection Date");
                $("#componentInspectionStatusPopup #lastDate2").text(state2.latestInspectionDate);
            }
            $("#componentInspectionStatusPopup #status2").removeClass();
            $("#componentInspectionStatusPopup #status2").addClass("inspectStatus");
            $("#componentInspectionStatusPopup #status2").addClass("status"+state2.status);

            $("#inspectionStatusBlock2").show();

        } else $("#inspectionStatusBlock2").hide();


        // Replacement Trigger 1:
        $("#replacementInfoBlock").hide();
        if (replacementState!="" && replacementState!=undefined && replacementState.replacementNeeded==1) {

           $("#componentInspectionStatusPopup #replacementStatusBlock #inspectionTrigger").text(replacementState.triggerValue + " " + intervalType2Text(replacementState.metricType));
           if (replacementState.diffValue==0) {
                $("#componentInspectionStatusPopup #replacementStatusBlock #inspectionStatus").html(replacementState.metricValue + " " + intervalType2Text(replacementState.metricType) + " ("+replacementState.percentageOfTrigger+"%) Done. <b style='color: #ef5151;'>Due Today</b>.");
           } else {
                if (replacementState.status > 1)
                    $("#componentInspectionStatusPopup #replacementStatusBlock #inspectionStatus").text(replacementState.metricValue + " " + intervalType2Text(replacementState.metricType) + " ("+replacementState.percentageOfTrigger+"%) Done. " + (replacementState.diffValue*-1) + " Remaining.");
                else 
                    $("#componentInspectionStatusPopup  #replacementStatusBlock #inspectionStatus").html(replacementState.metricValue + " " + intervalType2Text(replacementState.metricType) + " (" + replacementState.percentageOfTrigger+"%) Done.  <b style='color: #ef5151;'>" + replacementState.diffValue + " Overdue</b>.");
            }
            if (replacementState.latestInspectionDate=="") {
                $("#componentInspectionStatusPopup  #replacementStatusBlock #lastDateLabel").text("First Flight Date");
                if (replacementState.minFlightDate=="") replacementState.minFlightDate = "No flight."
                $("#componentInspectionStatusPopup  #replacementStatusBlock #lastDate").text(replacementState.minFlightDate);
            } else {
                $("#componentInspectionStatusPopup  #replacementStatusBlock #lastDateLabel").text("Latest Replacement Date");
                $("#componentInspectionStatusPopup  #replacementStatusBlock #lastDate").text(replacementState.latestInspectionDate);
            }
            $("#componentInspectionStatusPopup  #replacementStatusBlock #status").removeClass();
            $("#componentInspectionStatusPopup  #replacementStatusBlock #status").addClass("inspectStatus");
            $("#componentInspectionStatusPopup  #replacementStatusBlock #status").addClass("replaceStatus"+replacementState.status);

            $("#replacementStatusBlock").show();

        } else $("#replacementStatusBlock").hide();

        // Replacement Trigger 2:
        if (replacementState2!="" && replacementState2!=undefined && replacementState.replacementNeeded==1) {

            singleColumn=false;

            $("#componentInspectionStatusPopup #replacementStatusBlock2 #inspectionTrigger").text(replacementState2.triggerValue + " " + intervalType2Text(replacementState2.metricType));
            if (replacementState2.diffValue==0) {
                $("#componentInspectionStatusPopup #replacementStatusBlock2 #inspectionStatus").html(replacementState2.metricValue + " " + intervalType2Text(replacementState2.metricType) + " ("+replacementState2.percentageOfTrigger+"%) Done. <b style='color: #ef5151;'>Due Today</b>.");
            } else {
                if (replacementState2.status > 1)
                    $("#componentInspectionStatusPopup #replacementStatusBlock2 #inspectionStatus").text(replacementState2.metricValue + " " + intervalType2Text(replacementState2.metricType) + " ("+replacementState2.percentageOfTrigger+"%) Done. " + (replacementState2.diffValue*-1) + " Remaining.");
                else 
                    $("#componentInspectionStatusPopup  #replacementStatusBlock2 #inspectionStatus").html(replacementState2.metricValue + " " + intervalType2Text(replacementState2.metricType) + " (" + replacementState2.percentageOfTrigger+"%) Done. <b style='color: #ef5151;'>" + replacementState2.diffValue + " Overdue</b>.");
            }
            if (replacementState2.latestInspectionDate=="") {
                $("#componentInspectionStatusPopup  #replacementStatusBlock2 #lastDateLabel").text("First Flight Date");
                if (replacementState2.minFlightDate=="") replacementState2.minFlightDate = "No flight."
                $("#componentInspectionStatusPopup  #replacementStatusBlock2 #lastDate").text(replacementState2.minFlightDate);
            } else {
                $("#componentInspectionStatusPopup  #replacementStatusBlock2 #lastDateLabel").text("Latest Replacement Date");
                $("#componentInspectionStatusPopup  #replacementStatusBlock2 #lastDate").text(replacementState2.latestInspectionDate);
            }
            $("#componentInspectionStatusPopup  #replacementStatusBlock2 #status").removeClass();
            $("#componentInspectionStatusPopup  #replacementStatusBlock2 #status").addClass("inspectStatus");
            $("#componentInspectionStatusPopup  #replacementStatusBlock2 #status").addClass("replaceStatus"+replacementState2.status);

            $("#replacementStatusBlock2").show();

        } else $("#replacementStatusBlock2").hide();

        // Replacement Info:
        if (replacementState!="" && replacementState!=undefined && replacementState.replacementNeeded==0){

            if (replacementState.latestInspectionDate=="") {
                $("#componentInspectionStatusPopup  #replacementInfoBlock #lastDateLabel").text("First Flight Date");
                if (replacementState.minFlightDate=="") replacementState.minFlightDate = "No flight."
                $("#componentInspectionStatusPopup  #replacementInfoBlock #lastDate").text(replacementState.minFlightDate);
                $("#componentInspectionStatusPopup #replacementInfoBlock #inspectionStatus").text("Component has never been replaced.");

            } else {
                $("#componentInspectionStatusPopup  #replacementInfoBlock #lastDateLabel").text("Latest Replacement Date");
                $("#componentInspectionStatusPopup  #replacementInfoBlock #lastDate").text(replacementState.latestInspectionDate);
                $("#componentInspectionStatusPopup #replacementInfoBlock #inspectionStatus").text( "Flown " + replacementState.flightCount + " Flights / " + replacementState.flyingHours + " Flying Hours since the last replacement.");
            }

            $("#replacementInfoBlock").show();
        }

        if (singleColumn==false) {
            $("#componentInspectionStatusPopup .content-container").css("width", "800px");
            $("#componentInspectionStatusPopup .content-container").css("left", "calc(50% - 400px)");
        } else {
            $("#componentInspectionStatusPopup .content-container").css("width", "400px");
            $("#componentInspectionStatusPopup .content-container").css("left", "calc(50% - 200px)");
        }

        $("#componentInspectionStatusPopup").show();
    }
</script>

<div id="componentInspectionStatusPopup" class="pop-up add">
    <div class="dimmer"></div>
    <div class="content-container" style="top: 150px; width: 800px; border-radius: 5px; left: calc(50% - 400px);">
        <div class="close" onClick="$('#componentInspectionStatusPopup').hide()"></div>

            <fieldset class="fields one" style="width: 95%; line-height: 1.2em;">

                <div class="add-fields">

                    <div class="title" style="margin-top: 13px; font-size: 22px; line-height: 22px;"></div>


                    <!-- ********* Inspection Triggers  -->
                    <div class="fields-container two" style="margin-bottom: 10px;">

                        <div class="field" style="width: 85%; position: relative; ">

                            <div id="status" class="" style="position: absolute; width: 40px; height: 40px; border: 1px solid #909090; border-radius: 5px;"></div>
                            
                            <div style="margin-left: 50px;">
                                <label style="color: #a9a9a9;">Inspection Trigger</label>
                                <div id="inspectionTrigger" style="font-weight: 900; margin-bottom: 15px;">-</div>
                                
                                <label style="color: #a9a9a9;">Component Inspection Status</label>
                                <div id="inspectionStatus" style="font-weight: 300; margin-bottom: 15px;">-</div>

                                <label style="color: #a9a9a9;" id="lastDateLabel">Last Inspection Date</label>
                                <div id="lastDate" style="font-weight: 300; margin-bottom: 15px;">-</div>
                            </div>

                        </div>

                        <div id="inspectionStatusBlock2" class="field" style="display: none; width: 85%; border-top: 1py solid; position: relative;">

                            <div id="status2" class="" style="position: absolute; width: 40px; height: 40px; border: 1px solid #909090; border-radius: 5px;"></div>
                            
                            <div style="margin-left: 50px;">
                                <label style="color: #a9a9a9;">Inspection Trigger</label>
                                <div id="inspectionTrigger2" style="font-weight: 900; margin-bottom: 15px;">-</div>
                                
                                <label style="color: #a9a9a9;">Component Inspection Status</label>
                                <div id="inspectionStatus2" style="font-weight: 300; margin-bottom: 15px;">-</div>

                                <label style="color: #a9a9a9;" id="lastDateLabel2">Last Inspection Date</label>
                                <div id="lastDate2" style="font-weight: 300; margin-bottom: 15px;">-</div>
                            </div>

                        </div>

                    </div>  

                    <!-- ********* Replacement Triggers  -->

                    <div class="fields-container two" style="margin-bottom: 10px; padding-top: 20px; border-top: 1px solid #dedede;">

                        <div id="replacementStatusBlock" class="field" style="display: none; width: 85%; border-top: 1py solid">

                            <div id="status" class="" style="width: 40px; height: 40px; border: 1px solid #909090; border-radius: 5px;"></div>
                            
                            <div style="margin-left: 50px;">
                                <label style="color: #a9a9a9;">Replacement Trigger</label>
                                <div id="inspectionTrigger" style="font-weight: 900; margin-bottom: 15px;">-</div>
                                
                                <label style="color: #a9a9a9;">Component Replacement Status</label>
                                <div id="inspectionStatus" style="font-weight: 300; margin-bottom: 15px;">-</div>

                                <label style="color: #a9a9a9;" id="lastDateLabel">Last Replacement Date</label>
                                <div id="lastDate" style="font-weight: 300; margin-bottom: 15px;">-</div>
                            </div>

                        </div>

                        <div id="replacementStatusBlock2" class="field" style="display: none; width: 85%; border-top: 1py solid">

                            <div id="status" class="" style="width: 40px; height: 40px; border: 1px solid #909090; border-radius: 5px;"></div>
                            
                            <div style="margin-left: 50px;">
                                <label style="color: #a9a9a9;">Replacement Trigger</label>
                                <div id="inspectionTrigger" style="font-weight: 900; margin-bottom: 15px;">-</div>
                                
                                <label style="color: #a9a9a9;">Component Replacement Status</label>
                                <div id="inspectionStatus" style="font-weight: 300; margin-bottom: 15px;">-</div>

                                <label style="color: #a9a9a9;" id="lastDateLabel">Last Replacement Date</label>
                                <div id="lastDate" style="font-weight: 300; margin-bottom: 15px;">-</div>
                            </div>

                        </div>
                        
                        <div id="replacementInfoBlock" class="field" style="display: none; width: 85%; border-top: 1py solid">
                            
                            <div style="margin-left: 50px;">
                                <label style="color: #a9a9a9;">Replacement Status</label>
                            
                                <div id="inspectionStatus" style="font-weight: 300; margin-bottom: 15px;">-</div>

                                <label style="color: #a9a9a9;" id="lastDateLabel">Last Replacement Date</label>
                                <div id="lastDate" style="font-weight: 300; margin-bottom: 15px;">-</div>
                            </div>

                        </div>
                        
                    </div>  

            </fieldset>
    </div>
</div>
    <script>
		$(document).ready(function() {
			 

            
		});

        function editDroneDone(data) {

            dta = JSON.parse(data); 

            if (dta.validation_error<0) {
                popupAlert (dta.validation_msg, "Validation");
                return;
            }

			if (dta.addNew==1 && dta.safetyCategory!="") {
                $("#droneForm #currentGUID").val(dta.id);
                $("#droneForm #action").val("ACTION_ADD_DRONE_DOC");
            } 
			$("#droneForm").submit();
        }
	</script>
	
	<script>
		function droneEditionAction (id, action) {
			$("#droneForm #action").val(action);
			$("#droneForm #currentGUID").val(id);
			$("#droneForm").submit();
        }
	</script>

    <script>
    var callback = null;
    var currentFileURI = null;

    $(document).ready(function() {
        $("#uploadFileBox .button.save").on('click', function () {
            
            if ($("#docNameBlock").is(":visible") && $("#uploadFileBox #docName").val()=="") {
                $("#statusLabel").css("color","#BA0100");
                $("#statusLabel").text("Set a document name.");
                return;
             }

            // At least a Certicate #, an External Link or a File must be set : 
            if ($("#uploadFileBox #certificatNumber_set").val()=="" && $("#uploadFileBox #file").val()=="" && $("#uploadFileBox #externalURL").val()==""){
                $("#statusLabel").css("color","#BA0100");
                $("#statusLabel").text("Enter at least a Certicate #, an External Link or a File to upload.");
                return;
             }

            $('#fileinfo').submit();
        });

        $("#uploadFileBox .button.cancel").on('click', function () {
            $('#uploadFileBox').hide();
        });

        $("#docExpirationDate").flatpickr(
            {
                enableTime: false,
                enableSeconds: false, 
                allowInput: true,
                time_24hr: false,
                minuteIncrement: 1,
                secondIncrement: 1
            }
        );
    });
    
	function showUploadBox (GUID, fileURI, callbackFct, title, doctype, enterDocName, externalURL) {
	
        $('#uploadFileBox fieldset.one').show(); 

		if (title!="") $("#uploadFileTitle").html(title);
	
		$('#uploadFileBox').show();
        $("#datTypeBlock").hide();
        $("#uploadDocNotesBlock").show();
        $("#certificatNbBlock").show();

        $("#docNameBlock").hide();
        if (enterDocName==true)
            $("#docNameBlock").show()
		
		$('#GUID').val(GUID);
		$('#doctype').val(doctype);
        if (externalURL!=undefined)
            $("#uploadFileBox #externalURL").val(externalURL);

        callback = callbackFct;
        currentFileURI = fileURI;
	}

    function setAttachedGuid (guid) {
        $('#extradataUploadDoneForm #attachGuid').val(guid);
    }

    function setUserId (userId) {
        $('#extradataUploadDoneForm #userId').val(userId);
    }
    
    function setOrgId (orgId) {
        $('#extradataUploadDoneForm #orgId').val(orgId);
    }
    
    function enableDatatype () {
        $("#datTypeBlock").show();
    }
    function enableUserDatatype () {
        $("#datTypeBlock").show();
        $("#datTypeBlock .basicDocType").hide();
        $("#datTypeBlock .userDocType").show();
    } 
    function disableUploadMandatory() {
        $("#uploadFileBox #uploadMandatory").val(0);
    }

    function uploadOnlyMode (){
        $("#uploadDocNotesBlock").hide();
        $("#certificatNbBlock").hide();
    }
	
    function deleteFile(GUID, fileURI, callbackFct) {
        $.ajax({
	      url: "/uploadFile/deleteAction.php",
	      type: "POST",
	      data: { "GUID": GUID,
                  "fileURI": fileURI },
	    }).done(function( data ) {
            var obj = jQuery.parseJSON(data);
            
            if (obj.status == 0) {
                callbackFct (data);
            }
	    });
    }
    
	function createDocumentFile() {
        
        $("#statusLabel").css("color","#BA0100");
        $("#statusLabel").text("Please wait...");

        if ($("#datatype_set").val()!="") 
            $("#uploadFileBox #doctype").val($("#datatype_set").val());

        var fd = new FormData(document.getElementById("fileinfo"));
	    fd.append("label", "WEBUPLOAD");

        $("#waitLoader").show();
        
	    $.ajax({
	      url: "/uploadFile/uploadAction.php",
	      type: "POST",
	      data: fd,
	      enctype: 'multipart/form-data',
	      processData: false,  // tell jQuery not to process the data
          contentType: false   // tell jQuery not to set contentType
          
	    }).done(function( data ) {

            $("#waitLoader").hide();

            console.log (data)
            
            var obj = jQuery.parseJSON(data);
            // Error occurs:
            if (obj.status < 0) {
                $("#statusLabel").css("color","#BA0100");
                if (obj.error==4)
                    $("#statusLabel").text("Choose a file to upload.");
                else
                    $("#statusLabel").text("Upload not completed: "+obj.error);
            } else {
                
                // Delete old fileURI if there:
                if (currentFileURI!=null && currentFileURI!="" && currentFileURI!=obj.urlS3) {
                    deleteFile(obj.GUID, currentFileURI, null);
                }
                
                // Upload done:
                $("#statusLabel").css("color","#329213");
                $("#statusLabel").text("Document successfully created.");
                setTimeout(function () {
                     $('#uploadFileBox').hide();
                     callback (data);
                }, 1000);
            }

	    });
	    return false;
	}

    function deleteDocument (documentGUID, callback) {

        var datas = {"action": "ACTION_DELETE", "currentGUID": documentGUID};
        
        $.ajax({
            url: "/document/documentEditAction.php",
            type: "POST",
            data: datas,
            cache: false,
            dataType:"JSON"
        })
        .done(function( data ) {
            callback (data);
        });
        return false;
    }  
    
</script>

<form id="extradataUploadDoneForm" action="" method="POST">
    <input type="hidden" id="currentDocGUID" name="currentDocGUID" value=""/>
    <input type="hidden" id="actionUpload" name="actionUpload" value="ACTION_ADD_DOC_ATTACHMENT"/>
    <input type="hidden" id="attachmentURL" name="attachmentURL" value=""/>
    <input type="hidden" id="attachmentMimeType" name="attachmentMimeType" value=""/>
    <input type="hidden" id="datatype" name="datatype" value=""/>
	<input type="hidden" id="customDocName" name="customDocName" value=""/>
    <input type="hidden" id="certificatNumber" name="certificatNumber" value=""/>
    <input type="hidden" id="externalURL" name="externalURL" value=""/>
	<input type="hidden" id="customExpirationDate" name="customExpirationDate" value=""/>
	<input type="hidden" id="customDocValue" name="customDocValue" value=""/>
    <input type="hidden" id="docCategory" name="docCategory" value=""/>
    <input type="hidden" id="attachGuid" name="attachGuid" value=""/>
    <input type="hidden" id="userId" name="userId" value=""/>
    <input type="hidden" id="orgId" name="orgId" value=""/>
</form>
    
  <div id="uploadFileBox" class="pop-up add">
      <div class="dimmer"></div>
      <div class="content-container">
          <div class="close"></div>
          <form  method="post" id="fileinfo" name="fileinfo" onsubmit="return createDocumentFile();">
            <input type="hidden" id="GUID" name="GUID" />
            <input type="hidden" id="doctype" name="doctype" />
            <input type="hidden" id="uploadMandatory" name="uploadMandatory" value="1"/>

              <fieldset class="fields one">
                  <div class="add-fields">
                        <div class="title" id="uploadFileTitle">Document Upload</div>
                        
                        <div id="docNameBlock" class="fields-container two">
                            <div class="field" style="width: 60% !important;">      
                                <label>Name</label>
                                <input type="text" class="text" name="docName" id="docName"/>
                            </div>        
                            <div class="field" style="width: 30% !important;">      
                                <label>Expiration Date</label>
                                <input type="text" id="docExpirationDate" name="docExpirationDate" value="" style="margin-top: 10px !important;">
                            </div> 
                        </div>     

                        <div id="uploadDocNotesBlock" class="fields-container one">
                            <div class="field"> 
                                <label>Notes</label>
                                <textarea name="docValue" id="docValue" rows="2"></textarea>
                            </div>
                        </div>

                        <div class="fields-container two">
                            <div id="certificatNbBlock" class="field" style="">      
                                <label>Ref / Certificate #</label>
                                <input type="text" class="text" id="certificatNumber_set" name="certificatNumber_set" value=""/>		
                            </div>       
                            <div id="datTypeBlock" class="field" style="display: none;">
                                <label>Type</label>
                                <select id="datatype_set" name="datatype_set" style="">
                                    <option value="">-</option>

                                    <option class="basicDocType" value="TYPE_REGULATORY_CERTIFICAT">Regulatory Certificate</option>
                                    <option class="basicDocType" value="TYPE_REGISTRATION_NUMBER">Registration #</option>
                                    <option class="basicDocType" value="TYPE_INSURANCE_CERTIFICAT">Insurance Certificate</option>
                                    <option class="basicDocType" value="TYPE_CHECKLIST">Checklist</option>
                                    <option class="basicDocType" value="TYPE_MANUAL">Manual</option>
                                    <option class="basicDocType" value="TYPE_OTHER_CERTIFICATION">Other Certification</option>
                                    <option class="basicDocType" value="TYPE_SAFETY">Safety Instruction</option>
                                    <option class="basicDocType" value="TYPE_OTHER">Other</option>

                                    <option style="display: none;" class="userDocType" value="TYPE_REGISTRATION_NUMBER">Registration #</option>
                                    <option style="display: none;" class="userDocType" value="TYPE_MEDICAL_CERTIFICAT">Medical Certificate</option>
                                    <option style="display: none;" class="userDocType" value="TYPE_PILOT_LICENSE">Pilot License</option>
                                    <option style="display: none;" class="userDocType" value="TYPE_PILOT_RPC">Remote Pilot Certificate</option>
                                    <option style="display: none;" class="userDocType" value="TYPE_PILOT_CURRENCY">Currency Certificate</option>
                                    <option style="display: none;" class="userDocType" value="TYPE_OTHER_USER">Other</option> 

                                </select>                        
                            </div> 
                        </div>    

                        <div class="fields-container one">
                            <div class="field">
                                <label>External Link</label>
                                <input type="text" class="text" id="externalURL" name="externalURL" value=""/>
                            </div>
                        </div>

                        <div class="fields-container one" style="margin-top: 25px;">
                            <div class="field">      
                                                                <label>Add File <span style="font-size: 0.7em; color: #a9a9a9; padding-left: 10px;">(GIF, JPEG, PNG, PDF, WORD, EXCEL, KML, CSV), Max size: 100 MB</span></label>
                                <input type="file" name="file" id="file" class="avatarUploadInput"/>
                            </div>        
                        </div>   

                        <div class="fields-container one">
                            <div class="field">      
                                <label id="statusLabel" style="text-align:center !important;"></label>
                            </div>        
                        </div>   
                
                  </div>
                  <div class="button-container one">
                      <div class="button save default">Save</div>
                      <div class="button cancel">Cancel</div>
                  </div>
              </fieldset>
          </form>
      </div>

      <div id="waitLoader" style="display:none; z-index: 1000000;">
        <h3 id="waitLoaderMessage" style="text-align: center;">Please wait...</h3>
        <img src="/_static/images/SVG/wait.svg" width="150px"/>
    </div>
  </div>


    <script>
        function addDocument (docGuid, attachedGuid) {

            var docGUID = docGuid; 

            if (docGUID=="") {
                docGUID=UUID.generate();
                docGUID = docGUID.toUpperCase();
            }

            showUploadBox (docGUID,"",onUploadDone, "Upload Drone Document", "", true);
            disableUploadMandatory();
            setAttachedGuid (attachedGuid);
		    enableDatatype ()
        }

        function onUploadDone(data) {
            var obj = jQuery.parseJSON(data);

            if (data!="" && obj!=null) {
		
                $("#extradataUploadDoneForm #currentDocGUID").val(obj.GUID);
                $("#extradataUploadDoneForm #datatype").val(obj.doctype);
                $("#extradataUploadDoneForm #attachmentURL").val(obj.urlS3);
                $("#extradataUploadDoneForm #attachmentMimeType").val(obj.fileMimeType);
                $("#extradataUploadDoneForm #externalURL").val(obj.externalURL);
                $("#extradataUploadDoneForm #customDocName").val(obj.docName);
                $("#extradataUploadDoneForm #customExpirationDate").val(obj.expirationDate);
                $("#extradataUploadDoneForm #customDocValue").val(obj.docValue);
                $("#extradataUploadDoneForm #certificatNumber").val(obj.certificatNumber);
                $('#extradataUploadDoneForm #actionUpload').val("ACTION_ADD_DOC_ATTACHMENT");
                $('#extradataUploadDoneForm').submit();
            }
        }
    </script>


<script>

$(document).ready(function() {
    $("#itemSharingRestrictionsPopup .button.save").on('click', function () {
        $("#itemSharingRestrictionsPopup").hide();

        // construct Json Restrictions string:
        var restrictionJSON = '';
        var excludeFlag = ($("#restrictionTypeExclude:checked").val()=="on"?1:0);
        var restrictionJSON = '{"excludeMode": '+excludeFlag+', "orgs": "'+ $("#orgSelected").val() +'"}';
        if ($("#orgSelected").val()=="") restrictionJSON="";
        $(".sharedItemForm #currentPLSharedRestrictions").val(restrictionJSON);

        $(".sharedItemForm #action").val("ACTION_CHANGE_SHARED");
        $(".sharedItemForm").submit();
    });

    $("#itemSharingRestrictionsPopup .button.cancel").on('click', function () {
        $("#itemSharingRestrictionsPopup").hide();
    });
    $("#itemSharingRestrictionsPopup .close").on('click', function () {
        $("#itemSharingRestrictionsPopup").hide();
    });

});

function openSharedItemRestrictionsBox (id, currentValue, restrictions, companyId) {

                    return;
        
        $("#currentGUID").val(id);
        $("#currentValue").val((currentValue==0?1:0));

        // Clear: 
        $("#restrictionTypeExclude").prop('checked', false);
        _orgsSelectizeRestrictions[0].selectize.clear(false);

        // Set current restrictions:
        if (restrictions!=null && restrictions!="") {

            if (restrictions.excludeMode==1) $("#restrictionTypeExclude").prop('checked', true);
            var orgs = restrictions.orgs.split("|");
            for (var i=0;i<orgs.length;i++) {
                _orgsSelectizeRestrictions[0].selectize.addItem (orgs[i], true);
            }
        } else {
            // By default: item org:
            if (companyId>0)
                _orgsSelectizeRestrictions[0].selectize.addItem (companyId, false);
        }

        $("#itemSharingRestrictionsPopup").show();
    }

    function setSharedObjectName (prjName, orgName="") {
        if (orgName!="") orgName = "<span style='font-weight: 200;'>" + orgName + " / </span>";
        $("#itemSharingRestrictionsPopup #sharedItemName").html(": " + orgName + prjName);
    }

</script>


<div id="itemSharingRestrictionsPopup" class="pop-up add">
    <div class="dimmer"></div>
    <div class="content-container">
        <div class="close"></div>

            <fieldset class="fields one" style="width: 95%;">
                <div class="add-fields">
                    <div class="title">Shared Item Restrictions</div>
                    <div class="subtitle">Set Organization Restriction to View Shared object <b><span id="sharedItemName" style="font-size: 1.2em"></span></b> .</div>

                    <div class="fields-container one" style="margin-top: 25px;">
                        <div class="field">
                            <input id='orgSelected' name='orgSelected' class="" value=""/>
                            <script>
                                                                var _orgsSelectizeRestrictions = $('#orgSelected').selectize({
                                    persist: true,
                                    delimiter: '|',
                                    maxItems: null,
                                    valueField: 'id',
                                    labelField: 'name',
                                    searchField: ['name', 'id'],
                                    options: []
                                });

                                $('#itemSharingRestrictionsPopup .selectize-input.items').css("height", "200px");
                            </script>
                        </div>
                    </div>     

                    <div class="fields-container one" style="">
                        <div class="field">
                            <input id="restrictionTypeExclude" name="restrictionTypeExclude" type='checkbox' class='checkbox'/> Exclude these orgs from seeing this shared item. Otherwise only the orgs listed can see it.
                        </div>
                    </div>  

                </div>

                <div class="button-container two">
                    <div class="button save">Save</div>
                    <div class="button cancel">Close</div>
                </div>
            </fieldset>
    </div>
</div>    <script>
    function setSharedPL (form, id, action, currentPLSharedValue) {
        $("#"+form + " #currentGUID").val(id);
        $("#"+form + " #currentPLSharedValue").val(currentPLSharedValue);
        $("#"+form + " #action").val(action);
        $("#"+form).submit();
    }
</script>

<!-- ******* Add Document from template ******* -->

<script>

    var _formContext = "";

    function showAddDocumentPopup (attachedId, hideBasicDocBlock, context) {

        if (hideBasicDocBlock) $('#addFlightDocumentChoicePopup .basic-doc-block').hide();
        else $('#addFlightDocumentChoicePopup .basic-doc-block').show();

        $('#addFlightDocumentChoicePopup .preflight-doc-block').show();
        $('#addFlightDocumentChoicePopup .customform-doc-block').show();
        $('#addFlightDocumentChoicePopup .checklist-doc-block').show();
        $('#addFlightDocumentChoicePopup .riska-doc-block').show();

        if (context==undefined || context=="") context = "FD";
        if (attachedId!="" && attachedId!=undefined) {
            _formContext = "context="+context+"&fid=" + attachedId;
            $(".onlyWithContext").show();
        } else {
            _formContext = "";
            $(".onlyWithContext").hide();
        }

        $('#addFlightDocumentChoicePopup').show();
    }
    
    function showAddDocumentCustomPopup (showBasic, showPreflight, showCustomForm, showChecklist, showRiskA, attachedId, context) {

        if (showBasic) $('#addFlightDocumentChoicePopup .basic-doc-block').show(); else $('#addFlightDocumentChoicePopup .basic-doc-block').hide();
        if (showPreflight) $('#addFlightDocumentChoicePopup .preflight-doc-block').show(); else $('#addFlightDocumentChoicePopup .preflight-doc-block').hide();
        if (showCustomForm) $('#addFlightDocumentChoicePopup .customform-doc-block').show(); else $('#addFlightDocumentChoicePopup .customform-doc-block').hide();
        if (showChecklist) $('#addFlightDocumentChoicePopup .checklist-doc-block').show(); else $('#addFlightDocumentChoicePopup .checklist-doc-block').hide();
        if (showRiskA) $('#addFlightDocumentChoicePopup .riska-doc-block').show(); else $('#addFlightDocumentChoicePopup .riska-doc-block').hide();

        if (context==undefined || context=="") context = "DOC";
        if (attachedId!="" && attachedId != undefined) {
            _formContext = "context=" + context + "&fid=" + attachedId;
            $(".onlyWithContext").show();
        } else {
            _formContext = "";
            $(".onlyWithContext").hide();
        }

        $('#addFlightDocumentChoicePopup').show();
    } 
</script>


<!-- ***** Add Document Popup *****-->
<div id="addFlightDocumentChoicePopup"  class="pop-up">
    <div class="dimmer"></div>
    <div class="content-container" style="width: 700px; left: calc(50% - 350px);">
        <div class="close"></div>
        <div class="fields one">
            <div class="add-fields">
                <div class="title">Add New Document</div>

                <div class="basic-doc-block button-container one" align="center">
                    <div style="text-align: left; display: inline-block; font-size: 18px; color: #333;">Basic Document</div>
                    <div class="button " style=" display: inline-block;" onClick="documentEditionAction ('', 'ACTION_ADD_ITEM')">Upload Document</div>
                </div>   

                                    <div class="preflight-doc-block fields-container button-container one" align="center">
                        <div class="field" style="margin-left: 60px;">
                            <label style="text-align: left;">Predefined Form Documents</label>
                            <select id="PFFSelect">
                                <option value="/document/forms/form_PhotographVideoRelease_1.0.php?">Photograph & Video Release Form</option>
                                <option value="/document/forms/form_AuthorizationFromPropertyRepresentative_1.0.php?">Authorization From Property Representative Form</option>
                                <option value="/document/forms/form_PlanOfActivity_1.0.php?">Plan Of Activity Form</option>
                                <option value="/document/forms/form_NOTAM_1.0.php?" style="display: none;" class="onlyWithContext">NOTAM Form</option>
                                                            </select>
                        </div>
                        <div class="field button" style="margin-right: 60px; width: 250px; margin-top: 31px;" onClick="if ($('#PFFSelect').find('option').length==0) return; location=$('#PFFSelect').val() + _formContext;">Add Pre-flight Form</div>
                    </div> 
                
                
                                    <div class="checklist-doc-block fields-container button-container one" align="center">
                        <div class="field" style="margin-left: 60px;">
                            <label style="text-align: left;">Checklists</label>
                            <select id="CHKSelect">
                                                        </select>
                        </div>
                        <div class="field button" style="margin-right: 60px; width: 250px; margin-top: 31px;" onClick="if ($('#CHKSelect').val()!=null) location=$('#CHKSelect').val() + '&' + _formContext;">Add Checklist</div>
                    </div>   
                
                                    <div class="riska-doc-block fields-container button-container one" align="center">
                        <div class="field" style="margin-left: 60px;">
                            <label style="text-align: left;">Risk Assessments</label>
                            <select id="RSKSelect">
                                                        </select>
                        </div>
                        <div class="field button" style="margin-right: 60px; width: 250px; margin-top: 31px;" onClick="if ($('#RSKSelect').val()!=null) location=$('#RSKSelect').val() + '&' + _formContext;">Add Risk Assessment</div>
                    </div>
                
            </div>
        </div>
    </div>
</div>
	<script>

 function shareData (type, dataGUID, userId, companyId, callbackFct) {

    if (userId=="" || userId==undefined) return;
        
     var msg = "Do you want to share this data with your organization?";
     popupConfirm( "Confirmation",msg, function() {
        
            $.ajax({
              url: "../helpers/shareData2CompanyActions.php",
              type: "POST",
              data: { 
                      "actionShare": "ACTION_SHARE_DATA",
                      "type": type,
                      "dataGUID": dataGUID
                    }
            }).done(function( data ) {
                var obj = jQuery.parseJSON(data);
                if (obj.status == 1) {
                    callbackFct (data);
                }
            });

    });
}
    
function unshareData (type, dataGUID, userId, callbackFct) {

    if (userId=="" || userId==undefined) return;

            
     var msg = "Do you want to unshare this data with your organization?";
     popupConfirm( "Confirmation",msg, function() {

            $.ajax({
                url: "../helpers/shareData2CompanyActions.php",
                type: "POST",
                data: { 
                        "actionShare": "ACTION_UNSHARE_DATA",
                        "type": type,
                        "dataGUID": dataGUID
                    }
            }).done(function( data ) {
                var obj = jQuery.parseJSON(data);
                if (obj.status == 1) {
                    callbackFct (data);
                }
            });
    });
}

</script>	<script>
					$(document).ready(function() { 
				$("#shareAllBlock").show();
			});
				function shareCallBackFct(data) {
			var obj = jQuery.parseJSON(data);
			if (obj.status == 1) {
				location = "/inventory/droneList.php";
			}
		}
		function unshareCallBackFct(data) {
			var obj = jQuery.parseJSON(data);
			if (obj.status == 1) {
				location = "/inventory/droneList.php";
			}
		}

        function avatarUploadDone () {
        }
	</script>

	<!-- Main JS -->
<script src="/_static/lib/validate.min.js"></script>
<script src="/_static/js/main.js?v=20240705"></script>
<script src="/_static/js/mobile.js"></script>
<script src="/_static/js/canvasjs.min.js"></script>

<script>

/***************************** */
function openContactForm (categorySelected="", subjectSelected="", newtab=0) {

    var form = document.createElement("form");
    form.method = "POST";
    form.action = "/profile/contact.php";
    if (newtab==1) form.target="_blank";

    var category = document.createElement("input"); 
    category.name="category"; category.id="category"; category.value=categorySelected; form.appendChild(category);

    var subject = document.createElement("input"); 
    subject.name="subject"; subject.id="subject"; subject.value=subjectSelected; form.appendChild(subject);

    form.setAttribute("style", "display: none");
    document.body.appendChild(form);
    form.submit();
}

/***************************** */
function editItem (type, itemGUID) {

    var form = document.createElement("form");
    var action = document.createElement("input"); 
    var currentGUID = document.createElement("input");  

    form.method = "POST";
    form.action = "";
    if (type=="LOCATION")
        form.action = "/inventory/locationList.php";
    if (type=="DRONE")
        form.action = "/inventory/droneList.php";  
    if (type=="BATTERY") {
        form.action = "/inventory/equipmentList.php?modeBattery=1";  
        var showBatteryOnly = document.createElement("input"); 
        showBatteryOnly.value=1; showBatteryOnly.name="showBatteryOnly"; form.appendChild(showBatteryOnly);
    }
    if (type=="EQUIPMENT") {
        form.action = "/inventory/equipmentList.php";  
        var showBatteryOnly = document.createElement("input"); 
        showBatteryOnly.value=0; showBatteryOnly.name="showBatteryOnly"; form.appendChild(showBatteryOnly);
    }
    if (type=="CUSTOMER")  
        form.action = "/customer/customerList.php";  
    if (type=="MAINTENANCE")  
        form.action = "/maintenance/maintenanceList.php"; 
    if (type=="PERSONNEL")  
        form.action = "/profile/organisationPilots.php"; 
    if (type=="INCIDENT")  
        form.action = "/incident/incidentList.php"; 
    if (type=="BATTERY_CHARGE")  
        form.action = "/inventory/batteryChargeList.php"; 
    if (type=="DOCUMENT")  
        form.action = "/document/documentList.php"; 

    if (form.action=="") return;

    action.value="ACTION_EDIT_ITEM"; action.name="action"; form.appendChild(action);  
    currentGUID.value=itemGUID; currentGUID.name="currentGUID"; form.appendChild(currentGUID);

    form.setAttribute("style", "display: none");
    document.body.appendChild(form);
    form.submit();
}

/***************************** */
function addDroneMaintenance (droneGUID) {

    var form = document.createElement("form");
    var action = document.createElement("input"); 
    var currentGUID = document.createElement("input");  

    form.method = "POST";
    form.action = "/maintenance/maintenanceList.php"; 

    action.value="ACTION_ADD_DRONE"; action.name="action"; form.appendChild(action);  
    currentGUID.value=droneGUID; currentGUID.name="dronePreSelected"; form.appendChild(currentGUID);

    form.setAttribute("style", "display: none");
    document.body.appendChild(form);
    form.submit();
}

/***************************** */
function addDroneInspection (droneGUID, inspectionGUID) {

    var form = document.createElement("form");
    var action = document.createElement("input"); 
    var droneGUIDParam = document.createElement("input");  
    var inspectionGUIDParam = document.createElement("input"); 

    form.method = "POST";
    form.action = "/inspection/droneInspectionsDetail.php"; 

    action.value="ACTION_DRONEINSPECTIONACTION_ADD"; action.name="action"; form.appendChild(action);  
    droneGUIDParam.value=droneGUID; droneGUIDParam.name="droneGUID"; form.appendChild(droneGUIDParam);
    inspectionGUIDParam.value=inspectionGUID; inspectionGUIDParam.name="inspectionGUID"; form.appendChild(inspectionGUIDParam);

    form.setAttribute("style", "display: none");
    document.body.appendChild(form);
    form.submit();
}


/***************************** */
function flightEditionAction (flightGUID, action2perform, getParams, upcomingMissionFlag=0) {

        
    var form = document.createElement("form");
    var action = document.createElement("input"); 
    var currentGUID = document.createElement("input");  

    form.method = "POST";
    if (upcomingMissionFlag==0)
        form.action = "/flight/flightEdit.php"; 
    else form.action = "/flight/flightPlanificationEdit.php"; 
    if (getParams!="") form.action = form.action + "?" + getParams;

    action.value=action2perform; action.name="action"; form.appendChild(action);  
    currentGUID.value=flightGUID; currentGUID.name="currentGUID"; form.appendChild(currentGUID);

    form.setAttribute("style", "display: none");
    document.body.appendChild(form);
    form.submit();
}

/***************************** */
function missionEditionAction (flightGUID, action2perform, getParams) {
    
    var form = document.createElement("form");
    var action = document.createElement("input"); 
    var currentGUID = document.createElement("input");  

    form.method = "POST";
    form.action = "/flight/flightPlanificationEdit.php"; 
    if (getParams!="") form.action = form.action + "?" + getParams;

    action.value=action2perform; action.name="action"; form.appendChild(action);  
    currentGUID.value=flightGUID; currentGUID.name="currentGUID"; form.appendChild(currentGUID);

    form.setAttribute("style", "display: none");
    document.body.appendChild(form);
    form.submit();
}

/***************************** */
function batteryChargeAction (currentGUID, action2perform, getParams) {
    
    var form = document.createElement("form");
    var action = document.createElement("input"); 
    var currentEquipmentGUID = document.createElement("input");  

    form.method = "POST";
    form.action = "/inventory/batteryChargeList.php"; 
    if (getParams!="") form.action = form.action + "?" + getParams;

    action.value=action2perform; action.name="action"; form.appendChild(action);  
    currentEquipmentGUID.value=currentGUID; currentEquipmentGUID.name="currentEquipmentGUID"; form.appendChild(currentEquipmentGUID);

    form.setAttribute("style", "display: none");
    document.body.appendChild(form);
    form.submit();
}

/***************************** */
function callPOSTAction (page, params) {
    var form = document.createElement("form");

    form.method = "POST";
    form.action = page;  

    Object.entries(params).forEach(p => {
        let key = p[0];
        let value = p[1];

        var param = document.createElement("input"); 
        param.value=value; param.name=key; param.id=key;  param.type="hidden"; form.appendChild(param); 

    });
    form.setAttribute("style", "display: none");
    document.body.appendChild(form);
    form.submit();
}

/***************************** */
function batteryHealthAction (currentGUID, action2perform, getParams) {
    
    var form = document.createElement("form");
    var action = document.createElement("input"); 
    var healthGUID = document.createElement("input");  

    form.method = "POST";
    form.action = "/inventory/batteryHealth.php"; 
    if (getParams!="") form.action = form.action + "?" + getParams;

    action.value=action2perform; action.name="action"; form.appendChild(action);  
    healthGUID.value=currentGUID; healthGUID.name="healthGUID"; form.appendChild(healthGUID);

    form.setAttribute("style", "display: none");
    document.body.appendChild(form);
    form.submit();
}

/***************************** */
function submitOnEnterKey (event, form, action) { 	
    var code = 0; NS4 = (document.layers) ? true : false;
    if (NS4) code = event.which; else code = event.keyCode;
    if (code==13) { 
        $("#action").val(action);
        $("#" + form).submit();
    }
}

function isEnterPressed (event, _callback=undefined) {
    var code = 0; NS4 = (document.layers) ? true : false;
    if (NS4) code = event.which; else code = event.keyCode;
    if (code==13) { 
        // if callback set: call the method, else just returns TRUE:
        if (_callback!=undefined) _callback();

        return true;
    } else return false;
}

/***************************** */
function viewDetail (type, itemGUID) {
    if (type=="FLIGHT")
        location = "/flight/flightDetail.php?id=" + itemGUID;       
    if (type=="DRONE")
        location = "/inventory/droneDetail.php?id=" + itemGUID;  
    if (type=="BATTERY")
        location = "/inventory/batteryDetail.php?id=" + itemGUID;   
    if (type=="INCIDENT")
        location = "/incident/incidentDetail.php?id=" + itemGUID;  
    if (type=="LOCATION")
        location = "/inventory/locationDetail.php?id=" + itemGUID;  
    if (type=="EQUIPMENT")
        location = "/inventory/equipmentDetail.php?id=" + itemGUID;  
}

/***************************** */
function deleteFlightWithJustification (flightGUID, getParams) {

    formAction = "/flight/flightEdit.php"; 
    if (getParams!="") formAction = formAction + "?" + getParams;
    $("#deleteFlightJustificationPopup #deleteFlightJustificationForm").attr("action", formAction);

    $("#deleteFlightJustificationPopup #currentGUID").val(flightGUID);
    $("#deleteFlightJustificationPopup").show();
}

/***************************** */
function globalLockDocument (docid, locked, callback) {

    if (docid=="" || docid==undefined) return;

    if (locked==1) {
        confirmationMsg="Do you want to lock this document?";
    } else {
        confirmationMsg="Do you want to unlock this document?";
    }

    popupConfirm('Confirmation', confirmationMsg, function() {
        $.ajax({
        url:"/document/documentEditAction.php",
        type: "POST",
        data: {
                "action": "LOCK_DOC",
                "currentGUID": docid,
                "locked": locked
            }
        }).done(function( data ) {
            callback (data);
        });
        return false;
    });
}

/***************************** */
function exportFlightAreaToKML (flightId, dataPlanArea) {

    if (flightId=="" || flightId==undefined || dataPlanArea=="" || dataPlanArea==undefined) {
        popupAlert ("No flight area to export.", "Export KML");
        return;
    }

    var form = document.createElement("form");
    var currentFlightGUID = document.createElement("input"); 
    var shapes = document.createElement("input");  

    form.method = "POST";
    form.action = "/helpers/shape2kml.php"; 

    currentFlightGUID.value=flightId; currentFlightGUID.name="currentFlightGUID"; form.appendChild(currentFlightGUID);  
    shapes.value=dataPlanArea; shapes.name="shapes"; form.appendChild(shapes);

    form.setAttribute("style", "display: none");
    document.body.appendChild(form);
    form.submit();
}

/***************************** */
function reprocessFlightTelemetry (flightId, callback) {

    if (flightId=="" || flightId==undefined) return;

    popupConfirm('Confirmation', "Flight Telemetry will be reprocessd with data from its related log file . Do you want to continue?", function() {
    
        $("#globalWaitLoader").show();
        
        $.ajax({
            url:"/flight/flightReprocessAction.php",
            type: "POST",
            data: {
                "action": "ACTION_FLIGHT_REPROCESS_TELEMETRY",
                "flightGUID": flightId
            }
            }).done(function ( data ) {
                $("#globalWaitLoader").hide();
                if (data!="" && data!=undefined) {
                    response=JSON.parse(data);
                    callback (response.status);
                } else {
                    callback (-1);
                }
            });
            
        return false;
    });
}

</script>

<div id="globalWaitLoader" style="display:none; position: absolute; width: 100%; left: 40%; top: 30%;">
    <div style="position: fixed; background-color: #00000014; width: 100vw; height: 100vh; top: 0px; left: 0px;"></div>
    <h3 id="waitLoaderMessage" style="text-align: center;">Please wait...</h3>
    <img src="/_static/images/SVG/wait.svg" width="150px"/>
</div>

<div id="deleteFlightJustificationPopup" class="pop-up add">
<form  method="post" id="deleteFlightJustificationForm" name="deleteFlightJustificationForm">
<input type="hidden" name="action" id="action" value="ACTION_DELETE"/>
<input type="hidden" name="currentGUID" id="currentGUID" value=""/>
    <div class="dimmer"></div>
    <div class="content-container">
        <div class="close"></div>

            <fieldset class="fields one">
                <div class="add-fields">
                    <div class="title">Flight Deletion Justification</div>

                    <div class="fields-container one">
                        <div class="field">
                            <label>Enter a reason justifying the deletion of this flight:</label>
                            <textarea id="deleteFlightJustification" name="deleteFlightJustification"></textarea>
                        </div>
                    </div>  
                </div>

                <div class="button-container one">
                    <div class="button" onClick="if ($('#deleteFlightJustification').val()!='') $('#deleteFlightJustificationForm').submit();">Delete Flight</div>
                    <div class="button cancel" onClick="$('#deleteFlightJustificationPopup').hide();">Close</div>
                </div>
            </fieldset>
    </div>
</form>
</div> 

<script src="/_static/js/uuid.js"></script>
<script src="/_static/js/util.js"></script>

<script>
  /*(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50832168-1', 'auto');
  ga('send', 'pageview');*/
</script>







</body>
</html>